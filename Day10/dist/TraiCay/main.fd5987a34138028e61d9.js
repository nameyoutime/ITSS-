(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return a}));var r=n("30Go"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},"/uUt":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return n=>n.lift(new o(t,e))}class o{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new s(t,this.compare,this.keySelector))}}class s extends r.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}},0:function(t,e,n){t.exports=n("zUnb")},"0EUg":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("bHdf");function i(){return Object(r.a)(1)}},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"30Go":function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"4I5i":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})()},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("30Go"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.J)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.D)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.k)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),p=new s.b("@firebase/database"),d=(e=1,function(){return e++}),g=function(t){var e=Object(o.I)(t),n=new o.d;n.update(e);var r=n.digest();return o.h.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=v.apply(null,i):n+="object"==typeof i?Object(o.J)(i):i,n+=" "}return n},y=null,m=!0,b=function(t,e){Object(o.f)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(p.logLevel=s.a.VERBOSE,y=p.log.bind(p),e&&f.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===y&&!0===f.get("logging_enabled")&&b(!0)),y){var n=v.apply(null,t);y(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(i.f)(t));p.error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(i.f)(t));throw p.error(n),new Error(n)},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(i.f)(t));p.warn(n)},O=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},S="[MIN_NAME]",C="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===S||e===C)return-1;if(e===S||t===C)return 1;var n=z(t),r=z(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.J)(e))},j=function(t){if("object"!=typeof t||null===t)return Object(o.J)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.J)(e[i]),r+=":",r+=j(t[e[i]]);return r+"}"},x=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var P,D,L,M,F,U,V,q,H,B=function(t){var e,n,r,i,s;Object(o.f)(!O(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},K=new RegExp("^-?(0*)\\d{1,10}$"),z=function(t){if(K.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},W=function(t){try{t()}catch(e){setTimeout((function(){throw I("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},G=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Q=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),$=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.H)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.H)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.H)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),J=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Y="websocket",X="long_polling",Z=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.f)("string"==typeof t,"typeof type must == string"),Object(o.f)("object"==typeof e,"typeof params must == object"),t===Y)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==X)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return R(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}(),tt=function(t,e){var n=et(t),r=n.namespace;return"firebase.com"===n.domain&&T(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Z(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new Q(n.pathString)}},et=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):I("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var d=e.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},nt=/[\[\].#$\/\u0000-\u001F\u007F]/,rt=/[\[\].#$\u0000-\u001F\u007F]/,it=10485760,ot=function(t){return"string"==typeof t&&0!==t.length&&!nt.test(t)},st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!O(t)||t&&"object"==typeof t&&Object(o.k)(t,".sv")},ut=function(t,e,n,r,i){i&&void 0===n||ct(Object(o.o)(t,e,i),n,r)},ct=function(t,e,n){var r=n instanceof Q?new $(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(O(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>it/3&&Object(o.H)(e)>it)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(R(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!ot(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),ct(t,n,r),r.pop()})),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},lt=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.o)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];R(n,(function(t,e){var n=new Q(t);if(ct(s,e,r.child(n)),".priority"===n.getBack()&&!at(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ot(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Q.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ht=function(t,e,n,r){if(!r||void 0!==n){if(O(n))throw new Error(Object(o.o)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!at(n))throw new Error(Object(o.o)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ft=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.o)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pt=function(t,e,n,r){if(!(r&&void 0===n||ot(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},dt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dt(t,e,n,r)},vt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},yt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ot(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),st(t)}(r))throw new Error(Object(o.o)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},mt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.o)(t,e,r)+"must be a boolean.")},bt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.K)("OnDisconnect.cancel",0,1,arguments.length),Object(o.L)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.K)("OnDisconnect.remove",0,1,arguments.length),vt("OnDisconnect.remove",this.path_),Object(o.L)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.K)("OnDisconnect.set",1,2,arguments.length),vt("OnDisconnect.set",this.path_),ut("OnDisconnect.set",1,t,this.path_,!1),Object(o.L)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.K)("OnDisconnect.setWithPriority",2,3,arguments.length),vt("OnDisconnect.setWithPriority",this.path_),ut("OnDisconnect.setWithPriority",1,t,this.path_,!1),ht("OnDisconnect.setWithPriority",2,e,!1),Object(o.L)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.K)("OnDisconnect.update",1,2,arguments.length),vt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("OnDisconnect.update",1,t,this.path_,!1),Object(o.L)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),_t=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.K)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),wt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Et=(P=0,D=[],function(t){var e,n=t===P;P=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=wt.charAt(t%64),t=Math.floor(t/64);Object(o.f)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===D[e];e--)D[e]=0;D[e]++}else for(e=0;e<12;e++)D[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=wt.charAt(D[e]);return Object(o.f)(20===i.length,"nextPushId: Length should be 20."),i}),Tt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),It=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Tt(S,t),r=new Tt(S,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Tt.MIN},t}(),Ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return L},set:function(t){L=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.g)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Tt.MIN},e.prototype.maxPost=function(){return new Tt(C,L)},e.prototype.makePost=function(t,e){return Object(o.f)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Tt(t,L)},e.prototype.toString=function(){return".key"},e}(It),St=new Ot,Ct=function(t){return"number"==typeof t?"number:"+B(t):"string:"+t},At=function(t){if(t.isLeafNode()){var e=t.val();Object(o.f)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.k)(e,".sv"),"Priority must be a string or number.")}else Object(o.f)(t===M||t.isEmpty(),"priority of unexpected type.");Object(o.f)(t===M||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},kt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.f)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),At(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return F},set:function(t){F=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.f)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ct(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?B(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.f)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.f)(i>=0,"Unknown leaf type: "+n),Object(o.f)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Nt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Tt.MIN},e.prototype.maxPost=function(){return new Tt(C,new kt("[PRIORITY-POST]",V))},e.prototype.makePost=function(t,e){var n=U(t);return new Tt(e,new kt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(It)),jt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),xt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Pt.EMPTY_NODE,this.right=null!=o?o:Pt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Pt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Pt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Rt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new xt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Pt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new jt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new jt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Rt,t}(),Dt=Math.log(2),Lt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Dt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Mt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new xt(s,o.node,xt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new xt(s,o.node,xt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new xt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,xt.BLACK):(a(h,xt.BLACK),a(h,xt.RED))}return o}(new Lt(t.length));return new Pt(r||e,o)},Ft={},Ut=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.f)(Ft&&Nt,"ChildrenNode.ts has not been loaded"),q=q||new t({".priority":Ft},{".priority":Nt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.G)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Pt?e:null},t.prototype.hasIndex=function(t){return Object(o.k)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.f)(e!==St,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Tt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Mt(s,e.getCompare()):Ft;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.E)(this.indexes_,(function(t,i){var s=Object(o.G)(r.indexSet_,i);if(Object(o.f)(s,"Missing index implementation for "+i),t===Ft){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Tt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Mt(a,s.getCompare())}return Ft}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Tt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.E)(this.indexes_,(function(t){if(t===Ft)return t;var r=n.get(e.name);return r?t.remove(new Tt(e.name,r)):t})),this.indexSet_)},t}();function Vt(t,e){return A(t.name,e.name)}function qt(t,e){return A(t,e)}var Ht=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&At(this.priorityNode_),this.children_.isEmpty()&&Object(o.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return H||(H=new t(new Pt(qt),null,Ut.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||H},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?H:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.f)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Tt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?H:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.f)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Nt,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Ct(this.getPriority().val())+":"),this.forEachChild(Nt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Tt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Tt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Tt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Tt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Tt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Bt?-1:0},t.prototype.withIndex=function(e){if(e===St||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===St||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Nt),r=e.getIterator(Nt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===St?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Bt=new(function(t){function e(){return t.call(this,new Pt(qt),Ht.EMPTY_NODE,Ut.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ht.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ht));function Kt(t,e){if(void 0===e&&(e=null),null===t)return Ht.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.f)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new kt(t,Kt(e));if(t instanceof Array){var n=Ht.EMPTY_NODE;return R(t,(function(e,r){if(Object(o.k)(t,e)&&"."!==e.substring(0,1)){var i=Kt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Kt(e))}var r=[],i=!1;if(R(t,(function(t,e){if("."!==t.substring(0,1)){var n=Kt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Tt(t,n)))}})),0===r.length)return Ht.EMPTY_NODE;var s=Mt(r,Vt,(function(t){return t.name}),qt);if(i){var a=Mt(r,Nt.getCompare());return new Ht(s,Kt(e),new Ut({".priority":a},{".priority":Nt}))}return new Ht(s,Kt(e),Ut.Default)}Object.defineProperties(Tt,{MIN:{value:new Tt(S,Ht.EMPTY_NODE)},MAX:{value:new Tt(C,Bt)}}),Ot.__EMPTY_NODE=Ht.EMPTY_NODE,kt.__childrenNodeConstructor=Ht,M=Bt,V=Bt,U=Kt;var zt,Wt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Tt.MIN},e.prototype.maxPost=function(){return Tt.MAX},e.prototype.makePost=function(t,e){var n=Kt(t);return new Tt(e,n)},e.prototype.toString=function(){return".value"},e}(It)),Gt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.f)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Kt(t),r=Ht.EMPTY_NODE.updateChild(this.indexPath_,n);return new Tt(e,r)},e.prototype.maxPost=function(){var t=Ht.EMPTY_NODE.updateChild(this.indexPath_,Bt);return new Tt(C,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(It),Qt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.K)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.K)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.K)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.K)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.K)("DataSnapshot.child",0,1,arguments.length),e=String(e),dt("DataSnapshot.child",1,e,!1);var n=new Q(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Nt)},t.prototype.hasChild=function(t){Object(o.K)("DataSnapshot.hasChild",1,1,arguments.length),dt("DataSnapshot.hasChild",1,t,!1);var e=new Q(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.K)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.K)("DataSnapshot.forEach",1,1,arguments.length),Object(o.L)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Nt))}))},t.prototype.hasChildren=function(){return Object(o.K)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.K)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.K)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),$t=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.J)(this.snapshot.exportVal())},t}(),Jt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Yt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new $t("value",this,new Qt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Jt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Xt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.k)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Jt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.f)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new $t(t.type,this,new Qt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Zt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(zt,"Reference.ts has not been loaded"),zt},set:function(t){zt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===St){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){var s=t.getIndexStartName();if(!(s===S||t.hasStartAfter()&&s===C))throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){var a=t.getIndexEndName();if(!(a===C||t.hasEndBefore()&&a===S))throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Nt){if(null!=e&&!at(e)||null!=n&&!at(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.f)(t.getIndex()instanceof Gt||t.getIndex()===Wt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.K)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.K)("Query.on",2,4,arguments.length),ft("Query.on",1,e,!1),Object(o.L)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Yt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Xt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.K)("Query.off",0,3,arguments.length),ft("Query.off",1,t,!0),Object(o.L)("Query.off",2,e,!0),Object(o.M)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Yt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Xt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.K)("Query.once",1,4,arguments.length),ft("Query.once",1,e,!1),Object(o.L)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch((function(){}));var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,(function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.K)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.K)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.K)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');dt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Q(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Gt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.K)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(St);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.K)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Nt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.K)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Wt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.startAt",0,2,arguments.length),ut("Query.startAt",1,e,this.path,!0),pt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.startAfter",0,2,arguments.length),ut("Query.startAfter",1,e,this.path,!1),pt("Query.startAfter",2,n,!0);var r=this.queryParams_.startAfter(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.endAt",0,2,arguments.length),ut("Query.endAt",1,e,this.path,!0),pt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.endBefore",0,2,arguments.length),ut("Query.endBefore",1,e,this.path,!1),pt("Query.endBefore",2,n,!0);var r=this.queryParams_.endBefore(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.K)("Query.equalTo",1,2,arguments.length),ut("Query.equalTo",1,t,this.path,!1),pt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.K)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.K)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=j(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.K)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.L)(t,3,r.cancel,!0),r.context=n,Object(o.M)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.o)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),te=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ee=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ne=function(t,e,n){return t&&"object"==typeof t?(Object(o.f)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?re(t[".sv"],e,n):"object"==typeof t[".sv"]?ie(t[".sv"],e):void Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},re=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.f)(!1,"Unexpected server value: "+t)}},ie=function(t,e,n){t.hasOwnProperty("increment")||Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.f)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.f)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},oe=function(t,e,n,r){return ae(e,new ee(n,t),r)},se=function(t,e,n){return ae(t,new te(e),n)};function ae(t,e,n){var r,i=t.getPriority().val(),o=ne(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new kt(a,Kt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new kt(o))),u.forEachChild(Nt,(function(t,i){var o=ae(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var ue,ce,le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Nt,(function(t,e){n.remember(new Q(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new Q(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),he=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),fe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.f)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),pe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=he.ACK_USER_WRITE,this.source=fe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Q(e));return new t(Q.Empty,n,this.revert)}return Object(o.f)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),de=function(){function t(t,e){void 0===e&&(ue||(ue=new Pt(k)),e=ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return R(e,(function(t,e){n=n.set(new Q(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Q.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Q(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(Q.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Q.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Q.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Q.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),ge=function(){function t(t,e){this.source=t,this.path=e,this.type=he.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Q.Empty):new t(this.source,this.path.popFront())},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=he.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Q.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ye=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=he.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Q(e));return n.isEmpty()?null:n.value?new ve(this.source,Q.Empty,n.value):new t(this.source,Q.Empty,n)}return Object(o.f)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),me=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new me(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new me(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new me(Ht.EMPTY_NODE,!1,!1),new me(Ht.EMPTY_NODE,!1,!1)),t}(),_e=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),we=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.f)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(_e.childRemovedChange(e,a)):Object(o.f)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(_e.childAddedChange(e,n)):s.trackChildChange(_e.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Nt,(function(t,r){e.hasChild(t)||n.trackChildChange(_e.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Nt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(_e.childChangedChange(e,r,i))}else n.trackChildChange(_e.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ht.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ee=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.f)(e===_e.CHILD_ADDED||e===_e.CHILD_CHANGED||e===_e.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===_e.CHILD_ADDED&&i===_e.CHILD_REMOVED)this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_ADDED)this.changeMap.delete(n);else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_CHANGED)this.changeMap.set(n,_e.childRemovedChange(n,r.oldSnap));else if(e===_e.CHILD_CHANGED&&i===_e.CHILD_ADDED)this.changeMap.set(n,_e.childAddedChange(n,t.snapshotNode));else{if(e!==_e.CHILD_CHANGED||i!==_e.CHILD_CHANGED)throw Object(o.g)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Te=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ie=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new me(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Oe=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Se=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.f)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.f)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Ee;if(n.type===he.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.f)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===he.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.f)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===he.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==he.LISTEN_COMPLETE)throw Object(o.g)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Oe(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(_e.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.f)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Ht?c:Ht.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(o.f)(1===e.getLength(),"Can't have a priority with additional path components");var p=s.getNode();u=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,u);a=null!=d?this.filter_.updatePriority(p,d):s.getNode()}else{var g=e.popFront(),v=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);v=null!=y?s.getNode().getImmediateChild(f).updateChild(g,y):s.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());a=null!=v?this.filter_.updateChild(s.getNode(),f,v,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,Te,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new Ie(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Ie(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):Ht.EMPTY_NODE}if(f.equals(p))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,p,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:de.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new Q(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new Q(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=de.Empty;return a.getNode().forEachChild(St,(function(t,e){u=u.set(new Q(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=de.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Te,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Ie(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.f)(h instanceof Ht,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),p=n.calcCompleteChild(f,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?this.filter_.updateChild(u,f,p,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Ht.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Q.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Ce=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===_e.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(_e.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,_e.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,_e.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,_e.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,_e.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,_e.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.g)("Should only compare child_ events.");var n=new Tt(t.childName,t.snapshotNode),r=new Tt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Ae=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new we(n.getIndex()),i=n.getNodeFilter();this.processor_=new Se(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Ht.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ht.EMPTY_NODE,s.getNode(),null),c=new me(a,o.isFullyInitialized(),r.filtersNodes()),l=new me(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new be(l,c),this.eventGenerator_=new Ce(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.f)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===he.MERGE&&null!==t.source.queryId&&(Object(o.f)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.f)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.f)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Nt,(function(t,e){n.push(_e.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(_e.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),ke=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(ce,"Reference.ts has not been loaded"),ce},set:function(t){Object(o.f)(!ce,"__referenceConstructor has already been defined"),ce=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.f)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Ht?(a=n.calcCompleteEventChildren(r),u=!1):(a=Ht.EMPTY_NODE,u=!1);var c=new be(new me(a,u,!1),new me(r,i,!1));s=new Ae(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var p,d=Object(i.e)(f.value,2),g=d[0];c=c.concat((p=d[1]).removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(g),p.getQuery().getQueryParams().loadsAllData()||u.push(p.getQuery()))}}catch(v){o={error:v}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(p=this.views.get(a))&&(c=c.concat(p.removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(a),p.getQuery().getQueryParams().loadsAllData()||u.push(p.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ne=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new de(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Q.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new de(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return R(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,de.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Q.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Nt,(function(e,n){t.push(new Tt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Tt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new de(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,s){".priority"===n?(Object(o.f)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):r=t(e.child(n),s,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(Q.Empty,this.writeTree_,t)},t.Empty=new t(new de(null)),t}(),je=function(){function t(){this.visibleWrites_=Ne.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new xe(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.f)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.f)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Object(o.f)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):R(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(Q.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||Ht.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(Q.Empty)?a.apply(n||Ht.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ht.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Nt,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Nt,(function(t,e){var r=i.childCompoundWrite(new Q(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.f)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var s=this.visibleWrites_.childCompoundWrite(i);return s.isEmpty()?r.getChild(e):s.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Q.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Q.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ne.Empty,i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?(u=Q.relativePath(n,a),r=r.addWrite(u,s.snap)):a.contains(n)&&(u=Q.relativePath(a,n),r=r.addWrite(Q.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.g)("WriteRecord should have .snap or .children");if(n.contains(a))u=Q.relativePath(n,a),r=r.addWrites(u,s.children);else if(a.contains(n))if((u=Q.relativePath(a,n)).isEmpty())r=r.addWrites(Q.Empty,s.children);else{var c=Object(o.G)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(Q.Empty,l)}}}}}return r},t}(),xe=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Re=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=de.Empty,this.pendingWriteTree_=new je,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ve(fe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=de.fromObject(e);return this.applyOperationToSyncPoints_(new ye(fe.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=de.Empty;return null!=n.snap?r=r.set(Q.Empty,!0):R(n.children,(function(t,e){r=r.set(new Q(t),e)})),this.applyOperationToSyncPoints_(new pe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ve(fe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=de.fromObject(e);return this.applyOperationToSyncPoints_(new ye(fe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ge(fe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Q.relativePath(s,e),c=new ve(fe.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Q.relativePath(s,e),c=de.fromObject(n),l=new ye(fe.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Q.relativePath(o,e),u=new ge(fe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Q.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(Q.Empty)):(u=new ke,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Ht.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(Q.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.f)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),p=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var d=u.viewForQuery(e);p=p.concat(this.setupListener_(e,d))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var g=p[d],v=g.getQuery(),y=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Q.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),R(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.f)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),R(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ht.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.f)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Q(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.f)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Q.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Q.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Q.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Q.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Q.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Pe=function(){function t(){this.rootNode_=Ht.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),De=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.k)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.m)(this.counters_)},t}(),Le=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new De),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Me=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&R(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Fe=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Me(t);var n=1e4+2e4*Math.random();G(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,(function(e,i){i>0&&Object(o.k)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),G(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ue=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Ve(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Ve=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();y&&_("event: "+e.toString()),W(n)}}},t.prototype.getPath=function(){return this.path_},t}(),qe=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.f)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.f)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),He=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(qe),Be=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.x)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(qe),Ke=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&W((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),ze="start",We="close",Ge=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Le.getCollection(e),this.urlFn=function(t){return e.connectionURL(X,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ke(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(o.z)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Qe((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===ze)n.id=s,n.password=a;else{if(o!==We)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&J.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.z)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.i)(e),r=x(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.z)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.J)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Qe=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.z)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=d(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(o.z)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),$e="";function Je(t){$e=t}var Ye=null;"undefined"!=typeof MozWebSocket?Ye=MozWebSocket:"undefined"!=typeof WebSocket&&(Ye=WebSocket);var Xe=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Le.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.z)()&&"undefined"!=typeof location&&location.hostname&&J.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Y,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.z)()){var r={headers:{"User-Agent":"Firebase/5/"+$e+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Ye(this.connURL,[],r)}else this.mySock=new Ye(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ye&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.D)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.f)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=x(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ze=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ge,Xe]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Xe&&Xe.isAvailable(),s=o&&!Xe.previouslyFailed();if(e.webSocketOnly&&(o||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Xe];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),tn=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Ze(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=G((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),G((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):G((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),en=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),nn=1e3,rn=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=nn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.z)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),He.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Be.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.J)(i)),Object(o.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.f)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.k)(t,"w")){var n=Object(o.G)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();I("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.C)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.J)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.J)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.f)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new tn(s,a.repoInfo_,a.applicationId_,n,r,i,(function(t){I(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&I(e),h())}))}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.u)(this.interruptReasons_)&&(this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return j(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Q(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.z)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+$e.replace(/\./g,"-")]=1,Object(o.x)()?t["framework.cordova"]=1:Object(o.A)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Be.getInstance().currentlyOnline();return Object(o.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(en),on=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.f)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.G)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.F)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.D)(u.responseText)}catch(e){I("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&I("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(en),sn="repo_interrupt",an=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new le,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Le.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new on(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.J)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new rn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=Le.getOrCreateReporter(this.repoInfo_,(function(){return new Fe(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new Pe,this.infoSyncTree_=new Re({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Re({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Q(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.E)(e,(function(t){return Kt(t)}));s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Kt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.E)(e,(function(t){return Kt(t)}));s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Kt(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;R(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new Q("/.info/"+t),r=Kt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then((function(n){var r=Kt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Qt(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){e.log_("get for query "+Object(o.J)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new Qt(r,t.getRef(),t.getQueryParams().getIndex()))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Kt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=se(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||I("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(R(e,(function(e,n){i=!1,s[e]=oe(t.child(e),Kt(n),r.serverSyncTree_,o)})),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||I("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),R(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new le;this.onDisconnect_.forEachTree(Q.Empty,(function(r,i){var o=oe(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(Q.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new le,this.eventQueue_.raiseEventsForChangedPath(Q.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Kt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Kt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.u)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&R(e,(function(e,n){var i=Kt(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(sn)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(sn)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Me(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);R(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&W((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new bn(this))},enumerable:!1,configurable:!0}),t}(),un=function(){function t(e){this.indexedFilter_=new we(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Tt(e,n))||(n=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ht.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ht.EMPTY_NODE);var i=this;return e.forEachChild(Nt,(function(t,e){i.matches(new Tt(t,e))||(r=r.updateImmediateChild(t,Ht.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),cn=function(){function t(t){this.rangedFilter_=new un(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Tt(e,n))||(n=Ht.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ht.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ht.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Ht.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.f)(u.numChildren()===this.limit_,"");var c=new Tt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name===e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:s(p,c);if(h&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(_e.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(_e.childRemovedChange(e,f));var g=u.updateImmediateChild(e,Ht.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(_e.childAddedChange(p.name,p.node)),g.updateImmediateChild(p.name,p.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(_e.childRemovedChange(l.name,l.node)),i.trackChildChange(_e.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Ht.EMPTY_NODE)):t},t}(),ln=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:C},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.startAfter=function(t,e){var n;n=null==e?C:function(t){if("2147483647"===t)return"-";var e=z(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return C;var o=wt.charAt(wt.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")}(e);var r=this.startAt(t,n);return r.startAfterSet_=!0,r},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.endBefore=function(t,e){var n;n=null==e?S:function(t){if("-2147483648"===t)return S;var e=z(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=wt.charAt(wt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}(e);var r=this.endAt(t,n);return r.endBeforeSet_=!0,r},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Nt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Nt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new we(this.getIndex()):this.hasLimit()?new cn(this):new un(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Nt?e=n.PRIORITY_INDEX:this.index_===Wt?e=n.VALUE_INDEX:this.index_===St?e=n.KEY_INDEX:(Object(o.f)(this.index_ instanceof Gt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.J)(e),this.startSet_&&(r[n.START_AT]=Object(o.J)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.J)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.J)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.J)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),hn=function(t){function e(e,n){if(!(e instanceof an))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,ln.DEFAULT,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.K)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.K)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Q||(null===this.path.getFront()?gt("Reference.child",1,t,!1):dt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.K)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.K)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.K)("Reference.set",1,2,arguments.length),vt("Reference.set",this.path),ut("Reference.set",1,t,this.path,!1),Object(o.L)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.K)("Reference.update",1,2,arguments.length),vt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("Reference.update",1,t,this.path,!1),Object(o.L)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.K)("Reference.setWithPriority",2,3,arguments.length),vt("Reference.setWithPriority",this.path),ut("Reference.setWithPriority",1,t,this.path,!1),ht("Reference.setWithPriority",2,e,!1),Object(o.L)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.K)("Reference.remove",0,1,arguments.length),vt("Reference.remove",this.path),Object(o.L)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.K)("Reference.transaction",1,3,arguments.length),vt("Reference.transaction",this.path),Object(o.L)("Reference.transaction",1,t,!1),Object(o.L)("Reference.transaction",2,e,!0),mt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new _t(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.K)("Reference.setPriority",1,2,arguments.length),vt("Reference.setPriority",this.path),ht("Reference.setPriority",1,t,!1),Object(o.L)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.K)("Reference.push",0,2,arguments.length),vt("Reference.push",this.path),ut("Reference.push",1,t,this.path,!0),Object(o.L)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Et(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),s},e.prototype.onDisconnect=function(){return vt("Reference.onDisconnect",this.path),new bt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Zt);Zt.__referenceConstructor=hn,ke.__referenceConstructor=hn;var fn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),pn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new fn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Q?e:new Q(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.G)(r.node_.children,i)||new fn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.f)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;R(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new Q(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.k)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),dn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});an.MAX_TRANSACTION_RETRIES_=25,an.prototype.transactionsInit_=function(){this.transactionQueueTree_=new pn},an.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new hn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:d(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Qt(a.currentInputSnapshot,new hn(this,a.path),Nt);a.onComplete(null,!1,l)}}else{ct("transaction failed: Data returned ",c,a.path),a.status=dn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var p=void 0;"object"==typeof c&&null!==c&&Object(o.k)(c,".priority")?(p=Object(o.G)(c,".priority"),Object(o.f)(at(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||Ht.EMPTY_NODE).getPriority().val(),p=p;var g=this.generateServerValues(),v=Kt(c,p),y=se(v,u,g);a.currentOutputSnapshotRaw=v,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,y,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},an.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ht.EMPTY_NODE},an.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.f)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===dn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},an.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.f)(c.status===dn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=dn.SENT,c.retryCount++;var l=Q.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=dn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new hn(n,e[s].path),c=new Qt(a,u,Nt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)W(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===dn.SENT_NEEDS_ABORT?dn.NEEDS_ABORT:dn.RUN;else for(I("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=dn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),a)},an.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},an.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===dn.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=Q.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.f)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===dn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===dn.RUN)if(a.retryCount>=an.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){ct("transaction failed: Data returned ",f,a.path);var p=Kt(f);"object"==typeof f&&null!=f&&Object(o.k)(f,".priority")||(p=p.updatePriority(h.getPriority()));var d=a.currentWriteId,g=this.generateServerValues(),v=se(p,h,g);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(d),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,v,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=dn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var y=new hn(this,t[s].path),m=new Qt(t[s].currentInputSnapshot,y,Nt);n.push(t[s].onComplete.bind(null,null,!1,m))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)W(n[s]);this.sendReadyTransactions_()}},an.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},an.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},an.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},an.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==dn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},an.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},an.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===dn.SENT_NEEDS_ABORT||(e[s].status===dn.SENT?(Object(o.f)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=dn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.f)(e[s].status===dn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)W(n[s])}};var gn,vn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';I(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),yn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),mn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return gn||(gn=new t),gn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Z(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new yn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=tt(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=tt(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new yn:new vn(t,e);return yt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||T("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.G)(this.repos_,t.app.name);e&&Object(o.G)(e,t.key)===t||T("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.G)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.G)(r,t.toURLString());return i&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new an(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),bn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return this.checkDeleted_("delete"),mn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof an||T("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new hn(this.repo_,Q.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?T("Cannot call useEmulator() after instance has already been initialized."):mn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.K)("database.ref",0,1,arguments.length),t instanceof hn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.K)(e,1,1,arguments.length);var n=tt(t,this.repo_.repoInfo_.nodeAdmin);yt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||T(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&T("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.K)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.K)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),_n=Object.freeze({__proto__:null,forceLongPolling:function(){Xe.forceDisallow(),Ge.forceAllow()},forceWebSockets:function(){Ge.forceDisallow()},isWebSocketsAvailable:function(){return Xe.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Je(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",(function(){return r}),"PRIVATE")),{instance:mn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),wn=rn;rn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},rn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var En=Object.freeze({__proto__:null,DataConnection:wn,RealTimeConnection:tn,hijackHash:function(t){var e=rn.prototype.put;return rn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){rn.prototype.put=e}},ConnectionTarget:Z,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){mn.getInstance().forceRestClient(t)}}),Tn=bn.ServerValue;!function(e){Je(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return mn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:hn,Query:Zt,Database:bn,DataSnapshot:Qt,enableLogging:b,INTERNAL:_n,ServerValue:Tn,TEST_ACCESS:En}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.0"),Object(o.z)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},"Iig+":function(t,e,n){"use strict";n.d(e,"a",(function(){return cc})),n.d(e,"b",(function(){return A})),n.d(e,"c",(function(){return ac})),n.d(e,"d",(function(){return lc})),n.d(e,"e",(function(){return yc})),n.d(e,"f",(function(){return Eu})),n.d(e,"g",(function(){return pc})),n.d(e,"h",(function(){return mc})),n.d(e,"i",(function(){return wc})),n.d(e,"j",(function(){return wu})),n.d(e,"k",(function(){return Cc})),n.d(e,"l",(function(){return hc})),n.d(e,"m",(function(){return Ra})),n.d(e,"n",(function(){return Oc})),n.d(e,"o",(function(){return sc})),n.d(e,"p",(function(){return Ic})),n.d(e,"q",(function(){return Ec})),n.d(e,"r",(function(){return bc})),n.d(e,"s",(function(){return Ac})),n.d(e,"t",(function(){return F}));var r=n("q/0M"),i=n("qOnz"),o=n("x7I3"),s=n("30Go"),a=new r.b("@firebase/firestore");function u(){return a.logLevel}function c(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(a.logLevel<=r.a.DEBUG){var i=e.map(f);a.debug.apply(a,Object(s.g)(["Firestore (8.2.4): "+t],i))}}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(a.logLevel<=r.a.ERROR){var i=e.map(f);a.error.apply(a,Object(s.g)(["Firestore (8.2.4): "+t],i))}}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(a.logLevel<=r.a.WARN){var i=e.map(f);a.warn.apply(a,Object(s.g)(["Firestore (8.2.4): "+t],i))}}function f(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function p(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.4) INTERNAL ASSERTION FAILED: "+t;throw l(e),new Error(e)}function d(t,e){t||p()}function g(t,e){return t}function v(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var y=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=v(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function m(t,e){return t<e?-1:t>e?1:0}function b(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function _(t){return t+"\0"}var w=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.i)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return m(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();w.h=new w("");var E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},T=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(s.c)(e,t),e}(Error),I=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(w.fromBase64String(e))}catch(e){throw new T(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(w.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),O=function(t){this._=t};function S(){if("undefined"==typeof Uint8Array)throw new T(E.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function C(){if("undefined"==typeof atob)throw new T(E.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.fromBase64String=function(t){return C(),new e(I.fromBase64String(t))},e.fromUint8Array=function(t){return S(),new e(I.fromUint8Array(t))},e.prototype.toBase64=function(){return C(),this._.toBase64()},e.prototype.toUint8Array=function(){return S(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(O),k=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},N=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),j=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();j.UNAUTHENTICATED=new j(null),j.P=new j("google-credentials-uid"),j.g=new j("first-party-uid");var x=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},R=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(j.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),P=function(){function t(t){var e=this;this.C=null,this.currentUser=j.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.F,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.F!==e?(c("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(d("string"==typeof n.accessToken),new x(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.O=function(){var t=this.auth&&this.auth.getUid();return d(null===t||"string"==typeof t),new j(t)},t}(),D=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=j.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),L=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new D(this.k,this.M))},t.prototype.S=function(t){t(j.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),M=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();M.U=-1;var F=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new T(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new T(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new T(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new T(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?m(this.nanoseconds,t.nanoseconds):m(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),U=function(){function t(t){this.timestamp=t}return t.W=function(e){return new t(e)},t.min=function(){return new t(new F(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),V=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&p(),void 0===n?n=t.length-e:n>t.length-e&&p(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return this.Y(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new T(E.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.at=function(){return new e([])},e}(V),H=/^[_a-zA-Z][_a-zA-Z0-9]*$/,B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return H.test(t)},e.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new T(E.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new T(E.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new T(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new T(E.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(V),K=function(){function t(t){this.path=t}return t.ft=function(e){return new t(q.ct(e))},t.dt=function(e){return new t(q.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===q.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return q.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new q(e.slice()))},t}();function z(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function W(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function G(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Q=function(){function t(t){this.fields=t,t.sort(B.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return b(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function J(t){if(d(!!t),"string"==typeof t){var e=0,n=$.exec(t);if(d(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Y(t.seconds),nanos:Y(t.nanos)}}function Y(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function X(t){return"string"==typeof t?w.fromBase64String(t):w.fromUint8Array(t)}function Z(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tt(t){var e=J(t.mapValue.fields.__local_write_time__.timestampValue);return new F(e.seconds,e.nanos)}function et(t){return null==t}function nt(t){return 0===t&&1/t==-1/0}function rt(t){return"number"==typeof t&&Number.isInteger(t)&&!nt(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function it(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Z(t)?4:10:p()}function ot(t,e){var n=it(t);if(n!==it(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tt(t).isEqual(tt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=J(t.timestampValue),r=J(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return X(t.bytesValue).isEqual(X(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Y(t.geoPointValue.latitude)===Y(e.geoPointValue.latitude)&&Y(t.geoPointValue.longitude)===Y(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Y(t.integerValue)===Y(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Y(t.doubleValue),r=Y(e.doubleValue);return n===r?nt(n)===nt(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return b(t.arrayValue.values||[],e.arrayValue.values||[],ot);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(z(n)!==z(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ot(n[i],r[i])))return!1;return!0}(t,e);default:return p()}}function st(t,e){return void 0!==(t.values||[]).find((function(t){return ot(t,e)}))}function at(t,e){var n=it(t),r=it(e);if(n!==r)return m(n,r);switch(n){case 0:return 0;case 1:return m(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Y(t.integerValue||t.doubleValue),r=Y(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ut(t.timestampValue,e.timestampValue);case 4:return ut(tt(t),tt(e));case 5:return m(t.stringValue,e.stringValue);case 6:return function(t,e){var n=X(t),r=X(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=m(n[i],r[i]);if(0!==o)return o}return m(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=m(Y(t.latitude),Y(e.latitude));return 0!==n?n:m(Y(t.longitude),Y(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=at(n[i],r[i]);if(o)return o}return m(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=m(r[s],o[s]);if(0!==a)return a;var u=at(n[r[s]],i[o[s]]);if(0!==u)return u}return m(r.length,o.length)}(t.mapValue,e.mapValue);default:throw p()}}function ut(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return m(t,e);var n=J(t),r=J(e),i=m(n.seconds,r.seconds);return 0!==i?i:m(n.nanos,r.nanos)}function ct(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=J(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?X(e.bytesValue).toBase64():"referenceValue"in e?K.dt(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):p();var n}(t)}function lt(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function ht(t){return!!t&&"integerValue"in t}function ft(t){return!!t&&"arrayValue"in t}function pt(t){return!!t&&"nullValue"in t}function dt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gt(t){return!!t&&"mapValue"in t}var vt=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!gt(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return ot(this.proto,t.proto)},t}(),yt=function(){function t(t){void 0===t&&(t=vt.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===it(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(B.at(),this.Rt);return null!=t?new vt(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=gt(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function mt(t){var e=[];return W(t.fields||{},(function(t,n){var r=new B([t]);if(gt(n)){var i=mt(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new Q(e)}var bt=function(t,e){this.key=t,this.version=e},_t=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(s.c)(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(bt),wt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(s.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(bt),Et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(bt),Tt=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function It(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Tt(t,e,n,r,i,o,s)}function Ot(t){var e=g(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+ct(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),et(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ft(e.startAt)),e.endAt&&(n+="|ub:",n+=Ft(e.endAt)),e.St=n}return e.St}function St(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Vt(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!ot(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ht(t.startAt,e.startAt)&&Ht(t.endAt,e.endAt)}function Ct(t){return K.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var At=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(s.c)(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new kt(t,n,r):"array-contains"===n?new Rt(t,r):"in"===n?new Pt(t,r):"not-in"===n?new Dt(t,r):"array-contains-any"===n?new Lt(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new Nt(t,n):new jt(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(at(e,this.value)):null!==e&&it(this.value)===it(e)&&this.Ct(at(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return p()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),kt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=K.dt(r.referenceValue),i}return Object(s.c)(e,t),e.prototype.matches=function(t){var e=K.J(t.key,this.key);return this.Ct(e)},e}(At),Nt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=xt(0,n),r}return Object(s.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(At),jt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=xt(0,n),r}return Object(s.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(At);function xt(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return K.dt(t.referenceValue)}))}var Rt=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(s.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ft(e)&&st(e.arrayValue,this.value)},e}(At),Pt=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(s.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&st(this.value.arrayValue,e)},e}(At),Dt=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(s.c)(e,t),e.prototype.matches=function(t){if(st(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!st(this.value.arrayValue,e)},e}(At),Lt=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(s.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ft(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return st(e.value.arrayValue,t)}))},e}(At),Mt=function(t,e){this.position=t,this.before=e};function Ft(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ct(t)})).join(",")}var Ut=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Vt(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function qt(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?K.J(K.dt(s.referenceValue),n.key):at(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ht(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ot(t.position[n],e.position[n]))return!1;return!0}var Bt=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ft=null,this.Ot=null};function Kt(t,e,n,r,i,o,s,a){return new Bt(t,e,n,r,i,o,s,a)}function zt(t){return new Bt(t)}function Wt(t){return!et(t.limit)&&"F"===t.limitType}function Gt(t){return!et(t.limit)&&"L"===t.limitType}function Qt(t){return t.Nt.length>0?t.Nt[0].field:null}function $t(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function Jt(t){return null!==t.collectionGroup}function Yt(t){var e=g(t);if(null===e.Ft){e.Ft=[];var n=$t(e),r=Qt(e);if(null!==n&&null===r)n.ht()||e.Ft.push(new Ut(n)),e.Ft.push(new Ut(B.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var a=s[o];e.Ft.push(a),a.field.ht()&&(i=!0)}if(!i){var u=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ft.push(new Ut(B.lt(),u))}}}return e.Ft}function Xt(t){var e=g(t);if(!e.Ot)if("F"===e.limitType)e.Ot=It(e.path,e.collectionGroup,Yt(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Yt(e);r<i.length;r++){var o=i[r];n.push(new Ut(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Mt(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Mt(e.startAt.position,!e.startAt.before):null;e.Ot=It(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.Ot}function Zt(t,e,n){return new Bt(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function te(t,e){return St(Xt(t),Xt(e))&&t.limitType===e.limitType}function ee(t){return Ot(Xt(t))+"|lt:"+t.limitType}function ne(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+ct(e.value);var e})).join(", ")+"]"),et(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ft(t.startAt)),t.endAt&&(e+=", endAt: "+Ft(t.endAt)),"Target("+e+")"}(Xt(t))+"; limitType="+t.limitType+")"}function re(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):K.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!qt(t.startAt,Yt(t),e)||t.endAt&&qt(t.endAt,Yt(t),e))}(t,e)}function ie(t){return function(e,n){for(var r=!1,i=0,o=Yt(t);i<o.length;i++){var s=o[i],a=oe(s,e,n);if(0!==a)return a;r=r||s.field.ht()}return 0}}function oe(t,e,n){var r=t.field.ht()?K.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?at(r,i):p()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return p()}}var se=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=U.min()),void 0===o&&(o=U.min()),void 0===s&&(s=w.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function ae(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nt(e)?"-0":e}}function ue(t){return{integerValue:""+t}}function ce(t,e){return rt(e)?ue(e):ae(t,e)}var le=function(){this.Ut=void 0};function he(t,e,n){return t instanceof de?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ge?ve(t,e):t instanceof ye?me(t,e):function(t,e){var n=pe(t,e),r=_e(n)+_e(t.Qt);return ht(n)&&ht(t.Qt)?ue(r):ae(t.Kt,r)}(t,e)}function fe(t,e,n){return t instanceof ge?ve(t,e):t instanceof ye?me(t,e):n}function pe(t,e){return t instanceof be?ht(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var de=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e}(le),ge=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(s.c)(e,t),e}(le);function ve(t,e){for(var n=we(e),r=function(t){n.some((function(e){return ot(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ye=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(s.c)(e,t),e}(le);function me(t,e){for(var n=we(e),r=function(t){n=n.filter((function(e){return!ot(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var be=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return Object(s.c)(e,t),e}(le);function _e(t){return Y(t.integerValue||t.doubleValue)}function we(t){return ft(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ee=function(t,e){this.field=t,this.transform=e},Te=function(t,e){this.version=t,this.transformResults=e},Ie=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Wt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Oe(t,e){return void 0!==t.updateTime?e instanceof _t&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof _t}var Se=function(){};function Ce(t,e,n){return t instanceof xe?function(t,e,n){var r=t.value;if(n.transformResults){var i=De(t.fieldTransforms,e,n.transformResults);r=Me(t.fieldTransforms,r,i)}return new _t(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Re?function(t,e,n){if(!Oe(t.Gt,e))return new Et(t.key,n.version);var r=Pe(t,e,n.transformResults?De(t.fieldTransforms,e,n.transformResults):[]);return new _t(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new wt(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Ae(t,e,n,r){return t instanceof xe?function(t,e,n,r){if(!Oe(t.Gt,e))return e;var i=t.value,o=Le(t.fieldTransforms,n,e);i=Me(t.fieldTransforms,i,o);var s=je(e);return new _t(t.key,s,i,{bt:!0})}(t,e,r):t instanceof Re?function(t,e,n,r){if(!Oe(t.Gt,e))return e;var i=je(e),o=Pe(t,e,Le(t.fieldTransforms,n,e));return new _t(t.key,i,o,{bt:!0})}(t,e,r):function(t,e){return Oe(t.Gt,e)?new wt(t.key,U.min()):e}(t,e)}function ke(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof _t?e.field(o.field):void 0,a=pe(o.transform,s||null);null!=a&&(n=null==n?(new yt).set(o.field,a):n.set(o.field,a))}return n?n.yt():null}(t.fieldTransforms,e)}function Ne(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&b(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ge&&e instanceof ge||t instanceof ye&&e instanceof ye?b(t.elements,e.elements,ot):t instanceof be&&e instanceof be?ot(t.Qt,e.Qt):t instanceof de&&e instanceof de}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function je(t){return t instanceof _t?t.version:U.min()}var xe=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return Object(s.c)(e,t),e}(Se),Re=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return Object(s.c)(e,t),e}(Se);function Pe(t,e,n){var r;return r=function(t,e){var n=new yt(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof _t?e.data():vt.empty()),Me(t.fieldTransforms,r,n)}function De(t,e,n){var r=[];d(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof _t&&(a=e.field(o.field)),r.push(fe(s,a,n[i]))}return r}function Le(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof _t&&(c=n.field(a.field)),i.push(he(u,c,e))}return i}function Me(t,e,n){for(var r=new yt(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.yt()}var Fe,Ue,Ve=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return Object(s.c)(e,t),e}(Se),qe=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return Object(s.c)(e,t),e}(Se),He=function(t){this.count=t};function Be(t){switch(t){case E.OK:return p();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0;default:return p()}}function Ke(t){if(void 0===t)return l("GRPC error has no .code"),E.UNKNOWN;switch(t){case Fe.OK:return E.OK;case Fe.CANCELLED:return E.CANCELLED;case Fe.UNKNOWN:return E.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return E.INTERNAL;case Fe.UNAVAILABLE:return E.UNAVAILABLE;case Fe.UNAUTHENTICATED:return E.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case Fe.NOT_FOUND:return E.NOT_FOUND;case Fe.ALREADY_EXISTS:return E.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return E.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case Fe.ABORTED:return E.ABORTED;case Fe.OUT_OF_RANGE:return E.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return E.UNIMPLEMENTED;case Fe.DATA_LOSS:return E.DATA_LOSS;default:return p()}}(Ue=Fe||(Fe={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";var ze=function(){function t(t,e){this.J=t,this.root=e||Ge.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,Ge.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,Ge.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new We(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new We(this.root,t,this.J,!1)},t.prototype.se=function(){return new We(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new We(this.root,t,this.J,!0)},t}(),We=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),Ge=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw p();if(this.right._e())throw p();var t=this.left.me();if(t!==this.right.me())throw p();return t+(this._e()?0:1)},t}();Ge.EMPTY=null,Ge.RED=!0,Ge.Jt=!1,Ge.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw p()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw p()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw p()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw p()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw p()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new Ge(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var Qe=function(){function t(t){this.J=t,this.data=new ze(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new $e(this.data.ee())},t.prototype.ne=function(t){return new $e(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),$e=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),Je=new ze(K.J);function Ye(){return Je}function Xe(){return Ye()}var Ze=new ze(K.J);function tn(){return Ze}var en=new ze(K.J);function nn(){return en}var rn=new Qe(K.J);function on(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=rn,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var sn=new Qe(m);function an(){return sn}var un=function(){function t(t){this.J=t?function(e,n){return t(e,n)||K.J(e.key,n.key)}:function(t,e){return K.J(t.key,e.key)},this.Ve=tn(),this.pe=new ze(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),cn=function(){function t(){this.ve=new ze(K.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):p():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),ln=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=a}return t.Fe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,un.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&te(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),hn=function(){function t(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,fn.Be(e,n)),new t(U.min(),r,an(),Ye(),on())},t}(),fn=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(w.h,n,on(),on(),on())},t}(),pn=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},dn=function(t,e){this.targetId=t,this.Ge=e},gn=function(t,e,n,r){void 0===n&&(n=w.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},vn=function(){function t(){this.ze=0,this.He=bn(),this.Je=w.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=on(),e=on(),n=on();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:p()}})),new fn(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=bn()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),yn=function(){function t(t){this.hn=t,this.ln=new Map,this._n=Ye(),this.fn=mn(),this.dn=new Qe(m)}return t.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof _t?this.En(r,t.je):t.je instanceof wt&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Tn(r=o[i],t.key,t.je)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:p()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(Ct(i))if(0===n){var o=new K(i.path);this.Tn(e,o,new wt(o,U.min()))}else d(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&Ct(o.target)){var s=new K(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new wt(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=on();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new hn(t,n,this.dn,this._n,r);return this._n=Ye(),this.fn=mn(),this.dn=new Qe(m),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new vn,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new Qe(m),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||c("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new vn),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function mn(){return new ze(K.J)}function bn(){return new ze(K.J)}var _n={asc:"ASCENDING",desc:"DESCENDING"},wn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},En=function(t,e){this.T=t,this.qt=e};function Tn(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function In(t,e){return t.qt?e.toBase64():e.toUint8Array()}function On(t,e){return Tn(t,e.G())}function Sn(t){return d(!!t),U.W(function(t){var e=J(t);return new F(e.seconds,e.nanos)}(t))}function Cn(t,e){return function(t){return new q(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function An(t){var e=q.ct(t);return d(Yn(e)),e}function kn(t,e){return Cn(t.T,e.path)}function Nn(t,e){var n=An(e);if(n.get(1)!==t.T.projectId)throw new T(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new T(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new K(Pn(n))}function jn(t,e){return Cn(t.T,e)}function xn(t){var e=An(t);return 4===e.length?q.at():Pn(e)}function Rn(t){return new q(["projects",t.T.projectId,"databases",t.T.database]).ot()}function Pn(t){return d(t.length>4&&"documents"===t.get(4)),t.X(5)}function Dn(t,e,n){return{name:kn(t,e),fields:n.proto.mapValue.fields}}function Ln(t,e,n){var r=Nn(t,e.name),i=Sn(e.updateTime),o=new vt({mapValue:{fields:e.fields}});return new _t(r,i,o,{hasCommittedMutations:!!n})}function Mn(t,e){var n;if(e instanceof xe)n={update:Dn(t,e.key,e.value)};else if(e instanceof Ve)n={delete:kn(t,e.key)};else if(e instanceof Re)n={update:Dn(t,e.key,e.data),updateMask:Jn(e.zt)};else{if(!(e instanceof qe))return p();n={verify:kn(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof de)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof ge)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof ye)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof be)return{fieldPath:e.field.ot(),increment:n.Qt};throw p()}(0,t)}))),e.Gt.jt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:On(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:p()}(t,e.Gt)),n}function Fn(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ie.updateTime(Sn(t.updateTime)):void 0!==t.exists?Ie.exists(t.exists):Ie.Wt()}(e.currentDocument):Ie.Wt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(d("REQUEST_TIME"===e.setToServerValue),n=new de):"appendMissingElements"in e?n=new ge(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new ye(e.removeAllFromArray.values||[]):"increment"in e?n=new be(t,e.increment):p();var r=B._t(e.fieldPath);return new Ee(r,n)}(t,e)})):[];if(e.update){var i=Nn(t,e.update.name),o=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Q((t.fieldPaths||[]).map((function(t){return B._t(t)})))}(e.updateMask);return new Re(i,o,s,n,r)}return new xe(i,o,n,r)}if(e.delete){var a=Nn(t,e.delete);return new Ve(a,n)}if(e.verify){var u=Nn(t,e.verify);return new qe(u,n)}return p()}function Un(t,e){return{documents:[jn(t,e.path)]}}function Vn(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=jn(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=jn(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(dt(t.value))return{unaryFilter:{field:Wn(t.field),op:"IS_NAN"}};if(pt(t.value))return{unaryFilter:{field:Wn(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(dt(t.value))return{unaryFilter:{field:Wn(t.field),op:"IS_NOT_NAN"}};if(pt(t.value))return{unaryFilter:{field:Wn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wn(t.field),op:zn(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Wn(t.field),direction:Kn(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||et(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Hn(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Hn(e.endAt)),n}function qn(t){var e=xn(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){d(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[$n(e)]:void 0!==e.fieldFilter?[Qn(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):p():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Ut(Gn(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return et(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Bn(n.startAt));var l=null;return n.endAt&&(l=Bn(n.endAt)),Kt(e,i,a,s,u,"F",c,l)}function Hn(t){return{before:t.before,values:t.position}}function Bn(t){return new Mt(t.values||[],!!t.before)}function Kn(t){return _n[t]}function zn(t){return wn[t]}function Wn(t){return{fieldPath:t.ot()}}function Gn(t){return B._t(t.fieldPath)}function Qn(t){return At.create(Gn(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return p()}}(t.fieldFilter.op),t.fieldFilter.value)}function $n(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Gn(t.unaryFilter.field);return At.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Gn(t.unaryFilter.field);return At.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Gn(t.unaryFilter.field);return At.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Gn(t.unaryFilter.field);return At.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return p()}}function Jn(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function Yn(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Xn=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Zn=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Fn&&p(),this.Fn=!0,this.Nn?this.error?this.On(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.On(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.On=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),tr=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new Xn,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new rr(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=ur(e.target.error);n.qn.reject(new rr(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new rr(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(c("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new or(e)},t}(),er=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(Object(i.p)())&&l("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return c("SimpleDb","Removing database:",t),sr(window.indexedDB.deleteDatabase(t)).Mn()},t.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(t.jn())return!0;var e=Object(i.p)(),n=t.Kn(e),r=0<n&&n<10,o=t.Gn(e),s=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.jn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return Object(s.b)(this,void 0,void 0,(function(){var e,n=this;return Object(s.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(c("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new rr(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new T(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new rr(t,n))},i.onupgradeneeded=function(t){c("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Qn.Yn(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){c("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}}))}))},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(s.b)(this,void 0,void 0,(function(){var i,o,a,u,l;return Object(s.d)(this,(function(h){switch(h.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,l,h,f;return Object(s.d)(this,(function(s){switch(s.label){case 0:++o,s.label=1;case 1:return s.trys.push([1,4,,5]),[4,u.Jn(t)];case 2:return u.db=s.sent(),e=tr.open(u.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),Zn.reject(t)})).Mn(),l={},a.catch((function(){})),[4,e.Un];case 3:return[2,(l.value=(s.sent(),a),l)];case 4:return c("SimpleDb","Transaction failed with error:",(h=s.sent()).message,"Retrying:",f="FirebaseError"!==h.name&&o<3),u.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,a()];case 2:if("object"==typeof(l=h.sent()))return[2,l.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),nr=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return sr(this.ts.delete())},t}(),rr=function(t){function e(e,n){var r=this;return(r=t.call(this,E.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(s.c)(e,t),e}(T);function ir(t){return"IndexedDbTransactionError"===t.name}var or=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(c("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(c("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),sr(n)},t.prototype.add=function(t){return c("SimpleDb","ADD",this.store.name,t,t),sr(this.store.add(t))},t.prototype.get=function(t){var e=this;return sr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),c("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return c("SimpleDb","DELETE",this.store.name,t),sr(this.store.delete(t))},t.prototype.count=function(){return c("SimpleDb","COUNT",this.store.name),sr(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){c("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new Zn((function(n,r){e.onerror=function(t){var e=ur(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new Zn((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new nr(i),s=e(i.primaryKey,i.value,o);if(s instanceof Zn){var a=s.catch((function(t){return o.done(),Zn.reject(t)}));n.push(a)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return Zn.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function sr(t){return new Zn((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ur(t.target.error);n(e)}}))}var ar=!1;function ur(t){var e=er.Kn(Object(i.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new T("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ar||(ar=!0,setTimeout((function(){throw r}),0)),r}}return t}var cr=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new Xn,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new T(E.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function lr(t,e){if(l("AsyncQueue",e+": "+t),ir(t))return new T(E.UNAVAILABLE,e+": "+t);throw t}var hr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fr=function(){function t(){this.gs=[]}return t.prototype.Vs=function(t){this.gs.push(t)},t.prototype.ps=function(){this.gs.forEach((function(t){return t()}))},t}();function pr(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=gr(e)),e=dr(t.get(n),e);return gr(e)}function dr(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function gr(t){return t+"\x01\x01"}function vr(t){var e=t.length;if(d(e>=2),2===e)return d("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),q.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&p(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:p()}o=s+2}return new q(r)}var yr=function(t,e){this.seconds=t,this.nanoseconds=e},mr=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};mr.store="owner",mr.key="owner";var br=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};br.store="mutationQueues",br.keyPath="userId";var _r=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};_r.store="mutations",_r.keyPath="batchId",_r.userMutationsIndex="userMutationsIndex",_r.userMutationsKeyPath=["userId","batchId"];var wr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,pr(e)]},t.key=function(t,e,n){return[t,pr(e),n]},t}();wr.store="documentMutations",wr.PLACEHOLDER=new wr;var Er=function(t,e){this.path=t,this.readTime=e},Tr=function(t,e){this.path=t,this.version=e},Ir=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Ir.store="remoteDocuments",Ir.readTimeIndex="readTimeIndex",Ir.readTimeIndexPath="readTime",Ir.collectionReadTimeIndex="collectionReadTimeIndex",Ir.collectionReadTimeIndexPath=["parentPath","readTime"];var Or=function(t){this.byteSize=t};Or.store="remoteDocumentGlobal",Or.key="remoteDocumentGlobalKey";var Sr=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Sr.store="targets",Sr.keyPath="targetId",Sr.queryTargetsIndexName="queryTargetsIndex",Sr.queryTargetsKeyPath=["canonicalId","targetId"];var Cr=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Cr.store="targetDocuments",Cr.keyPath=["targetId","path"],Cr.documentTargetsIndex="documentTargetsIndex",Cr.documentTargetsKeyPath=["path","targetId"];var Ar=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ar.key="targetGlobalKey",Ar.store="targetGlobal";var kr=function(t,e){this.collectionId=t,this.parent=e};kr.store="collectionParents",kr.keyPath=["collectionId","parent"];var Nr=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Nr.store="clientMetadata",Nr.keyPath="clientId";var jr=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};jr.store="bundles",jr.keyPath="bundleId";var xr=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};xr.store="namedQueries",xr.keyPath="name";var Rr=Object(s.g)(Object(s.g)(Object(s.g)(Object(s.g)([br.store,_r.store,wr.store,Ir.store,Sr.store,mr.store,Ar.store,Cr.store],[Nr.store]),[Or.store]),[kr.store]),[jr.store,xr.store]),Pr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).bs=e,r.vs=n,r}return Object(s.c)(e,t),e}(fr);function Dr(t,e){var n=g(t);return er.Hn(n.bs,e)}var Lr=function(){function t(t,e,n,r){this.batchId=t,this.Ss=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ds=function(t,e,n){for(var r=n.Cs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ce(o,e,r[i]))}return e},t.prototype.xs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Ae(s,e,0,this.Ss));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Ae(s,e,0,this.Ss))}return e},t.prototype.Ns=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.xs(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),on())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&b(this.mutations,t.mutations,(function(t,e){return Ne(t,e)}))&&b(this.baseMutations,t.baseMutations,(function(t,e){return Ne(t,e)}))},t}(),Mr=function(){function t(t,e,n,r){this.batch=t,this.Fs=e,this.Cs=n,this.Os=r}return t.from=function(e,n,r){d(e.mutations.length===r.length);for(var i=nn(),o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Fr=function(t){this.ks=t};function Ur(t,e){if(e.document)return Ln(t.ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=K.Tt(e.noDocument.path),r=Kr(e.noDocument.readTime);return new wt(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=K.Tt(e.unknownDocument.path);return r=Kr(e.unknownDocument.version),new Et(i,r)}return p()}function Vr(t,e,n){var r=qr(n),i=e.key.path.Z().rt();if(e instanceof _t){var o=function(t,e){return{name:kn(t,e.key),fields:e.vt().mapValue.fields,updateTime:Tn(t,e.version.G())}}(t.ks,e),s=e.hasCommittedMutations;return new Ir(null,null,o,s,r,i)}if(e instanceof wt){var a=e.key.path.rt(),u=Br(e.version);return s=e.hasCommittedMutations,new Ir(null,new Er(a,u),null,s,r,i)}if(e instanceof Et){var c=e.key.path.rt(),l=Br(e.version);return new Ir(new Tr(c,l),null,null,!0,r,i)}return p()}function qr(t){var e=t.G();return[e.seconds,e.nanoseconds]}function Hr(t){var e=new F(t[0],t[1]);return U.W(e)}function Br(t){var e=t.G();return new yr(e.seconds,e.nanoseconds)}function Kr(t){var e=new F(t.seconds,t.nanoseconds);return U.W(e)}function zr(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Fn(t.ks,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return Fn(t.ks,e)})),s=F.fromMillis(e.localWriteTimeMs);return new Lr(e.batchId,s,n,o)}function Wr(t){var e,n,r=Kr(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Kr(t.lastLimboFreeSnapshotVersion):U.min();return void 0!==t.query.documents?(d(1===(n=t.query).documents.length),e=Xt(zt(xn(n.documents[0])))):e=function(t){return Xt(qn(t))}(t.query),new se(e,t.targetId,0,t.lastListenSequenceNumber,r,i,w.fromBase64String(t.resumeToken))}function Gr(t,e){var n,r=Br(e.Mt),i=Br(e.lastLimboFreeSnapshotVersion);n=Ct(e.target)?Un(t.ks,e.target):Vn(t.ks,e.target);var o=e.resumeToken.toBase64();return new Sr(e.targetId,Ot(e.target),r,o,e.sequenceNumber,i,n)}function Qr(t){var e=qn({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Zt(e,e.limit,"L"):e}var $r=function(){function t(){}return t.prototype.Ms=function(t,e){return Jr(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Kr(e.createTime),version:e.version};var e}))},t.prototype.Ls=function(t,e){return Jr(t).put({bundleId:(n=e).id,createTime:Br(Sn(n.createTime)),version:n.version});var n},t.prototype.$s=function(t,e){return Yr(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Qr(e.bundledQuery),readTime:Kr(e.readTime)};var e}))},t.prototype.Bs=function(t,e){return Yr(t).put(function(t){return{name:t.name,readTime:Br(Sn(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Jr(t){return Dr(t,jr.store)}function Yr(t){return Dr(t,xr.store)}var Xr=function(){function t(){this.qs=new Zr}return t.prototype.Us=function(t,e){return this.qs.add(e),Zn.resolve()},t.prototype.Qs=function(t,e){return Zn.resolve(this.qs.getEntries(e))},t}(),Zr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new Qe(q.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Qe(q.J)).rt()},t}(),ti=function(){function t(){this.Ks=new Zr}return t.prototype.Us=function(t,e){var n=this;if(!this.Ks.has(e)){var r=e.et(),i=e.Z();t.Vs((function(){n.Ks.add(e)}));var o={collectionId:r,parent:pr(i)};return ei(t).put(o)}return Zn.resolve()},t.prototype.Qs=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[_(e),""],!1,!0);return ei(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(vr(o.parent))}return n}))},t}();function ei(t){return Dr(t,kr.store)}var ni={Ws:!1,js:0,Gs:0,zs:0},ri=function(){function t(t,e,n){this.Hs=t,this.Js=e,this.Ys=n}return t.Xs=function(e){return new t(e,t.Zs,t.ti)},t}();function ii(t){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(e){if(t.code!==E.FAILED_PRECONDITION||t.message!==hr)throw t;return c("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}ri.Zs=10,ri.ti=1e3,ri.ei=new ri(41943040,ri.Zs,ri.ti),ri.ni=new ri(-1,0,0);var oi=function(){function t(t,e){this.si=t,this.ii=e,this.ri={}}return t.prototype.get=function(t){var e=this.si(t),n=this.ri[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.ii(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.si(t),r=this.ri[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ii(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ri[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.si(t),n=this.ri[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ii(n[r][0],t))return 1===n.length?delete this.ri[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){W(this.ri,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.nt=function(){return G(this.ri)},t}(),si=function(){function t(){this.oi=new oi((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ci=!1}return t.prototype.ai=function(t){var e=this.oi.get(t);return e?e.readTime:U.min()},t.prototype.ui=function(t,e){this.hi(),this.oi.set(t.key,{li:t,readTime:e})},t.prototype._i=function(t,e){void 0===e&&(e=null),this.hi(),this.oi.set(t,{li:null,readTime:e})},t.prototype.fi=function(t,e){this.hi();var n=this.oi.get(e);return void 0!==n?Zn.resolve(n.li):this.di(t,e)},t.prototype.getEntries=function(t,e){return this.wi(t,e)},t.prototype.apply=function(t){return this.hi(),this.ci=!0,this.Ei(t)},t.prototype.hi=function(){},t}();function ai(t,e,n){var r=t.store(_r.store),i=t.store(wr.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ls({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){d(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=wr.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Zn.$n(o).next((function(){return c}))}function ui(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw p();e=t.noDocument}return JSON.stringify(e).length}var ci=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ti=n,this.Ii=r,this.mi={}}return t.Ai=function(e,n,r,i){return d(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Ri=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hi(t).ls({index:_r.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Pi=function(t,e,n,r){var i=this,o=fi(t),s=hi(t);return s.add({}).next((function(a){d("number"==typeof a);for(var u=new Lr(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Mn(t.ks,e)})),i=n.mutations.map((function(e){return Mn(t.ks,e)}));return new _r(e,n.batchId,n.Ss.toMillis(),r,i)}(i.Kt,i.userId,u),l=[],h=new Qe((function(t,e){return m(t.ot(),e.ot())})),f=0,p=r;f<p.length;f++){var g=p[f],v=wr.key(i.userId,g.key.path,a);h=h.add(g.key.path.Z()),l.push(s.put(c)),l.push(o.put(v,wr.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ti.Us(t,e))})),t.Vs((function(){i.mi[a]=u.keys()})),Zn.$n(l).next((function(){return u}))}))},t.prototype.yi=function(t,e){var n=this;return hi(t).get(e).next((function(t){return t?(d(t.userId===n.userId),zr(n.Kt,t)):null}))},t.prototype.gi=function(t,e){var n=this;return this.mi[e]?Zn.resolve(this.mi[e]):this.yi(t,e).next((function(t){if(t){var r=t.keys();return n.mi[e]=r,r}return null}))},t.prototype.Vi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return hi(t).ls({index:_r.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(d(e.batchId>=r),o=zr(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.pi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return hi(t).ls({index:_r.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.bi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hi(t).os(_r.userMutationsIndex,n).next((function(t){return t.map((function(t){return zr(e.Kt,t)}))}))},t.prototype.vi=function(t,e){var n=this,r=wr.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return fi(t).ls({range:i},(function(r,i,s){var a=r[0],u=r[2],c=vr(r[1]);if(a===n.userId&&e.path.isEqual(c))return hi(t).get(u).next((function(t){if(!t)throw p();d(t.userId===n.userId),o.push(zr(n.Kt,t))}));s.done()})).next((function(){return o}))},t.prototype.Si=function(t,e){var n=this,r=new Qe(m),i=[];return e.forEach((function(e){var o=wr.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=fi(t).ls({range:s},(function(t,i,o){var s=t[0],a=t[2],u=vr(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Zn.$n(i).next((function(){return n.Di(t,r)}))},t.prototype.Ci=function(t,e){var n=this,r=e.path,i=r.length+1,o=wr.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Qe(m);return fi(t).ls({range:s},(function(t,e,o){var s=t[0],u=t[2],c=vr(t[1]);s===n.userId&&r.st(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Di(t,a)}))},t.prototype.Di=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(hi(t).get(e).next((function(t){if(null===t)throw p();d(t.userId===n.userId),r.push(zr(n.Kt,t))})))})),Zn.$n(i).next((function(){return r}))},t.prototype.xi=function(t,e){var n=this;return ai(t.bs,this.userId,e).next((function(r){return t.Vs((function(){n.Ni(e.batchId)})),Zn.forEach(r,(function(e){return n.Ii.Fi(t,e)}))}))},t.prototype.Ni=function(t){delete this.mi[t]},t.prototype.Oi=function(t){var e=this;return this.Ri(t).next((function(n){if(!n)return Zn.resolve();var r=IDBKeyRange.lowerBound(wr.prefixForUser(e.userId)),i=[];return fi(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=vr(t[1]);i.push(o)}else r.done()})).next((function(){d(0===i.length)}))}))},t.prototype.ki=function(t,e){return li(t,this.userId,e)},t.prototype.Mi=function(t){var e=this;return pi(t).get(this.userId).next((function(t){return t||new br(e.userId,-1,"")}))},t}();function li(t,e,n){var r=wr.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return fi(t).ls({range:o,hs:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function hi(t){return Dr(t,_r.store)}function fi(t){return Dr(t,wr.store)}function pi(t){return Dr(t,br.store)}var di=function(){function t(t){this.Li=t}return t.prototype.next=function(){return this.Li+=2,this.Li},t.$i=function(){return new t(0)},t.Bi=function(){return new t(-1)},t}(),gi=function(){function t(t,e){this.Ii=t,this.Kt=e}return t.prototype.qi=function(t){var e=this;return this.Ui(t).next((function(n){var r=new di(n.highestTargetId);return n.highestTargetId=r.next(),e.Qi(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ki=function(t){return this.Ui(t).next((function(t){return U.W(new F(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Wi=function(t){return this.Ui(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.ji=function(t,e,n){var r=this;return this.Ui(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Qi(t,i)}))},t.prototype.Gi=function(t,e){var n=this;return this.zi(t,e).next((function(){return n.Ui(t).next((function(r){return r.targetCount+=1,n.Hi(e,r),n.Qi(t,r)}))}))},t.prototype.Ji=function(t,e){return this.zi(t,e)},t.prototype.Yi=function(t,e){var n=this;return this.Xi(t,e.targetId).next((function(){return vi(t).delete(e.targetId)})).next((function(){return n.Ui(t)})).next((function(e){return d(e.targetCount>0),e.targetCount-=1,n.Qi(t,e)}))},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return vi(t).ls((function(s,a){var u=Wr(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Yi(t,u)))})).next((function(){return Zn.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return vi(t).ls((function(t,n){var r=Wr(n);e(r)}))},t.prototype.Ui=function(t){return yi(t).get(Ar.key).next((function(t){return d(null!==t),t}))},t.prototype.Qi=function(t,e){return yi(t).put(Ar.key,e)},t.prototype.zi=function(t,e){return vi(t).put(Gr(this.Kt,e))},t.prototype.Hi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tr=function(t){return this.Ui(t).next((function(t){return t.targetCount}))},t.prototype.er=function(t,e){var n=Ot(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return vi(t).ls({range:r,index:Sr.queryTargetsIndexName},(function(t,n,r){var o=Wr(n);St(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.nr=function(t,e,n){var r=this,i=[],o=mi(t);return e.forEach((function(e){var s=pr(e.path);i.push(o.put(new Cr(n,s))),i.push(r.Ii.sr(t,n,e))})),Zn.$n(i)},t.prototype.ir=function(t,e,n){var r=this,i=mi(t);return Zn.forEach(e,(function(e){var o=pr(e.path);return Zn.$n([i.delete([n,o]),r.Ii.rr(t,n,e)])}))},t.prototype.Xi=function(t,e){var n=mi(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.cr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=mi(t),i=on();return r.ls({range:n,hs:!0},(function(t,e,n){var r=vr(t[1]),o=new K(r);i=i.add(o)})).next((function(){return i}))},t.prototype.ki=function(t,e){var n=pr(e.path),r=IDBKeyRange.bound([n],[_(n)],!1,!0),i=0;return mi(t).ls({index:Cr.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return vi(t).get(e).next((function(t){return t?Wr(t):null}))},t}();function vi(t){return Dr(t,Sr.store)}function yi(t){return Dr(t,Ar.store)}function mi(t){return Dr(t,Cr.store)}function bi(t,e){var n=t[1],r=e[1],i=m(t[0],e[0]);return 0===i?m(n,r):i}var _i=function(){function t(t){this.ar=t,this.buffer=new Qe(bi),this.ur=0}return t.prototype.hr=function(){return++this.ur},t.prototype.lr=function(t){var e=[t,this.hr()];if(this.buffer.size<this.ar)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();bi(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),wi=function(){function t(t,e){this._r=t,this.fs=e,this.dr=!1,this.wr=null}return t.prototype.start=function(t){-1!==this._r.params.Hs&&this.Er(t)},t.prototype.stop=function(){this.wr&&(this.wr.cancel(),this.wr=null)},Object.defineProperty(t.prototype,"Tr",{get:function(){return null!==this.wr},enumerable:!1,configurable:!0}),t.prototype.Er=function(t){var e=this,n=this.dr?3e5:6e4;c("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.wr=this.fs.Ir("lru_garbage_collection",n,(function(){return Object(s.b)(e,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(n){switch(n.label){case 0:this.wr=null,this.dr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mr(this._r)];case 2:return n.sent(),[3,7];case 3:return ir(e=n.sent())?(c("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ii(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Er(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Ei=function(){function t(t,e){this.Ar=t,this.params=e}return t.prototype.Rr=function(t,e){return this.Ar.Pr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.yr=function(t,e){var n=this;if(0===e)return Zn.resolve(M.U);var r=new _i(e);return this.Ar.mn(t,(function(t){return r.lr(t.sequenceNumber)})).next((function(){return n.Ar.gr(t,(function(t){return r.lr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Zi=function(t,e,n){return this.Ar.Zi(t,e,n)},t.prototype.Vr=function(t,e){return this.Ar.Vr(t,e)},t.prototype.pr=function(t,e){var n=this;return-1===this.params.Hs?(c("LruGarbageCollector","Garbage collection skipped; disabled"),Zn.resolve(ni)):this.br(t).next((function(r){return r<n.params.Hs?(c("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Hs),ni):n.vr(t,e)}))},t.prototype.br=function(t){return this.Ar.br(t)},t.prototype.vr=function(t,e){var n,i,o,s,a,l,h,f=this,p=Date.now();return this.Rr(t,this.params.Js).next((function(e){return e>f.params.Ys?(c("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+f.params.Ys+" from "+e),i=f.params.Ys):i=e,s=Date.now(),f.yr(t,i)})).next((function(r){return n=r,a=Date.now(),f.Zi(t,n,e)})).next((function(e){return o=e,l=Date.now(),f.Vr(t,n)})).next((function(t){return h=Date.now(),u()<=r.a.DEBUG&&c("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-p)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(l-a)+"ms\n\tRemoved "+t+" documents in "+(h-l)+"ms\nTotal Duration: "+(h-p)+"ms"),Zn.resolve({Ws:!0,js:i,Gs:o,zs:t})}))},t}(),Ti=function(){function t(t,e){this.db=t,this._r=function(t,e){return new Ei(t,e)}(this,e)}return t.prototype.Pr=function(t){var e=this.Sr(t);return this.db.Dr().tr(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Sr=function(t){var e=0;return this.gr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Dr().mn(t,e)},t.prototype.gr=function(t,e){return this.Cr(t,(function(t,n){return e(n)}))},t.prototype.sr=function(t,e,n){return Ii(t,n)},t.prototype.rr=function(t,e,n){return Ii(t,n)},t.prototype.Zi=function(t,e,n){return this.db.Dr().Zi(t,e,n)},t.prototype.Fi=function(t,e){return Ii(t,e)},t.prototype.Nr=function(t,e){return function(t,e){var n=!1;return pi(t)._s((function(r){return li(t,r,e).next((function(t){return t&&(n=!0),Zn.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Vr=function(t,e){var n=this,r=this.db.Or().Fr(),i=[],o=0;return this.Cr(t,(function(s,a){if(a<=e){var u=n.Nr(t,s).next((function(e){if(!e)return o++,r.fi(t,s).next((function(){return r._i(s),mi(t).delete([0,pr(s.path)])}))}));i.push(u)}})).next((function(){return Zn.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.vs);return this.db.Dr().Ji(t,n)},t.prototype.kr=function(t,e){return Ii(t,e)},t.prototype.Cr=function(t,e){var n,r=mi(t),i=M.U;return r.ls({index:Cr.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==M.U&&e(new K(vr(n)),i),i=s,n=o):i=M.U})).next((function(){i!==M.U&&e(new K(vr(n)),i)}))},t.prototype.br=function(t){return this.db.Or().Mr(t)},t}();function Ii(t,e){return mi(t).put(function(t,e){return new Cr(0,pr(t.path),e)}(e,t.vs))}var Oi=function(){function t(t,e){this.Kt=t,this.Ti=e}return t.prototype.ui=function(t,e,n){return Ai(t).put(ki(e),n)},t.prototype._i=function(t,e){var n=Ai(t),r=ki(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Lr(t,r)}))},t.prototype.fi=function(t,e){var n=this;return Ai(t).get(ki(e)).next((function(t){return n.$r(t)}))},t.prototype.Br=function(t,e){var n=this;return Ai(t).get(ki(e)).next((function(t){var e=n.$r(t);return e?{li:e,size:ui(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Xe();return this.qr(t,e,(function(t,e){var i=n.$r(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Ur=function(t,e){var n=this,r=Xe(),i=new ze(K.J);return this.qr(t,e,(function(t,e){var o=n.$r(e);o?(r=r.Ht(t,o),i=i.Ht(t,ui(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Qr:r,Kr:i}}))},t.prototype.qr=function(t,e,n){if(e.nt())return Zn.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return Ai(t).ls({range:r},(function(t,e,r){for(var s=K.Tt(t);o&&K.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.Wr=function(t,e,n){var r=this,i=tn(),o=e.path.length+1,s={};if(n.isEqual(U.min())){var a=e.path.rt();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.rt(),c=qr(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Ir.collectionReadTimeIndex}return Ai(t).ls(s,(function(t,n,s){if(t.length===o){var a=Ur(r.Kt,n);e.path.st(a.key.path)?a instanceof _t&&re(e,a)&&(i=i.Ht(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Fr=function(t){return new Si(this,!!t&&t.jr)},t.prototype.Mr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ci(t).get(Or.key).next((function(t){return d(!!t),t}))},t.prototype.Lr=function(t,e){return Ci(t).put(Or.key,e)},t.prototype.$r=function(t){if(t){var e=Ur(this.Kt,t);return e instanceof wt&&e.version.isEqual(U.min())?null:e}return null},t}(),Si=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Gr=e,r.jr=n,r.zr=new oi((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(s.c)(e,t),e.prototype.Ei=function(t){var e=this,n=[],r=0,i=new Qe((function(t,e){return m(t.ot(),e.ot())}));return this.oi.forEach((function(o,s){var a=e.zr.get(o);if(s.li){var u=Vr(e.Gr.Kt,s.li,e.ai(o));i=i.add(o.path.Z());var c=ui(u);r+=c-a,n.push(e.Gr.ui(t,o,u))}else if(r-=a,e.jr){var l=Vr(e.Gr.Kt,new wt(o,U.min()),e.ai(o));n.push(e.Gr.ui(t,o,l))}else n.push(e.Gr._i(t,o))})),i.forEach((function(r){n.push(e.Gr.Ti.Us(t,r))})),n.push(this.Gr.updateMetadata(t,r)),Zn.$n(n)},e.prototype.di=function(t,e){var n=this;return this.Gr.Br(t,e).next((function(t){return null===t?(n.zr.set(e,0),null):(n.zr.set(e,t.size),t.li)}))},e.prototype.wi=function(t,e){var n=this;return this.Gr.Ur(t,e).next((function(t){var e=t.Qr;return t.Kr.forEach((function(t,e){n.zr.set(t,e)})),e}))},e}(si);function Ci(t){return Dr(t,Or.store)}function Ai(t){return Dr(t,Ir.store)}function ki(t){return t.path.rt()}var Ni=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;d(n<r&&n>=0&&r<=11);var o=new tr("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(mr.store)}(t),function(t){t.createObjectStore(br.store,{keyPath:br.keyPath}),t.createObjectStore(_r.store,{keyPath:_r.keyPath,autoIncrement:!0}).createIndex(_r.userMutationsIndex,_r.userMutationsKeyPath,{unique:!0}),t.createObjectStore(wr.store)}(t),ji(t),function(t){t.createObjectStore(Ir.store)}(t));var s=Zn.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Cr.store),t.deleteObjectStore(Sr.store),t.deleteObjectStore(Ar.store)}(t),ji(t)),s=s.next((function(){return function(t){var e=t.store(Ar.store),n=new Ar(0,0,U.min().G(),0);return e.put(Ar.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(_r.store).os().next((function(n){t.deleteObjectStore(_r.store),t.createObjectStore(_r.store,{keyPath:_r.keyPath,autoIncrement:!0}).createIndex(_r.userMutationsIndex,_r.userMutationsKeyPath,{unique:!0});var r=e.store(_r.store),i=n.map((function(t){return r.put(t)}));return Zn.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Nr.store,{keyPath:Nr.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Hr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Or.store)}(t),i.Jr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Yr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Xr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Ir.store);e.createIndex(Ir.readTimeIndex,Ir.readTimeIndexPath,{unique:!1}),e.createIndex(Ir.collectionReadTimeIndex,Ir.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Zr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(jr.store,{keyPath:jr.keyPath})}(t),function(t){t.createObjectStore(xr.store,{keyPath:xr.keyPath})}(t)}))),s},t.prototype.Jr=function(t){var e=0;return t.store(Ir.store).ls((function(t,n){e+=ui(n)})).next((function(){var n=new Or(e);return t.store(Or.store).put(Or.key,n)}))},t.prototype.Hr=function(t){var e=this,n=t.store(br.store),r=t.store(_r.store);return n.os().next((function(n){return Zn.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(_r.userMutationsIndex,i).next((function(r){return Zn.forEach(r,(function(r){d(r.userId===n.userId);var i=zr(e.Kt,r);return ai(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Yr=function(t){var e=t.store(Cr.store),n=t.store(Ir.store);return t.store(Ar.store).get(Ar.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new q(n),s=function(t){return[0,pr(t)]}(o);r.push(e.get(s).next((function(n){return n?Zn.resolve():function(n){return e.put(new Cr(0,pr(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Zn.$n(r)}))}))},t.prototype.Xr=function(t,e){t.createObjectStore(kr.store,{keyPath:kr.keyPath});var n=e.store(kr.store),r=new Zr,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:pr(i)})}};return e.store(Ir.store).ls({hs:!0},(function(t,e){var n=new q(t);return i(n.Z())})).next((function(){return e.store(wr.store).ls({hs:!0},(function(t,e){var n=vr(t[1]);return i(n.Z())}))}))},t.prototype.Zr=function(t){var e=this,n=t.store(Sr.store);return n.ls((function(t,r){var i=Wr(r),o=Gr(e.Kt,i);return n.put(o)}))},t}();function ji(t){t.createObjectStore(Cr.store,{keyPath:Cr.keyPath}).createIndex(Cr.documentTargetsIndex,Cr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Sr.store,{keyPath:Sr.keyPath}).createIndex(Sr.queryTargetsIndexName,Sr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ar.store)}var xi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ri=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.eo=o,this.window=s,this.document=a,this.no=c,this.so=h,this.io=null,this.ro=!1,this.isPrimary=!1,this.networkEnabled=!0,this.oo=null,this.inForeground=!1,this.co=null,this.ao=null,this.uo=Number.NEGATIVE_INFINITY,this.ho=function(t){return Promise.resolve()},!t.Wn())throw new T(E.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ii=new Ti(this,i),this.lo=n+"main",this.Kt=new Fr(u),this._o=new er(this.lo,11,new Ni(this.Kt)),this.fo=new gi(this.Ii,this.Kt),this.Ti=new ti,this.wo=function(t,e){return new Oi(t,e)}(this.Kt,this.Ti),this.Eo=new $r,this.window&&this.window.localStorage?this.To=this.window.localStorage:(this.To=null,!1===h&&l("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Io().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new T(E.FAILED_PRECONDITION,xi);return t.mo(),t.Ao(),t.Ro(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.fo.Wi(e)}))})).then((function(e){t.io=new M(e,t.no)})).then((function(){t.ro=!0})).catch((function(e){return t._o&&t._o.close(),Promise.reject(e)}))},t.prototype.Po=function(t){var e=this;return this.ho=function(n){return Object(s.b)(e,void 0,void 0,(function(){return Object(s.d)(this,(function(e){return this.Tr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.yo=function(t){var e=this;this._o.Zn((function(n){return Object(s.b)(e,void 0,void 0,(function(){return Object(s.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Vo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.eo.ys((function(){return Object(s.b)(e,void 0,void 0,(function(){return Object(s.d)(this,(function(t){switch(t.label){case 0:return this.Tr?[4,this.Io()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Io=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Di(e).put(new Nr(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.po(e).next((function(e){e||(t.isPrimary=!1,t.eo.bo((function(){return t.ho(!1)})))}))})).next((function(){return t.vo(e)})).next((function(n){return t.isPrimary&&!n?t.So(e).next((function(){return!1})):!!n&&t.Do(e).next((function(){return!0}))}))})).catch((function(e){if(ir(e))return c("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return c("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.eo.bo((function(){return t.ho(e)})),t.isPrimary=e}))},t.prototype.po=function(t){var e=this;return Pi(t).get(mr.key).next((function(t){return Zn.resolve(e.Co(t))}))},t.prototype.xo=function(t){return Di(t).delete(this.clientId)},t.prototype.No=function(){return Object(s.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(s.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.Fo(this.uo,18e5)?[3,2]:(this.uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Dr(t,Nr.store);return e.os().next((function(t){var n=r.Oo(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return Zn.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.To)for(e=0,n=t;e<n.length;e++)this.To.removeItem(this.ko(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.Ro=function(){var t=this;this.ao=this.eo.Ir("client_metadata_refresh",4e3,(function(){return t.Io().then((function(){return t.No()})).then((function(){return t.Ro()}))}))},t.prototype.Co=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.vo=function(t){var e=this;return this.so?Zn.resolve(!0):Pi(t).get(mr.key).next((function(n){if(null!==n&&e.Fo(n.leaseTimestampMs,5e3)&&!e.Mo(n.ownerId)){if(e.Co(n)&&e.networkEnabled)return!0;if(!e.Co(n)){if(!n.allowTabSynchronization)throw new T(E.FAILED_PRECONDITION,xi);return!1}}return!(!e.networkEnabled||!e.inForeground)||Di(t).os().next((function(t){return void 0===e.Oo(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&c("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Lo=function(){return Object(s.b)(this,void 0,void 0,(function(){var t=this;return Object(s.d)(this,(function(e){switch(e.label){case 0:return this.ro=!1,this.$o(),this.ao&&(this.ao.cancel(),this.ao=null),this.Bo(),this.qo(),[4,this._o.runTransaction("shutdown","readwrite",[mr.store,Nr.store],(function(e){var n=new Pr(e,M.U);return t.So(n).next((function(){return t.xo(n)}))}))];case 1:return e.sent(),this._o.close(),this.Uo(),[2]}}))}))},t.prototype.Oo=function(t,e){var n=this;return t.filter((function(t){return n.Fo(t.updateTimeMs,e)&&!n.Mo(t.clientId)}))},t.prototype.Qo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Di(e).os().next((function(e){return t.Oo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.Ko=function(t){return ci.Ai(t,this.Kt,this.Ti,this.Ii)},t.prototype.Dr=function(){return this.fo},t.prototype.Or=function(){return this.wo},t.prototype.Wo=function(){return this.Ti},t.prototype.jo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return c("IndexedDbPersistence","Starting transaction:",t),this._o.runTransaction(t,"readonly"===e?"readonly":"readwrite",Rr,(function(o){return r=new Pr(o,i.io?i.io.next():M.U),"readwrite-primary"===e?i.po(r).next((function(t){return!!t||i.vo(r)})).next((function(e){if(!e)throw l("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.eo.bo((function(){return i.ho(!1)})),new T(E.FAILED_PRECONDITION,hr);return n(r)})).next((function(t){return i.Do(r).next((function(){return t}))})):i.Go(r).next((function(){return n(r)}))})).then((function(t){return r.ps(),t}))},t.prototype.Go=function(t){var e=this;return Pi(t).get(mr.key).next((function(t){if(null!==t&&e.Fo(t.leaseTimestampMs,5e3)&&!e.Mo(t.ownerId)&&!e.Co(t)&&!(e.so||e.allowTabSynchronization&&t.allowTabSynchronization))throw new T(E.FAILED_PRECONDITION,xi)}))},t.prototype.Do=function(t){var e=new mr(this.clientId,this.allowTabSynchronization,Date.now());return Pi(t).put(mr.key,e)},t.Wn=function(){return er.Wn()},t.prototype.So=function(t){var e=this,n=Pi(t);return n.get(mr.key).next((function(t){return e.Co(t)?(c("IndexedDbPersistence","Releasing primary lease."),n.delete(mr.key)):Zn.resolve()}))},t.prototype.Fo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(l("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.mo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.co=function(){t.eo.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.Io()}))},this.document.addEventListener("visibilitychange",this.co),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Bo=function(){this.co&&(this.document.removeEventListener("visibilitychange",this.co),this.co=null)},t.prototype.Ao=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.oo=function(){e.$o(),e.eo.ys((function(){return e.Lo()}))},this.window.addEventListener("unload",this.oo))},t.prototype.qo=function(){this.oo&&(this.window.removeEventListener("unload",this.oo),this.oo=null)},t.prototype.Mo=function(t){var e;try{var n=null!==(null===(e=this.To)||void 0===e?void 0:e.getItem(this.ko(t)));return c("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return l("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.$o=function(){if(this.To)try{this.To.setItem(this.ko(this.clientId),String(Date.now()))}catch(t){l("Failed to set zombie client id.",t)}},t.prototype.Uo=function(){if(this.To)try{this.To.removeItem(this.ko(this.clientId))}catch(t){}},t.prototype.ko=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Pi(t){return Dr(t,mr.store)}function Di(t){return Dr(t,Nr.store)}function Li(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Mi=function(t,e){this.progress=t,this.zo=e},Fi=function(){function t(t,e,n){this.wo=t,this.Ho=e,this.Ti=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.vi(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.wo.fi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].xs(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=Xe();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].xs(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.wo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){var i=n.Xo(t,e,r),o=Ye();return i.forEach((function(t,e){e||(e=new wt(t,U.min())),o=o.Ht(t,e)})),o}))},t.prototype.Wr=function(t,e,n){return function(t){return K.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):Jt(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new K(e)).next((function(t){var e=tn();return t instanceof _t&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=tn();return this.Ti.Qs(t,i).next((function(s){return Zn.forEach(s,(function(s){var a=function(t,e){return new Bt(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.wo.Wr(t,e,n).next((function(n){return r=n,o.Ho.Ci(t,e)})).next((function(e){return o.ic(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=Ae(u,r.get(c),0,o.Ss);r=l instanceof _t?r.Ht(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){re(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=on(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Re&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.wo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof _t&&(c=c.Ht(t,e))})),c}))},t}(),Ui=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=on(),i=on(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Vi=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.Wr=function(t,e,n,i){var o=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(U.min())?this.hc(t,e):this.uc.Zo(t,i).next((function(s){var a=o.lc(e,s);return(Wt(e)||Gt(e))&&o._c(e.limitType,a,i,n)?o.hc(t,e):(u()<=r.a.DEBUG&&c("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ne(e)),o.uc.Wr(t,e,n).next((function(t){return a.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new Qe(ie(t));return e.forEach((function(e,r){r instanceof _t&&re(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return u()<=r.a.DEBUG&&c("QueryEngine","Using full collection scan to execute query:",ne(e)),this.uc.Wr(t,e,U.min())},t}(),qi=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new ze(m),this.wc=new oi((function(t){return Ot(t)}),St),this.Ec=U.min(),this.Ho=t.Ko(n),this.Tc=t.Or(),this.fo=t.Dr(),this.Ic=new Fi(this.Tc,this.Ho,this.persistence.Wo()),this.Eo=t.jo(),this.fc.ac(this.Ic)}return t.prototype.mr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.pr(n,e.dc)}))},t}();function Hi(t,e,n,r){return new qi(t,e,n,r)}function Bi(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(s.d)(this,(function(s){switch(s.label){case 0:return n=g(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ho.bi(t).next((function(s){return o=s,r=n.persistence.Ko(e),i=new Fi(n.Tc,r,n.persistence.Wo()),r.bi(t)})).next((function(e){for(var n=[],r=[],s=on(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,p=e;f<p.length;f++){var d=p[f];r.push(d.batchId);for(var g=0,v=d.mutations;g<v.length;g++)s=s.add(v[g].key)}return i.Zo(t,s).next((function(t){return{mc:t,Ac:n,Rc:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}}))}))}function Ki(t,e){var n=g(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Fr({jr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Zn.resolve();return o.forEach((function(t){s=s.next((function(){return r.fi(e,t)})).next((function(e){var o=e,s=n.Os.get(t);d(null!==s),(!o||o.version.u(s)<0)&&(o=i.Ds(t,o,n))&&r.ui(o,n.Fs)}))})),s.next((function(){return t.Ho.xi(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.Oi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function zi(t){var e=g(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.fo.Ki(t)}))}function Wi(t,e){var n=g(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Fr({jr:!0});i=n.dc;var s=[];e.Oe.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.fo.ir(t,e.Ke,o).next((function(){return n.fo.nr(t,e.Ue,o)})));var u=e.resumeToken;if(u.o()>0){var c=a.$t(u,r).Lt(t.vs);i=i.Ht(o,c),function(t,e,n){return d(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.j()-t.Mt.j()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(a,c,e)&&s.push(n.fo.Ji(t,c))}}}));var a=Ye();if(e.Me.forEach((function(r,i){e.Le.has(r)&&s.push(n.persistence.Ii.kr(t,r))})),s.push(Gi(t,o,e.Me,r,void 0).next((function(t){a=t}))),!r.isEqual(U.min())){var u=n.fo.Ki(t).next((function(e){return n.fo.ji(t,t.vs,r)}));s.push(u)}return Zn.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,a)}))})).then((function(t){return n.dc=i,t}))}function Gi(t,e,n,r,i){var o=on();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Ye();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof wt&&s.version.isEqual(U.min())?(e._i(n,u),o=o.Ht(n,s)):null==a||s.version.u(a.version)>0||0===s.version.u(a.version)&&a.hasPendingWrites?(e.ui(s,u),o=o.Ht(n,s)):c("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Qi(t,e){var n=g(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.Vi(t,e)}))}function $i(t,e){var n=g(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.fo.er(t,e).next((function(i){return i?Zn.resolve(r=i):n.fo.qi(t).next((function(i){return r=new se(e,i,0,t.vs),n.fo.Gi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function Ji(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var r,i,o,a;return Object(s.d)(this,(function(s){switch(s.label){case 0:r=g(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ii.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!ir(a=s.sent()))throw a;return c("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}}))}))}function Yi(t,e,n){var r=g(t),i=U.min(),o=on();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=g(t),i=r.wc.get(n);return void 0!==i?Zn.resolve(r.dc.get(i)):r.fo.er(e,n)}(r,t,Xt(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.fo.cr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.Wr(t,e,n?i:U.min(),n?o:on())})).next((function(t){return{documents:t,Pc:o}}))}))}function Xi(t,e){var n=g(t),r=g(n.fo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function Zi(t){var e=g(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=g(t),i=Ye(),o=qr(n),s=Ai(e),a=IDBKeyRange.lowerBound(o,!0);return s.ls({index:Ir.readTimeIndex,range:a},(function(t,e){var n=Ur(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{zo:i,readTime:Hr(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.zo;return e.Ec=t.readTime,n}))}function to(t){return Object(s.b)(this,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(n){return[2,(e=g(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Ai(t),n=U.min();return e.ls({index:Ir.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Hr(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ec=t}))]}))}))}function eo(t,e,n,r){return Object(s.b)(this,void 0,void 0,(function(){var i,o,a,u,c,l,h,f,p,d;return Object(s.d)(this,(function(s){switch(s.label){case 0:for(i=g(t),o=on(),a=Ye(),u=nn(),c=0,l=n;c<l.length;c++)f=e.yc((h=l[c]).metadata.name),h.document&&(o=o.add(f)),a=a.Ht(f,e.gc(h)),u=u.Ht(f,e.Vc(h.metadata.readTime));return p=i.Tc.Fr({jr:!0}),[4,$i(i,function(t){return Xt(zt(q.ct("__bundle__/docs/"+t)))}(r))];case 1:return d=s.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Gi(t,p,a,U.min(),u).next((function(e){return p.apply(t),e})).next((function(e){return i.fo.Xi(t,d.targetId).next((function(){return i.fo.nr(t,o,d.targetId)})).next((function(){return i.Ic.tc(t,e)}))}))}))]}}))}))}function no(t,e,n){return void 0===n&&(n=on()),Object(s.b)(this,void 0,void 0,(function(){var r,i;return Object(s.d)(this,(function(o){switch(o.label){case 0:return[4,$i(t,Xt(Qr(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=g(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Sn(e.readTime);if(r.Mt.u(o)>=0)return i.Eo.Bs(t,e);var s=r.$t(w.h,o);return i.dc=i.dc.Ht(s.targetId,s),i.fo.Ji(t,s).next((function(){return i.fo.Xi(t,r.targetId)})).next((function(){return i.fo.nr(t,n,r.targetId)})).next((function(){return i.Eo.Bs(t,e)}))}))]}}))}))}var ro=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ms=function(t,e){return Zn.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:Sn(n.createTime)}),Zn.resolve()},t.prototype.$s=function(t,e){return Zn.resolve(this.vc.get(e))},t.prototype.Bs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:Qr(t.bundledQuery),readTime:Sn(t.readTime)}}(e)),Zn.resolve()},t}(),io=function(){function t(){this.Sc=new Qe(oo.Dc),this.Cc=new Qe(oo.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.sr=function(t,e){var n=new oo(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.sr(t,e)}))},t.prototype.rr=function(t,e){this.Fc(new oo(t,e))},t.prototype.Oc=function(t,e){var n=this;t.forEach((function(t){return n.rr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new K(new q([])),r=new oo(n,t),i=new oo(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Fc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Fc(e)}))},t.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new K(new q([])),n=new oo(e,t),r=new oo(e,t+1),i=on();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.ki=function(t){var e=new oo(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),oo=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return K.J(t.key,e.key)||m(t.$c,e.$c)},t.xc=function(t,e){return m(t.$c,e.$c)||K.J(t.key,e.key)},t}(),so=function(){function t(t,e){this.Ti=t,this.Ii=e,this.Ho=[],this.Bc=1,this.qc=new Qe(oo.Dc)}return t.prototype.Ri=function(t){return Zn.resolve(0===this.Ho.length)},t.prototype.Pi=function(t,e,n,r){var i=this.Bc;this.Bc++;var o=new Lr(i,e,n,r);this.Ho.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.qc=this.qc.add(new oo(u.key,i)),this.Ti.Us(t,u.key.path.Z())}return Zn.resolve(o)},t.prototype.yi=function(t,e){return Zn.resolve(this.Uc(e))},t.prototype.Vi=function(t,e){var n=this.Qc(e+1),r=n<0?0:n;return Zn.resolve(this.Ho.length>r?this.Ho[r]:null)},t.prototype.pi=function(){return Zn.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.bi=function(t){return Zn.resolve(this.Ho.slice())},t.prototype.vi=function(t,e){var n=this,r=new oo(e,0),i=new oo(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),Zn.resolve(o)},t.prototype.Si=function(t,e){var n=this,r=new Qe(m);return e.forEach((function(t){var e=new oo(t,0),i=new oo(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),Zn.resolve(this.Kc(r))},t.prototype.Ci=function(t,e){var n=e.path,r=n.length+1,i=n;K.Et(i)||(i=i.child(""));var o=new oo(new K(i),0),s=new Qe(m);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)}),o),Zn.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.xi=function(t,e){var n=this;d(0===this.Wc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return Zn.forEach(e.mutations,(function(i){var o=new oo(i.key,e.batchId);return r=r.delete(o),n.Ii.Fi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Ni=function(t){},t.prototype.ki=function(t,e){var n=new oo(e,0),r=this.qc.Pe(n);return Zn.resolve(e.isEqual(r&&r.key))},t.prototype.Oi=function(t){return Zn.resolve()},t.prototype.Wc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),ao=function(){function t(t,e){this.Ti=t,this.jc=e,this.docs=new ze(K.J),this.size=0}return t.prototype.ui=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jc(e);return this.docs=this.docs.Ht(r,{li:e,size:s,readTime:n}),this.size+=s-o,this.Ti.Us(t,r.path.Z())},t.prototype._i=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.fi=function(t,e){var n=this.docs.get(e);return Zn.resolve(n?n.li:null)},t.prototype.getEntries=function(t,e){var n=this,r=Xe();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e.li:null)})),Zn.resolve(r)},t.prototype.Wr=function(t,e,n){for(var r=tn(),i=new K(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),a=s.value,u=a.li,c=a.readTime;if(!e.path.st(s.key.path))break;c.u(n)<=0||u instanceof _t&&re(e,u)&&(r=r.Ht(u.key,u))}return Zn.resolve(r)},t.prototype.Gc=function(t,e){return Zn.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Fr=function(t){return new uo(this)},t.prototype.Mr=function(t){return Zn.resolve(this.size)},t}(),uo=function(t){function e(e){var n=this;return(n=t.call(this)||this).Gr=e,n}return Object(s.c)(e,t),e.prototype.Ei=function(t){var e=this,n=[];return this.oi.forEach((function(r,i){i&&i.li?n.push(e.Gr.ui(t,i.li,e.ai(r))):e.Gr._i(r)})),Zn.$n(n)},e.prototype.di=function(t,e){return this.Gr.fi(t,e)},e.prototype.wi=function(t,e){return this.Gr.getEntries(t,e)},e}(si),co=function(){function t(t){this.persistence=t,this.zc=new oi((function(t){return Ot(t)}),St),this.lastRemoteSnapshotVersion=U.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new io,this.targetCount=0,this.Yc=di.$i()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),Zn.resolve()},t.prototype.Ki=function(t){return Zn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Wi=function(t){return Zn.resolve(this.Hc)},t.prototype.qi=function(t){return this.highestTargetId=this.Yc.next(),Zn.resolve(this.highestTargetId)},t.prototype.ji=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),Zn.resolve()},t.prototype.zi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new di(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.Gi=function(t,e){return this.zi(e),this.targetCount+=1,Zn.resolve()},t.prototype.Ji=function(t,e){return this.zi(e),Zn.resolve()},t.prototype.Yi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,Zn.resolve()},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.zc.delete(s),o.push(r.Xi(t,a.targetId)),i++)})),Zn.$n(o).next((function(){return i}))},t.prototype.tr=function(t){return Zn.resolve(this.targetCount)},t.prototype.er=function(t,e){var n=this.zc.get(e)||null;return Zn.resolve(n)},t.prototype.nr=function(t,e,n){return this.Jc.Nc(e,n),Zn.resolve()},t.prototype.ir=function(t,e,n){this.Jc.Oc(e,n);var r=this.persistence.Ii,i=[];return r&&e.forEach((function(e){i.push(r.Fi(t,e))})),Zn.$n(i)},t.prototype.Xi=function(t,e){return this.Jc.kc(e),Zn.resolve()},t.prototype.cr=function(t,e){var n=this.Jc.Lc(e);return Zn.resolve(n)},t.prototype.ki=function(t,e){return Zn.resolve(this.Jc.ki(e))},t}(),lo=function(){function t(t,e){var n=this;this.Xc={},this.io=new M(0),this.ro=!1,this.ro=!0,this.Ii=t(this),this.fo=new co(this),this.Ti=new Xr,this.wo=function(t,e){return new ao(t,(function(t){return n.Ii.Zc(t)}))}(this.Ti),this.Kt=new Fr(e),this.Eo=new ro(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Lo=function(){return this.ro=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.yo=function(){},t.prototype.Vo=function(){},t.prototype.Wo=function(){return this.Ti},t.prototype.Ko=function(t){var e=this.Xc[t.R()];return e||(e=new so(this.Ti,this.Ii),this.Xc[t.R()]=e),e},t.prototype.Dr=function(){return this.fo},t.prototype.Or=function(){return this.wo},t.prototype.jo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;c("MemoryPersistence","Starting transaction:",t);var i=new ho(this.io.next());return this.Ii.ta(),n(i).next((function(t){return r.Ii.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.ps(),t}))},t.prototype.na=function(t,e){return Zn.Bn(Object.values(this.Xc).map((function(n){return function(){return n.ki(t,e)}})))},t}(),ho=function(t){function e(e){var n=this;return(n=t.call(this)||this).vs=e,n}return Object(s.c)(e,t),e}(fr),fo=function(){function t(t){this.persistence=t,this.sa=new io,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw p()},enumerable:!1,configurable:!0}),t.prototype.sr=function(t,e,n){return this.sa.sr(n,e),this.oa.delete(n.toString()),Zn.resolve()},t.prototype.rr=function(t,e,n){return this.sa.rr(n,e),this.oa.add(n.toString()),Zn.resolve()},t.prototype.Fi=function(t,e){return this.oa.add(e.toString()),Zn.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Dr();return r.cr(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Yi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.Or().Fr();return Zn.forEach(this.oa,(function(r){var i=K.ft(r);return e.ca(t,i).next((function(t){t||n._i(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.kr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return Zn.Bn([function(){return Zn.resolve(n.sa.ki(e))},function(){return n.persistence.Dr().ki(t,e)},function(){return n.persistence.na(t,e)}])},t}();function po(t,e){return"firestore_clients_"+t+"_"+e}function go(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function vo(t,e){return"firestore_targets_"+t+"_"+e}var yo=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new T(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(l("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),mo=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new T(r.error.code,r.error.message)),i?new t(e,r.state,o):(l("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),bo=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=an(),s=0;i&&s<r.activeTargetIds.length;++s)i=rt(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(l("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),_o=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(l("SharedClientState","Failed to parse online state: "+e),null)},t}(),wo=function(){function t(){this.activeTargetIds=an()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Eo=function(){function t(t,e,n,r,i){this.window=t,this.eo=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new ze(m),this.Tr=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=po(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new wo),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.Wn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(s.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,u,c,l,h=this;return Object(s.d)(this,(function(s){switch(s.label){case 0:return[4,this.fa.Qo()];case 1:for(t=s.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(po(this.persistenceKey,r)))&&(o=bo.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(a=this.storage.getItem(this.ga))&&(u=this.ba(a))&&this.va(u),c=0,l=this.Ia;c<l.length;c++)this.Ea(l[c]);return this.Ia=[],this.window.addEventListener("unload",(function(){return h.Lo()})),this.Tr=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(vo(this.persistenceKey,t));if(n){var r=mo.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(vo(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Oa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.Wa(t)},t.prototype.ja=function(){this.Ga()},t.prototype.Lo=function(){this.Tr&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Tr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return c("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){c("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){c("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(c("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void l("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.eo.bo((function(){return Object(s.b)(e,void 0,void 0,(function(){var t,e,r,i,o,a;return Object(s.d)(this,(function(s){if(this.Tr){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(a=function(t){var e=M.U;if(null!=t)try{var n=JSON.parse(t);d("number"==typeof n),e=n}catch(t){l("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==M.U&&this.L(a);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new yo(this.currentUser,t,e,n),i=go(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Oa=function(t){var e=go(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Wa=function(t){this.storage.setItem(this.ga,JSON.stringify({clientId:this._a,onlineState:t}))},t.prototype.Ua=function(t,e,n){var r=vo(this.persistenceKey,t),i=new mo(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return bo.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return yo.aa(new j(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return mo.aa(r,e)},t.prototype.ba=function(t){return _o.aa(t)},t.prototype.Xa=function(t){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(c("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.fa.iu(s,a).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=an();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),To=function(){function t(){this.ru=new wo,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Fa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new wo,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.Lo=function(){},t.prototype.q=function(t){},t.prototype.ja=function(){},t}(),Io=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.Lo=function(){},t}(),Oo=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.Lo=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){c("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){c("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),So={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Co=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),Ao=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return Object(s.c)(e,t),e.prototype.Du=function(t,e,n,r){return new Promise((function(i,s){var a=new o.f;a.listenOnce(o.c.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case o.a.NO_ERROR:var e=a.getResponseJson();c("Connection","XHR received:",JSON.stringify(e)),i(e);break;case o.a.TIMEOUT:c("Connection",'RPC "'+t+'" timed out'),s(new T(E.DEADLINE_EXCEEDED,"Request time out"));break;case o.a.HTTP_ERROR:var n=a.getStatus();if(c("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(e)>=0?e:E.UNKNOWN}(r.status);s(new T(u,r.message))}else s(new T(E.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new T(E.UNAVAILABLE,"Connection failed."));break;default:p()}}finally{c("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);a.send(e,"POST",u,n,15)}))},e.prototype.xu=function(t,e){var n=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Object(o.g)(),s=Object(o.h)(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(a.initMessageHeaders,e),Object(i.x)()||Object(i.A)()||Object(i.t)()||Object(i.v)()||Object(i.B)()||Object(i.s)()||(a.httpHeadersOverwriteParam="$httpHeaders");var u=n.join("");c("Connection","Creating WebChannel: "+u,a);var l=r.createWebChannel(u,a),f=!1,p=!1,g=new Co({du:function(t){p?c("Connection","Not sending because WebChannel is closed:",t):(f||(c("Connection","Opening WebChannel transport."),l.open(),f=!0),c("Connection","WebChannel sending:",t),l.send(t))},wu:function(){return l.close()}}),v=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return v(l,o.e.EventType.OPEN,(function(){p||c("Connection","WebChannel transport opened.")})),v(l,o.e.EventType.CLOSE,(function(){p||(p=!0,c("Connection","WebChannel transport closed"),g.Pu())})),v(l,o.e.EventType.ERROR,(function(t){p||(p=!0,h("Connection","WebChannel transport errored:",t),g.Pu(new T(E.UNAVAILABLE,"The operation could not be completed")))})),v(l,o.e.EventType.MESSAGE,(function(t){var e;if(!p){var n=t.data[0];d(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){c("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Fe[t];if(void 0!==e)return Ke(e)}(i),s=r.message;void 0===o&&(o=E.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),p=!0,g.Pu(new T(o,s)),l.close()}else c("Connection","WebChannel received:",n),g.yu(n)}})),v(s,o.b.STAT_EVENT,(function(t){t.stat===o.d.PROXY?c("Connection","Detected buffering proxy"):t.stat===o.d.NOPROXY&&c("Connection","Detected no buffering proxy")})),setTimeout((function(){g.Ru()}),0),g},e}(function(){function t(t){this.gu=t,this.T=t.T,this.Vu=(t.ssl?"https":"http")+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);c("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return c("RestConnection","Received: ",t),t}),(function(e){throw h("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.4",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){return this.Vu+"/v1/"+e+":"+So[t]},t}());function ko(){return"undefined"!=typeof window?window:null}function No(){return"undefined"!=typeof document?document:null}function jo(t){return new En(t,!0)}var xo=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.eo=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Ou},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&c("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.eo.Ir(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),Ro=function(){function t(t,e,n,r,i,o){this.eo=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new xo(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.eo.Ir(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==t?this.zu.reset():e&&e.code===E.RESOURCE_EXHAUSTED?(l(e.toString()),l("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===E.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.ju),n=this.ju;this.Wu.getToken().then((function(e){t.ju===n&&t.rh(e)}),(function(n){e((function(){var e=new T(E.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return Object(s.b)(t,void 0,void 0,(function(){return Object(s.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return c("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.eo.ys((function(){return e.ju===t?n():(c("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Po=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return Object(s.c)(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:p()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(d(void 0===e||"string"==typeof e),w.fromBase64String(e||"")):(d(void 0===e||e instanceof Uint8Array),w.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?E.UNKNOWN:Ke(t.code);return new T(e,t.message||"")}(a);n=new gn(r,i,o,s||null)}else if("documentChange"in e){i=Nn(t,(r=e.documentChange).document.name),o=Sn(r.document.updateTime);var a=new vt({mapValue:{fields:r.document.fields}}),u=(s=new _t(i,o,a,{}),r.targetIds||[]);n=new pn(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Nn(t,(r=e.documentDelete).document),o=r.readTime?Sn(r.readTime):U.min(),a=new wt(i,o),n=new pn([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Nn(t,(r=e.documentRemove).document),n=new pn([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return p();var c=e.filter;i=new He(r=c.count||0),n=new dn(o=c.targetId,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return U.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?U.min():e.readTime?Sn(e.readTime):U.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=Rn(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=Ct(r)?{documents:Un(t,r)}:{query:Vn(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=In(t,e.resumeToken):e.Mt.u(U.min())>0&&(n.readTime=Tn(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return p()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=Rn(this.Kt),e.removeTarget=t,this.eh(e)},e}(Ro),Do=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return Object(s.c)(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(d(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(d(void 0!==e),t.map((function(t){return function(t,e){var n=Sn(t.updateTime?t.updateTime:e);n.isEqual(U.min())&&(n=Sn(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Te(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Sn(t.commitTime);return this.listener.wh(n,e)}return d(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=Rn(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Mn(e.Kt,t)}))};this.eh(n)},e}(Ro),Lo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return Object(s.c)(e,t),e.prototype.mh=function(){if(this.Ih)throw new T(E.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===E.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===E.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.terminate=function(){this.Ih=!1},e}((function(){})),Mo=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.Ir("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(l(e),this.Ph=!1):c("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),Fo=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=i,this.kh.cu((function(t){n.ys((function(){return Object(s.b)(o,void 0,void 0,(function(){return Object(s.d)(this,(function(t){switch(t.label){case 0:return Go(this)?(c("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(s.b)(this,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(n){switch(n.label){case 0:return(e=g(t)).Fh.add(4),[4,Vo(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Fh.delete(4),[4,Uo(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new Mo(n,r)};function Uo(t){return Object(s.b)(this,void 0,void 0,(function(){var e,n;return Object(s.d)(this,(function(r){switch(r.label){case 0:if(!Go(t))return[3,4];e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Vo(t){return Object(s.b)(this,void 0,void 0,(function(){var e,n;return Object(s.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function qo(t,e){var n=g(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),Wo(n)?zo(n):us(n).Ju()&&Bo(n,e))}function Ho(t,e){var n=g(t),r=us(n);n.Nh.delete(e),r.Ju()&&Ko(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():Go(n)&&n.Mh.set("Unknown"))}function Bo(t,e){t.Lh.cn(e.targetId),us(t).hh(e)}function Ko(t,e){t.Lh.cn(e),us(t).lh(e)}function zo(t){t.Lh=new yn({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),us(t).start(),t.Mh.yh()}function Wo(t){return Go(t)&&!us(t).Hu()&&t.Nh.size>0}function Go(t){return 0===g(t).Fh.size}function Qo(t){t.Lh=void 0}function $o(t){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(e){return t.Nh.forEach((function(e,n){Bo(t,e)})),[2]}))}))}function Jo(t,e){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(n){return Qo(t),Wo(t)?(t.Mh.ph(e),zo(t)):t.Mh.set("Unknown"),[2]}))}))}function Yo(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var r,i,o;return Object(s.d)(this,(function(a){switch(a.label){case 0:if(t.Mh.set("Online"),!(e instanceof gn&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(s.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Nh.has(o=i[r])?[4,t.Ch.$h(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),c("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Xo(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof pn?t.Lh.wn(e):e instanceof dn?t.Lh.yn(e):t.Lh.In(e),n.isEqual(U.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,zi(t.Sh)];case 8:return i=a.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Oe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(w.h,n.Mt)),Ko(t,e);var r=new se(n.target,e,1,n.sequenceNumber);Bo(t,r)}})),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return c("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Xo(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Xo(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var r=this;return Object(s.d)(this,(function(i){switch(i.label){case 0:if(!ir(e))throw e;return t.Fh.add(1),[4,Vo(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return zi(t.Sh)}),t.fs.bo((function(){return Object(s.b)(r,void 0,void 0,(function(){return Object(s.d)(this,(function(e){switch(e.label){case 0:return c("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Fh.delete(1),[4,Uo(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Zo(t,e){return e().catch((function(n){return Xo(t,n,e)}))}function ts(t){return Object(s.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(s.d)(this,(function(s){switch(s.label){case 0:e=g(t),n=cs(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Go(t)&&t.xh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Qi(e.Sh,r)];case 3:return null===(i=s.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=cs(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Xo(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return es(e)&&ns(e),[2]}}))}))}function es(t){return Go(t)&&!cs(t).Hu()&&t.xh.length>0}function ns(t){cs(t).start()}function rs(t){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(e){return cs(t).Th(),[2]}))}))}function is(t){return Object(s.b)(this,void 0,void 0,(function(){var e,n,r;return Object(s.d)(this,(function(i){for(e=cs(t),n=0,r=t.xh;n<r.length;n++)e.dh(r[n].mutations);return[2]}))}))}function os(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var r,i;return Object(s.d)(this,(function(o){switch(o.label){case 0:return r=t.xh.shift(),i=Mr.from(r,e,n),[4,Zo(t,(function(){return t.Ch.qh(i)}))];case 1:return o.sent(),[4,ts(t)];case 2:return o.sent(),[2]}}))}))}function ss(t,e){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(n){switch(n.label){case 0:return e&&cs(t).fh?[4,function(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r;return Object(s.d)(this,(function(i){switch(i.label){case 0:return Be(r=e.code)&&r!==E.ABORTED?(n=t.xh.shift(),cs(t).Xu(),[4,Zo(t,(function(){return t.Ch.Uh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,ts(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return es(t)&&ns(t),[2]}}))}))}function as(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n;return Object(s.d)(this,(function(r){switch(r.label){case 0:return n=g(t),e?(n.Fh.delete(2),[4,Uo(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Fh.add(2),[4,Vo(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function us(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=g(t);return r.mh(),new Po(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:$o.bind(null,t),Iu:Jo.bind(null,t),uh:Yo.bind(null,t)}),t.Oh.push((function(n){return Object(s.b)(e,void 0,void 0,(function(){return Object(s.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),Wo(t)?zo(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),Qo(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function cs(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=g(t);return r.mh(),new Do(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:rs.bind(null,t),Iu:ss.bind(null,t),Eh:is.bind(null,t),wh:os.bind(null,t)}),t.Oh.push((function(n){return Object(s.b)(e,void 0,void 0,(function(){return Object(s.d)(this,(function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,ts(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(c("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh}var ls=function(){this.Wh=void 0,this.listeners=[]},hs=function(){this.queries=new oi((function(t){return ee(t)}),te),this.onlineState="Unknown",this.jh=new Set};function fs(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i,o,a,u,c;return Object(s.d)(this,(function(s){switch(s.label){case 0:if(n=g(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new ls),!i)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),a=o,[4,n.Gh(r)];case 2:return a.Wh=s.sent(),[3,4];case 3:return u=s.sent(),c=lr(u,"Initialization of query '"+ne(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.Wh&&e.Hh(o.Wh)&&vs(n),[2]}}))}))}function ps(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(s.d)(this,(function(s){return n=g(t),i=!1,(o=n.queries.get(r=e.query))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]}))}))}function ds(t,e){for(var n=g(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hh(s)&&(r=!0);a.Wh=s}}r&&vs(n)}function gs(t,e,n){var r=g(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function vs(t){t.jh.forEach((function(t){t.next()}))}var ys=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ln(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){return!t.fromCache||!(this.options.sl&&"Offline"!==e||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){return t.docChanges.length>0||!!(t.xe||this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=ln.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),ms=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.il=function(){return"metadata"in this.payload},t}(),bs=function(){function t(t){this.Kt=t}return t.prototype.yc=function(t){return Nn(this.Kt,t)},t.prototype.gc=function(t){return t.metadata.exists?Ln(this.Kt,t.document,!1):new wt(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},t.prototype.Vc=function(t){return Sn(t)},t}(),_s=function(){function t(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=ws(t)}return t.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.cl=function(t){for(var e=new Map,n=new bs(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.yc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||on()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(s.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(s.d)(this,(function(o){switch(o.label){case 0:return[4,eo(this.Sh,new bs(this.Kt),this.documents,this.rl.id)];case 1:t=o.sent(),e=this.cl(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,no(this.Sh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Mi(Object.assign({},this.progress),t))]}}))}))},t}();function ws(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Es=function(t){this.key=t},Ts=function(t){this.key=t},Is=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=on(),this.Ce=on(),this.ll=ie(t),this._l=new un(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new cn,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,a=!1,u=Wt(this.query)&&i.size===this.query.limit?i.last():null,c=Gt(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var l=i.get(t),h=e instanceof _t?e:null;h&&(h=re(n.query,h)?h:null);var f=!!l&&n.Ce.has(l.key),p=!!h&&(h.bt||n.Ce.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.El(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.ll(h,u)>0||c&&n.ll(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Wt(this.query)||Gt(this.query))for(;s.size>this.query.limit;){var l=Wt(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{_l:s,wl:r,_c:a,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ei=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return p()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var s=e?this.Il():[],a=0===this.hl.size&&this.qe?1:0,u=a!==this.ul;return this.ul=a,0!==o.length||u?{snapshot:new ln(this.query,t._l,i,o,t.Ce,0===a,u,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ei({_l:this._l,wl:new cn,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=on(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new Ts(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new Es(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=on();var e=this.dl(t.documents);return this.Ei(e,!0)},t.prototype.Pl=function(){return ln.Fe(this.query,this._l,this.Ce,0===this.ul)},t}(),Os=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ss=function(t){this.key=t,this.yl=!1},Cs=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new oi((function(t){return ee(t)}),te),this.Dl=new Map,this.Cl=[],this.xl=new ze(K.J),this.Nl=new Map,this.Fl=new io,this.Ol={},this.kl=new Map,this.Ml=di.Bi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function As(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(s.d)(this,(function(s){switch(s.label){case 0:return n=ra(t),(i=n.Sl.get(e))?(n.pl.ka(i.targetId),r=i.view.Pl(),[3,4]):[3,1];case 1:return[4,$i(n.Sh,Xt(e))];case 2:return o=s.sent(),a=n.pl.ka(o.targetId),[4,ks(n,e,o.targetId,"current"===a)];case 3:r=s.sent(),n.$l&&qo(n.gl,o),s.label=4;case 4:return[2,r]}}))}))}function ks(t,e,n,r){return Object(s.b)(this,void 0,void 0,(function(){var i,o,a,u,c,l;return Object(s.d)(this,(function(h){switch(h.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return Object(s.b)(this,void 0,void 0,(function(){var i,o,a;return Object(s.d)(this,(function(s){switch(s.label){case 0:return(i=e.view.dl(n))._c?[4,Yi(t.Sh,e.query,!1).then((function(t){return e.view.dl(t.documents,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.Oe.get(e.targetId),a=e.view.Ei(i,t.$l,o),[2,(Hs(t,e.targetId,a.ml),a.snapshot)]}}))}))}(t,e,n,r)},[4,Yi(t.Sh,e,!0)];case 1:return i=h.sent(),o=new Is(e,i.Pc),a=o.dl(i.documents),u=fn.Be(n,r&&"Offline"!==t.onlineState),c=o.Ei(a,t.$l,u),Hs(t,n,c.ml),l=new Os(e,n,o),[2,(t.Sl.set(e,l),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),c.snapshot)]}}))}))}function Ns(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i;return Object(s.d)(this,(function(o){switch(o.label){case 0:return n=g(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter((function(t){return!te(t,e)}))),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,Ji(n.Sh,r.targetId,!1).then((function(){n.pl.Ba(r.targetId),Ho(n.gl,r.targetId),Vs(n,r.targetId)})).catch(ii)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Vs(n,r.targetId),[4,Ji(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function js(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var r,i,o,a;return Object(s.d)(this,(function(s){switch(s.label){case 0:r=ia(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=g(t),i=F.now(),o=e.reduce((function(t,e){return t.add(e.key)}),on());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=ke(c,n.get(c.key));null!=l&&s.push(new Re(c.key,l,mt(l.proto.mapValue),Ie.exists(!0)))}return r.Ho.Pi(t,i,s,e)}))})).then((function(t){var e=t.Ns(n);return{batchId:t.batchId,oi:e}}))}(r.Sh,e)];case 2:return i=s.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Ol[t.currentUser.R()];r||(r=new ze(m)),r=r.Ht(e,n),t.Ol[t.currentUser.R()]=r}(r,i.batchId,n),[4,zs(r,i.oi)];case 3:return s.sent(),[4,ts(r.gl)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=lr(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function xs(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r;return Object(s.d)(this,(function(i){switch(i.label){case 0:n=g(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Wi(n.Sh,e)];case 2:return r=i.sent(),e.Oe.forEach((function(t,e){var r=n.Nl.get(e);r&&(d(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?d(r.yl):t.Ke.size>0&&(d(r.yl),r.yl=!1))})),[4,zs(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ii(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Rs(t,e,n){var r=g(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=g(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&vs(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function Ps(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var r,i,o,a,u,c;return Object(s.d)(this,(function(s){switch(s.label){case 0:return(r=g(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(a=(a=new ze(K.J)).Ht(o,new wt(o,U.min())),u=on().add(o),c=new hn(U.min(),new Map,new Qe(m),a,u),[4,xs(r,c)]):[3,2];case 1:return s.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),Ks(r),[3,4];case 2:return[4,Ji(r.Sh,e,!1).then((function(){return Vs(r,e,n)})).catch(ii)];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))}function Ds(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i;return Object(s.d)(this,(function(o){switch(o.label){case 0:n=g(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ki(n.Sh,e)];case 2:return i=o.sent(),Us(n,r,null),Fs(n,r),n.pl.Fa(r,"acknowledged"),[4,zs(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ii(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ls(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var r,i;return Object(s.d)(this,(function(o){switch(o.label){case 0:r=g(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=g(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.yi(t,e).next((function(e){return d(null!==e),r=e.keys(),n.Ho.xi(t,e)})).next((function(){return n.Ho.Oi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(r.Sh,e)];case 2:return i=o.sent(),Us(r,e,n),Fs(r,e),r.pl.Fa(e,"rejected",n),[4,zs(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ii(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ms(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(s.d)(this,(function(s){switch(s.label){case 0:Go((n=g(t)).gl)||c("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=g(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.pi(t)}))}(n.Sh)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=s.sent(),a=lr(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Fs(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function Us(t,e,n){var r=g(t),i=r.Ol[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i}}function Vs(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Fl.kc(e).forEach((function(e){t.Fl.ki(e)||qs(t,e)}))}function qs(t,e){var n=t.xl.get(e);null!==n&&(Ho(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),Ks(t))}function Hs(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Es?(t.Fl.sr(o.key,e),Bs(t,o)):o instanceof Ts?(c("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.rr(o.key,e),t.Fl.ki(o.key)||qs(t,o.key)):p()}}function Bs(t,e){var n=e.key;t.xl.get(n)||(c("SyncEngine","New document in limbo: "+n),t.Cl.push(n),Ks(t))}function Ks(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new Ss(e)),t.xl=t.xl.Ht(e,n),qo(t.gl,new se(Xt(zt(e.path)),n,2,M.U))}}function zs(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var r,i,o,a;return Object(s.d)(this,(function(u){switch(u.label){case 0:return r=g(t),i=[],o=[],a=[],r.Sl.nt()?[3,3]:(r.Sl.forEach((function(t,s){a.push(r.Bl(s,e,n).then((function(t){if(t){r.$l&&r.pl.qa(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ui.cc(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return u.sent(),r.vl.uh(i),[4,function(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i,o,a,u,l,h;return Object(s.d)(this,(function(s){switch(s.label){case 0:n=g(t),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Zn.forEach(e,(function(e){return Zn.forEach(e.rc,(function(r){return n.persistence.Ii.sr(t,e.targetId,r)})).next((function(){return Zn.forEach(e.oc,(function(r){return n.persistence.Ii.rr(t,e.targetId,r)}))}))}))}))];case 2:return s.sent(),[3,4];case 3:if(!ir(r=s.sent()))throw r;return c("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)u=(a=o[i]).targetId,a.fromCache||(l=n.dc.get(u),h=l.Bt(l.Mt),n.dc=n.dc.Ht(u,h));return[2]}}))}))}(r.Sh,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Ws(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r;return Object(s.d)(this,(function(i){switch(i.label){case 0:return(n=g(t)).currentUser.isEqual(e)?[3,3]:(c("SyncEngine","User change. New user:",e.R()),[4,Bi(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new T(E.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,zs(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Gs(t,e){var n=g(t),r=n.Nl.get(e);if(r&&r.yl)return on().add(r.key);var i=on(),o=n.Dl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Sl.get(a[s]);i=i.ye(u.view.fl)}return i}function Qs(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i;return Object(s.d)(this,(function(o){switch(o.label){case 0:return[4,Yi((n=g(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&Hs(n,e.targetId,i.ml),i)]}}))}))}function $s(t){return Object(s.b)(this,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(n){return[2,Zi((e=g(t)).Sh).then((function(t){return zs(e,t)}))]}))}))}function Js(t,e,n,r){return Object(s.b)(this,void 0,void 0,(function(){var i,o;return Object(s.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=g(t),r=g(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.gi(t,e).next((function(e){return e?n.Ic.Zo(t,e):Zn.resolve(null)}))}))}((i=g(t)).Sh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,ts(i.gl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Us(i,e,r||null),Fs(i,e),function(t,e){g(g(t).Ho).Ni(e)}(i.Sh,e)):p(),s.label=4;case 4:return[4,zs(i,o)];case 5:return s.sent(),[3,7];case 6:c("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Ys(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i,o,a,u,c;return Object(s.d)(this,(function(s){switch(s.label){case 0:return ra(n=g(t)),ia(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,Xs(n,r.rt())]);case 1:return i=s.sent(),n.Ll=!0,[4,as(n.gl,!0)];case 2:for(s.sent(),o=0,a=i;o<a.length;o++)qo(n.gl,a[o]);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(u=[],c=Promise.resolve(),n.Dl.forEach((function(t,e){n.pl.$a(e)?u.push(e):c=c.then((function(){return Vs(n,e),Ji(n.Sh,e,!0)})),Ho(n.gl,e)})),[4,c]);case 4:return s.sent(),[4,Xs(n,u)];case 5:return s.sent(),function(t){var e=g(t);e.Nl.forEach((function(t,n){Ho(e.gl,n)})),e.Fl.Mc(),e.Nl=new Map,e.xl=new ze(K.J)}(n),n.Ll=!1,[4,as(n.gl,!1)];case 6:s.sent(),s.label=7;case 7:return[2]}}))}))}function Xs(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,l,h,f,p,d,v;return Object(s.d)(this,(function(s){switch(s.label){case 0:n=g(t),r=[],i=[],o=0,a=e,s.label=1;case 1:return o<a.length?(c=void 0,(l=n.Dl.get(u=a[o]))&&0!==l.length?[4,$i(n.Sh,Xt(l[0]))]:[3,7]):[3,13];case 2:c=s.sent(),h=0,f=l,s.label=3;case 3:return h<f.length?(p=n.Sl.get(f[h]),[4,Qs(n,p)]):[3,6];case 4:(d=s.sent()).snapshot&&i.push(d.snapshot),s.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Xi(n.Sh,u)];case 8:return v=s.sent(),[4,$i(n.Sh,v)];case 9:return c=s.sent(),[4,ks(n,Zs(v),u,!1)];case 10:s.sent(),s.label=11;case 11:r.push(c),s.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}}))}))}function Zs(t){return Kt(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ta(t){var e=g(t);return g(g(e.Sh).persistence).Qo()}function ea(t,e,n,r){return Object(s.b)(this,void 0,void 0,(function(){var i,o,a;return Object(s.d)(this,(function(s){switch(s.label){case 0:return(i=g(t)).Ll?(c("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Zi(i.Sh)];case 3:return o=s.sent(),a=hn.$e(e,"current"===n),[4,zs(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Ji(i.Sh,e,!0)];case 6:return s.sent(),Vs(i,e,r),[3,8];case 7:p(),s.label=8;case 8:return[2]}}))}))}function na(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var r,i,o,a,u,l,h,f,p;return Object(s.d)(this,(function(d){switch(d.label){case 0:if(!(r=ra(t)).Ll)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Dl.has(a=o[i])?(c("SyncEngine","Adding an already active target "+a),[3,5]):[4,Xi(r.Sh,a)]:[3,6];case 2:return u=d.sent(),[4,$i(r.Sh,u)];case 3:return l=d.sent(),[4,ks(r,Zs(u),l.targetId,!1)];case 4:d.sent(),qo(r.gl,l),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return Object(s.d)(this,(function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,Ji(r.Sh,t,!1).then((function(){Ho(r.gl,t),Vs(r,t)})).catch(ii)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,p=n,d.label=7;case 7:return f<p.length?[5,h(p[f])]:[3,10];case 8:d.sent(),d.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function ra(t){var e=g(t);return e.gl.Ch.Bh=xs.bind(null,e),e.gl.Ch.Sn=Gs.bind(null,e),e.gl.Ch.$h=Ps.bind(null,e),e.vl.uh=ds.bind(null,e.Vl),e.vl.ql=gs.bind(null,e.Vl),e}function ia(t){var e=g(t);return e.gl.Ch.qh=Ds.bind(null,e),e.gl.Ch.Uh=Ls.bind(null,e),e}function oa(t,e,n){var r=g(t);(function(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var r,i,o,a,u,c;return Object(s.d)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=s.sent(),[4,function(t,e){var n=g(t),r=Sn(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Eo.Ms(t,e.id)})).then((function(t){return!!t&&t.createTime.u(r)>=0}))}(t.Sh,r)];case 2:return s.sent()?[4,e.close()]:[3,4];case 3:return[2,(s.sent(),void n.Ul(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n.Ql(ws(r)),i=new _s(r,t.Sh,e.Kt),[4,e.Kl()];case 5:o=s.sent(),s.label=6;case 6:return o?[4,i.ol(o)]:[3,10];case 7:return(a=s.sent())&&n.Ql(a),[4,e.Kl()];case 8:o=s.sent(),s.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return u=s.sent(),[4,zs(t,u.zo,void 0)];case 12:return s.sent(),[4,function(t,e){var n=g(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Eo.Ls(t,e)}))}(t.Sh,r)];case 13:return s.sent(),n.Ul(u.progress),[3,15];case 14:return h("SyncEngine","Loading bundle failed with "+(c=s.sent())),n.Wl(c),[3,15];case 15:return[2]}}))}))})(r,e,n).then((function(){r.pl.ja()}))}var sa=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(e){switch(e.label){case 0:return this.Kt=jo(t.gu.T),this.pl=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Hi(this.persistence,new Vi,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new lo(fo.ra,this.Kt)},t.prototype.jl=function(t){return new To},t.prototype.terminate=function(){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.Lo()];case 1:return t.sent(),[4,this.persistence.Lo()];case 2:return t.sent(),[2]}}))}))},t}(),aa=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(s.c)(e,t),e.prototype.initialize=function(e){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,to(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,ia(this.Xl.fa)];case 4:return n.sent(),[4,ts(this.Xl.gl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return Hi(this.persistence,new Vi,t.Yl,this.Kt)},e.prototype.Hl=function(t){return new wi(this.persistence.Ii._r,t.fs)},e.prototype.Gl=function(t){var e=Li(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?ri.Xs(this.cacheSizeBytes):ri.ei;return new Ri(this.synchronizeTabs,e,t.clientId,n,t.fs,ko(),No(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.jl=function(t){return new To},e}(sa),ua=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(s.c)(e,t),e.prototype.initialize=function(e){return Object(s.b)(this,void 0,void 0,(function(){var n,r=this;return Object(s.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof Eo?(this.pl.fa={nu:Js.bind(null,n),su:ea.bind(null,n),iu:na.bind(null,n),Qo:ta.bind(null,n),eu:$s.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Po((function(t){return Object(s.b)(r,void 0,void 0,(function(){return Object(s.d)(this,(function(e){switch(e.label){case 0:return[4,Ys(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Tr?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jl=function(t){var e=ko();if(!Eo.Wn(e))throw new T(E.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Li(t.gu.T,t.gu.persistenceKey);return new Eo(e,t.fs,n,t.clientId,t.Yl)},e}(aa),ca=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n=this;return Object(s.d)(this,(function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return Rs(n.fa,t,1)},this.gl.Ch.s_=Ws.bind(null,this.fa),[4,as(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new hs},t.prototype.Zl=function(t){var e=jo(t.gu.T),n=new Ao(t.gu);return function(t,e,n){return new Lo(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return Rs(s.fa,t,0)},o=Oo.Wn()?new Oo:new Io,new Fo(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Cs(t,e,n,r,i,o);return s&&(a.Ll=!0),a}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return Object(s.b)(this,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(n){switch(n.label){case 0:return e=g(t),c("RemoteStore","RemoteStore shutting down."),e.Fh.add(5),[4,Vo(e)];case 1:return n.sent(),e.kh.Lo(),e.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}();function la(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(s.b)(this,void 0,void 0,(function(){var r;return Object(s.d)(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(t){return[2]}))}))},releaseLock:function(){}}}var ha=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),fa=function(){function t(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new Xn,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then((function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.o_.cancel()},t.prototype.getMetadata=function(){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Kl=function(){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}}))}))},t.prototype.a_=function(){return Object(s.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(s.d)(this,(function(i){switch(i.label){case 0:return[4,this.u_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.c_.decode(t),n=Number(e),isNaN(n)&&this.h_("length string ("+e+") is not valid number"),[4,this.l_(n)]);case 2:return r=i.sent(),[2,new ms(JSON.parse(r),t.length+n)]}}))}))},t.prototype.__=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.u_=function(){return Object(s.b)(this,void 0,void 0,(function(){var t,e;return Object(s.d)(this,(function(n){switch(n.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.l_=function(t){return Object(s.b)(this,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.f_()]:[3,3];case 1:n.sent()&&this.h_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.f_=function(){return Object(s.b)(this,void 0,void 0,(function(){var t,e;return Object(s.d)(this,(function(n){switch(n.label){case 0:return[4,this.o_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),pa=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new T(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new B(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}(),da=function(t){this._methodName=t};function ga(t,e,n){if(!n)throw new T(E.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function va(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new T(E.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ya(t,e,n,r){if(!0===e&&!0===r)throw new T(E.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ma(t){if(!K.Et(t))throw new T(E.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function ba(t){if(K.Et(t))throw new T(E.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function _a(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":p()}function wa(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new T(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=_a(t);throw new T(E.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ea(t,e){if(e<=0)throw new T(E.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Ta=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new T(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new T(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ya("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Ia=new Map,Oa=function(){function t(t,e){this.w_="(lite)",this.E_=new Ta({}),this.T_=!1,t instanceof N?(this.I_=t,this.m_=new R):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new T(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new N(t.options.projectId)}(t),this.m_=new P(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new T(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new T(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Ta(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new R;switch(t.type){case"gapi":var e=t.client;return d(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new L(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new T(E.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return(t=Ia.get(this))&&(c("ComponentProvider","Removing Datastore"),Ia.delete(this),t.terminate()),Promise.resolve();var t},t}(),Sa=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Aa(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Ca=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Aa=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,zt(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(s.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new Sa(this.firestore,null,new K(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Ca);function ka(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof O&&(t=t._),ga("collection","path",e),t instanceof Oa)return ba(n=q.ct.apply(q,Object(s.g)([e],r))),new Aa(t,null,n);if(!(t instanceof Sa||t instanceof Aa))throw new T(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ba(n=q.ct.apply(q,Object(s.g)([t.path],r)).child(q.ct(e))),new Aa(t.firestore,null,n)}function Na(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof O&&(t=t._),1===arguments.length&&(e=y.t()),ga("doc","path",e),t instanceof Oa)return ma(n=q.ct.apply(q,Object(s.g)([e],r))),new Sa(t,null,new K(n));if(!(t instanceof Sa||t instanceof Aa))throw new T(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ma(n=t.D_.child(q.ct.apply(q,Object(s.g)([e],r)))),new Sa(t.firestore,t instanceof Aa?t.v_:null,new K(n))}function ja(t,e){return t instanceof O&&(t=t._),e instanceof O&&(e=e._),(t instanceof Sa||t instanceof Aa)&&(e instanceof Sa||e instanceof Aa)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function xa(t,e){return t instanceof O&&(t=t._),e instanceof O&&(e=e._),t instanceof Ca&&e instanceof Ca&&t.firestore===e.firestore&&te(t.C_,e.C_)&&t.v_===e.v_}var Ra=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new T(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new T(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return m(this.x_,t.x_)||m(this.N_,t.N_)},t}(),Pa=/^__.*__$/,Da=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.zt?new Re(t,this.data,this.zt,e,this.fieldTransforms):new xe(t,this.data,e,this.fieldTransforms)},t}(),La=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Re(t,this.data,this.zt,e,this.fieldTransforms)},t}();function Ma(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw p()}}var Fa=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return iu(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Ma(this.k_)&&Pa.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Ua=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||jo(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Fa({k_:t,methodName:e,j_:n,path:B.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function Va(t){var e=t.p_(),n=jo(t.I_);return new Ua(t.I_,!!e.ignoreUndefinedProperties,n)}function qa(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);tu("Data must be an object, but it was:",s,r);var a,u,c=Xa(r,s);if(o.merge)a=new Q(s.zt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=eu(e,f[h],n);if(!s.contains(p))throw new T(E.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");ou(l,p)||l.push(p)}a=new Q(l),u=s.fieldTransforms.filter((function(t){return a.It(t.field)}))}else a=null,u=s.fieldTransforms;return new Da(new vt(c),a,u)}var Ha=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(da);function Ba(t,e,n){return new Fa({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var Ka=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.z_=function(t){return new Ee(t.path,new de)},e.prototype.isEqual=function(t){return t instanceof e},e}(da),za=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(s.c)(e,t),e.prototype.z_=function(t){var e=Ba(this,t,!0),n=this.H_.map((function(t){return Ya(t,e)})),r=new ge(n);return new Ee(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(da),Wa=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(s.c)(e,t),e.prototype.z_=function(t){var e=Ba(this,t,!0),n=this.H_.map((function(t){return Ya(t,e)})),r=new ye(n);return new Ee(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(da),Ga=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(s.c)(e,t),e.prototype.z_=function(t){var e=new be(t.Kt,ce(t.Kt,this.J_));return new Ee(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(da);function Qa(t,e,n,r){var i=t.G_(1,e,n);tu("Data must be an object, but it was:",i,r);var o=[],s=new yt;W(r,(function(t,r){var a=ru(e,t,n);r instanceof O&&(r=r._);var u=i.U_(a);if(r instanceof Ha)o.push(a);else{var c=Ya(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Q(o);return new La(s.yt(),a,i.fieldTransforms)}function $a(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[eu(e,r,n)],u=[i];if(o.length%2!=0)throw new T(E.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(eu(e,o[c])),u.push(o[c+1]);for(var l=[],h=new yt,f=a.length-1;f>=0;--f)if(!ou(l,a[f])){var p=a[f],d=u[f];d instanceof O&&(d=d._);var g=s.U_(p);if(d instanceof Ha)l.push(p);else{var v=Ya(d,g);null!=v&&(l.push(p),h.set(p,v))}}var y=new Q(l);return new La(h.yt(),y,s.fieldTransforms)}function Ja(t,e,n,r){return void 0===r&&(r=!1),Ya(n,t.G_(r?4:3,e))}function Ya(t,e){if(t instanceof O&&(t=t._),Za(t))return tu("Unsupported field value:",e,t),Xa(t,e);if(t instanceof da)return function(t,e){if(!Ma(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ya(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof O&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ce(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=F.fromDate(t);return{timestampValue:Tn(e.Kt,n)}}if(t instanceof F)return n=new F(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Tn(e.Kt,n)};if(t instanceof Ra)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof I)return{bytesValue:In(e.Kt,t.l)};if(t instanceof Sa){var r=t.firestore.I_;if(!r.isEqual(n=e.T))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Cn(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+_a(t))}(t,e)}function Xa(t,e){var n={};return G(t)?e.path&&e.path.length>0&&e.zt.push(e.path):W(t,(function(t,r){var i=Ya(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Za(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof F||t instanceof Ra||t instanceof I||t instanceof Sa||t instanceof da)}function tu(t,e,n){if(!Za(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=_a(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function eu(t,e,n){if(e instanceof O&&(e=e._),e instanceof pa)return e.d_;if("string"==typeof e)return ru(t,e);throw iu("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var nu=new RegExp("[~\\*/\\[\\]]");function ru(t,e,n){if(e.search(nu)>=0)throw iu("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(pa.bind.apply(pa,Object(s.g)([void 0],e.split("."))))).d_}catch(r){throw iu("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function iu(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new T(E.INVALID_ARGUMENT,(a+=". ")+t+u)}function ou(t,e){return t.some((function(t){return t.isEqual(e)}))}var su=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(s.b)(this,void 0,void 0,(function(){var e,n=this;return Object(s.d)(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new T(E.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i,o,a,u;return Object(s.d)(this,(function(s){switch(s.label){case 0:return n=g(t),r=Rn(n.Kt)+"/documents",i={documents:e.map((function(t){return kn(n.Kt,t)}))},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=s.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){d(!!e.found);var n=Nn(t,e.found.name),r=Sn(e.found.updateTime),i=new vt({mapValue:{fields:e.found.fields}});return new _t(n,r,i,{})}(t,e):"missing"in e?function(t,e){d(!!e.missing),d(!!e.readTime);var n=Nn(t,e.missing),r=Sn(e.readTime);return new wt(n,r)}(t,e):p()}(n.Kt,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());d(!!e),u.push(e)})),u)]}}))}))}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof wt||t instanceof _t?n.sf(t):p()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Ve(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(s.b)(this,void 0,void 0,(function(){var t,e=this;return Object(s.d)(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=K.ft(n);e.mutations.push(new qe(r,e.Gt(r)))})),[4,function(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i;return Object(s.d)(this,(function(o){switch(o.label){case 0:return n=g(t),r=Rn(n.Kt)+"/documents",i={writes:e.map((function(t){return Mn(n.Kt,t)}))},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof _t)e=t.version;else{if(!(t instanceof wt))throw p();e=U.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new T(E.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Ie.updateTime(e):Ie.Wt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(U.min()))throw new T(E.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ie.updateTime(e)}return Ie.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),au=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new xo(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return Object(s.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(s.d)(this,(function(r){return t=new su(this.Dh),(e=this.uf(t))&&e.then((function(e){n.fs.ys((function(){return t.commit().then((function(){n.Ts.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!et(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Be(e)}return!1},t}(),uu=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=j.UNAUTHENTICATED,this.clientId=y.t(),this._f=function(){},this.N=new Xn,this.credentials.S((function(t){c("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new T(E.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new Xn;return this.fs.Tf((function(){return Object(s.b)(t,void 0,void 0,(function(){var t,n;return Object(s.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=lr(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function cu(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(s.d)(this,(function(o){switch(o.label){case 0:return t.fs.Af(),c("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff((function(n){r.isEqual(n)||(r=n,t.fs.bo((function(){return Object(s.b)(i,void 0,void 0,(function(){return Object(s.d)(this,(function(t){switch(t.label){case 0:return[4,Bi(e.Sh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.yo((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function lu(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r;return Object(s.d)(this,(function(i){switch(i.label){case 0:return t.fs.Af(),[4,hu(t)];case 1:return n=i.sent(),c("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.fs.bo((function(){return function(t,e){return Object(s.b)(this,void 0,void 0,(function(){var n,r;return Object(s.d)(this,(function(i){switch(i.label){case 0:return(n=g(t)).fs.Af(),c("RemoteStore","RemoteStore received new credentials"),r=Go(n),n.Fh.add(3),[4,Vo(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Fh.delete(3),[4,Uo(n)];case 3:return i.sent(),[2]}}))}))}(e.gl,n)}))})),t.If=e,[2]}}))}))}function hu(t){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(c("FirestoreClient","Using default OfflineComponentProvider"),[4,cu(t,new sa)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function fu(t){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(c("FirestoreClient","Using default OnlineComponentProvider"),[4,lu(t,new ca)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function pu(t){return hu(t).then((function(t){return t.persistence}))}function du(t){return hu(t).then((function(t){return t.Sh}))}function gu(t){return fu(t).then((function(t){return t.gl}))}function vu(t){return fu(t).then((function(t){return t.fa}))}function yu(t){return Object(s.b)(this,void 0,void 0,(function(){var e,n;return Object(s.d)(this,(function(r){switch(r.label){case 0:return[4,fu(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=As.bind(null,e.fa),n.Jh=Ns.bind(null,e.fa),n)]}}))}))}function mu(t,e,n){var r=this;void 0===n&&(n={});var i=new Xn;return t.fs.ys((function(){return Object(s.b)(r,void 0,void 0,(function(){var r;return Object(s.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ha({next:function(o){e.ys((function(){return ps(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new T(E.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new T(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new ys(zt(n.path),o,{includeMetadataChanges:!0,sl:!0});return fs(t,s)},[4,yu(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}function bu(t,e,n){var r=this;void 0===n&&(n={});var i=new Xn;return t.fs.ys((function(){return Object(s.b)(r,void 0,void 0,(function(){var r;return Object(s.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ha({next:function(n){e.ys((function(){return ps(t,s)})),n.fromCache&&"server"===r.source?i.reject(new T(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new ys(n,o,{includeMetadataChanges:!0,sl:!0});return fs(t,s)},[4,yu(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}var _u=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new xo(this,"async_queue_retry"),this.vf=function(){var e=No();e&&c("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=No();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=No();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.bo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Object(s.b)(this,void 0,void 0,(function(){var t,e=this;return Object(s.d)(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!ir(t=n.sent()))throw t;return c("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,l("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Ir=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=cr.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&p()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(s.b)(this,void 0,void 0,(function(){var t;return Object(s.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),wu=-1,Eu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new _u,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(s.c)(e,t),e.prototype.b_=function(){return this.Lf||Iu(this),this.Lf.terminate()},e}(Oa);function Tu(t){return t.Lf||Iu(t),t.Lf.df(),t.Lf}function Iu(t){var e=t.p_(),n=function(t,e,n){return new k(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new uu(t.m_,t.Mf,n)}function Ou(t,e,n){var r=this,i=new Xn;return t.fs.enqueue((function(){return Object(s.b)(r,void 0,void 0,(function(){var r;return Object(s.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,cu(t,n)];case 1:return o.sent(),[4,lu(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===E.FAILED_PRECONDITION||t.code===E.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Su(t){if(t.R_||t.P_)throw new T(E.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Cu=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),it(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Y(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(X(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw p()}},t.prototype.jf=function(t,e){var n=this,r={};return W(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new Ra(Y(t.latitude),Y(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return Z(n)?t(n):n}(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(tt(t));default:return null}},t.prototype.Bf=function(t){var e=J(t);return new F(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=q.ct(t);d(Yn(n));var r=new N(n.get(1),n.get(3)),i=new K(n.X(5));return r.isEqual(e)||l("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Au=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Sa(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new ku(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Nu("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),ku=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Au);function Nu(t,e){return"string"==typeof e?ru(t,e):e instanceof O?e._.d_:e.d_}function ju(t){if(Gt(t)&&0===t.Nt.length)throw new T(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xu=function(){};function Ru(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Pu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return Object(s.c)(e,t),e.prototype.Yf=function(t){var e=Va(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new T(E.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){qu(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Vu(r,t,l[c]));a={arrayValue:{values:u}}}else a=Vu(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||qu(s,o),a=Ja(n,"where",s,"in"===o||"not-in"===o);var h=At.create(i,o,a);return function(t,e){if(e.xt()){var n=$t(t);if(null!==n&&!n.isEqual(e.field))throw new T(E.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Qt(t);null!==r&&Hu(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new T(E.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new Ca(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Bt(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(xu),Du=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return Object(s.c)(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new T(E.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new T(E.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ut(e,n);return function(t,e){if(null===Qt(t)){var n=$t(t);null!==n&&Hu(0,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Ca(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new Bt(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(xu),Lu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return Object(s.c)(e,t),e.prototype.Yf=function(t){return new Ca(t.firestore,t.v_,Zt(t.C_,this.nd,this.sd))},e}(xu),Mu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(s.c)(e,t),e.prototype.Yf=function(t){var e=Uu(t,this.type,this.rd,this.od);return new Ca(t.firestore,t.v_,function(t,e){return new Bt(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(xu),Fu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(s.c)(e,t),e.prototype.Yf=function(t){var e=Uu(t,this.type,this.rd,this.od);return new Ca(t.firestore,t.v_,function(t,e){return new Bt(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(xu);function Uu(t,e,n,r){if(n[0]instanceof O&&(n[0]=n[0]._),n[0]instanceof Au)return function(t,e,n,r,i){if(!r)throw new T(E.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Yt(t);s<a.length;s++){var u=a[s];if(u.field.ht())o.push(lt(e,r.key));else{var c=r.field(u.field);if(Z(c))throw new T(E.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.ot();throw new T(E.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Mt(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=Va(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new T(E.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ht()){if("string"!=typeof c)throw new T(E.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Jt(t)&&-1!==c.indexOf("/"))throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(q.ct(c));if(!K.Et(l))throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new K(l);a.push(lt(e,h))}else{var f=Ja(n,r,c);a.push(f)}}return new Mt(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Vu(t,e,n){if(n instanceof O&&(n=n._),"string"==typeof n){if(""===n)throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jt(e)&&-1!==n.indexOf("/"))throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(q.ct(n));if(!K.Et(r))throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return lt(t,new K(r))}if(n instanceof Sa)return lt(t,n.S_);throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+_a(n)+".")}function qu(t,e){if(!Array.isArray(t)||0===t.length)throw new T(E.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new T(E.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Hu(t,e,n){if(!n.isEqual(e))throw new T(E.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Bu(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function Ku(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var zu=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(s.c)(e,t),e.prototype.Uf=function(t){return new I(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Sa(this.firestore,null,e)},e}(Cu),Wu=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Gu=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).zf=e,a.ad=e,a.metadata=o,a}return Object(s.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new Qu(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Nu("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(Au),Qu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Gu),$u=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new Wu(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new Qu(n.zf,n.Hf,r.key,r,new Wu(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new T(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){return{type:"added",doc:new Qu(t.zf,t.Hf,e.doc.key,e.doc,new Wu(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Qu(t.zf,t.Hf,e.doc.key,e.doc,new Wu(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Ju(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function Ju(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return p()}}function Yu(t,e){return t instanceof Gu&&e instanceof Gu?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof $u&&e instanceof $u&&t.zf===e.zf&&xa(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var Xu=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(s.c)(e,t),e.prototype.Uf=function(t){return new I(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Sa(this.firestore,null,e)},e}(Cu);function Zu(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=wa(t,Sa);var o=wa(t.firestore,Eu),s=Va(o);return e instanceof O&&(e=e._),ec(o,[("string"==typeof e||e instanceof pa?$a(s,"updateDoc",t.S_,e,n,r):Qa(s,"updateDoc",t.S_,e)).F_(t.S_,Ie.exists(!0))])}function tc(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof O&&(t=t._);var a={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||Bu(i[u])||(a=i[u],u++);var c,l,h,f={includeMetadataChanges:a.includeMetadataChanges};if(Bu(i[u])){var p=i[u];i[u]=null===(e=p.next)||void 0===e?void 0:e.bind(p),i[u+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),i[u+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}if(t instanceof Sa)l=wa(t.firestore,Eu),h=zt(t.S_.path),c={next:function(e){i[u]&&i[u](nc(l,t,e))},error:i[u+1],complete:i[u+2]};else{var d=wa(t,Ca);l=wa(d.firestore,Eu),h=d.C_;var g=new Xu(l);c={next:function(t){i[u]&&i[u](new $u(l,g,d,t))},error:i[u+1],complete:i[u+2]},ju(t.C_)}return function(t,e,n,r){var i=this,o=new ha(r),a=new ys(e,o,n);return t.fs.ys((function(){return Object(s.b)(i,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(n){switch(n.label){case 0:return e=fs,[4,yu(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.r_(),t.fs.ys((function(){return Object(s.b)(i,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(n){switch(n.label){case 0:return e=ps,[4,yu(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Tu(l),h,f,c)}function ec(t,e){return function(t,e){var n=this,r=new Xn;return t.fs.ys((function(){return Object(s.b)(n,void 0,void 0,(function(){var n;return Object(s.d)(this,(function(i){switch(i.label){case 0:return n=js,[4,vu(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Tu(t),e)}function nc(t,e,n){var r=n.docs.get(e.S_),i=new Xu(t);return new Gu(t,i,e.S_,r,new Wu(n.hasPendingWrites,n.fromCache),e.v_)}var rc=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Va(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=ic(t,this.zf),i=Ku(r.v_,e,n),o=qa(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,Ie.Wt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=ic(t,this.zf);return e instanceof O&&(e=e._),o="string"==typeof e||e instanceof pa?$a(this.wd,"WriteBatch.update",s.S_,e,n,r):Qa(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,Ie.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=ic(t,this.zf);return this.fd=this.fd.concat(new Ve(e.S_,Ie.Wt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new T(E.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function ic(t,e){if(t instanceof O&&(t=t._),t.firestore!==e)throw new T(E.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var oc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return Object(s.c)(e,t),e.prototype.get=function(e){var n=this,r=ic(e,this.zf),i=new Xu(this.zf);return t.prototype.get.call(this,e).then((function(t){return new Gu(n.zf,i,r.S_,t.Jf,new Wu(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Va(t)}return t.prototype.get=function(t){var e=this,n=ic(t,this.zf),r=new zu(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return p();var i=t[0];if(i instanceof wt)return new Au(e.zf,r,n.S_,null,n.v_);if(i instanceof _t)return new Au(e.zf,r,i.key,i,n.v_);throw p()}))},t.prototype.set=function(t,e,n){var r=ic(t,this.zf),i=Ku(r.v_,e,n),o=qa(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=ic(t,this.zf);return e instanceof O&&(e=e._),o="string"==typeof e||e instanceof pa?$a(this.wd,"Transaction.update",s.S_,e,n,r):Qa(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=ic(t,this.zf);return this.Td.delete(e.S_),this},t}()),sc=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Su(t=wa(t,Eu));var n=Tu(t),r=t.p_(),i=new ca;return Ou(n,i,new aa(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Su(t=wa(t,Eu));var e=Tu(t),n=t.p_(),r=new ca;return Ou(e,r,new ua(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new T(E.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Xn;return t.Mf.Tf((function(){return Object(s.b)(e,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(e){switch(e.label){case 0:return er.Wn()?[4,er.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(Li(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),ac=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof N||(i.md=e),i}return Object(s.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=wa(t,Oa)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&h("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return Object(s.b)(e,void 0,void 0,(function(){var e,n;return Object(s.d)(this,(function(r){switch(r.label){case 0:return[4,pu(t)];case 1:return e=r.sent(),[4,gu(t)];case 2:return n=r.sent(),[2,(e.Vo(!0),function(t){var e=g(t);return e.Fh.delete(0),Uo(e)}(n))]}}))}))}))}(Tu(wa(this._,Eu)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return Object(s.b)(e,void 0,void 0,(function(){var e,n;return Object(s.d)(this,(function(r){switch(r.label){case 0:return[4,pu(t)];case 1:return e=r.sent(),[4,gu(t)];case 2:return n=r.sent(),[2,(e.Vo(!1),function(t){return Object(s.b)(this,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(n){switch(n.label){case 0:return(e=g(t)).Fh.add(0),[4,Vo(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Tu(wa(this._,Eu)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ya("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Xn;return t.fs.ys((function(){return Object(s.b)(e,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(r){switch(r.label){case 0:return e=Ms,[4,vu(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Tu(wa(this._,Eu)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ha(e);return t.fs.ys((function(){return Object(s.b)(n,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){g(t).jh.add(e),e.next()},[4,yu(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.r_(),t.fs.ys((function(){return Object(s.b)(n,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){g(t).jh.delete(e)},[4,yu(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Tu(t=wa(t,Eu)),Bu(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new T(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Ec(this,ka(this._,t))}catch(t){throw dc(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new pc(this,Na(this._,t))}catch(t){throw dc(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new bc(this,function(t,e){if(t=wa(t,Oa),ga("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new T(E.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ca(t,null,function(t){return new Bt(q.at(),t)}(e))}(this._,t))}catch(t){throw dc(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Xn;return t.fs.ys((function(){return Object(s.b)(n,void 0,void 0,(function(){var n;return Object(s.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return fu(t).then((function(t){return t.Dh}))}(t)];case 1:return n=i.sent(),new au(t.fs,n,e,r).run(),[2]}}))}))})),r.promise}(Tu(t),(function(n){return e(new oc(t,n))}))}(this._,(function(n){return t(new lc(e,n))}))},e.prototype.batch=function(){var t=this;return Tu(this._),new hc(new rc(this._,(function(e){return ec(t._,e)})))},e.prototype.loadBundle=function(t){throw new T(E.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new T(E.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(O),uc=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(s.c)(e,t),e.prototype.Uf=function(t){return new A(new I(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return pc.Ad(e,this.firestore,null)},e}(Cu);function cc(t){a.setLogLevel(t)}var lc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r.Hf=new uc(e),r}return Object(s.c)(e,t),e.prototype.get=function(t){var e=this,n=Tc(t);return this._.get(n).then((function(t){return new yc(e.zf,new Gu(e.zf._,e.Hf,t.S_,t.Jf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=Tc(t);return n?(va("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Tc(t);return 2===arguments.length?this._.update(a,e):(r=this._).update.apply(r,Object(s.g)([a,e,n],i)),this},e.prototype.delete=function(t){var e=Tc(t);return this._.delete(e),this},e}(O),hc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.set=function(t,e,n){var r=Tc(t);return n?(va("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Tc(t);return 2===arguments.length?this._.update(a,e):(r=this._).update.apply(r,Object(s.g)([a,e,n],i)),this},e.prototype.delete=function(t){var e=Tc(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(O),fc=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).zf=e,i.Hf=n,i}return Object(s.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new Qu(this.zf._,this.Hf,t.S_,t.Jf,t.metadata,null);return this._.fromFirestore(new mc(this.zf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._.toFirestore(t,e):this._.toFirestore(t)},e.Rd=function(t,n){var r=e.Pd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new uc(t),n),i.set(n,o)),o},e}(O);fc.Pd=new WeakMap;var pc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new uc(e),r}return Object(s.c)(e,t),e.yd=function(t,n,r){if(t.length%2!=0)throw new T(E.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new Sa(n._,r,new K(t)))},e.Ad=function(t,n,r){return new e(n,new Sa(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ec(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Ec(this.firestore,ka(this._,t))}catch(t){throw dc(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof O&&(t=t._),t instanceof Sa&&ja(this._,t)},e.prototype.set=function(t,e){e=va("DocumentReference.set",e);try{return function(t,e,n){t=wa(t,Sa);var r=wa(t.firestore,Eu),i=Ku(t.v_,e,n);return ec(r,[qa(Va(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Ie.Wt())])}(this._,t,e)}catch(t){throw dc(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Zu(this._,t):Zu.apply(void 0,Object(s.g)([this._,t,e],n))}catch(t){throw dc(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return ec(wa((t=this._).firestore,Eu),[new Ve(t.S_,Ie.Wt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=gc(e),i=vc(e,(function(e){return new yc(t.firestore,new Gu(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return tc(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=wa(t,Sa);var e=wa(t.firestore,Eu),n=Tu(e),r=new Xu(e);return function(t,e){var n=this,r=new Xn;return t.fs.ys((function(){return Object(s.b)(n,void 0,void 0,(function(){var n;return Object(s.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var r,i;return Object(s.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=g(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof _t?n.resolve(i):i instanceof wt?n.resolve(null):n.reject(new T(E.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=lr(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,du(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Gu(e,r,t.S_,n,new Wu(n instanceof _t&&n.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=wa(t,Sa);var e=wa(t.firestore,Eu);return mu(Tu(e),t.S_,{source:"server"}).then((function(n){return nc(e,t,n)}))}(this._):function(t){t=wa(t,Sa);var e=wa(t.firestore,Eu);return mu(Tu(e),t.S_).then((function(n){return nc(e,t,n)}))}(this._)).then((function(t){return new yc(e.firestore,new Gu(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(fc.Rd(this.firestore,t)))},e}(O);function dc(t,e,n){return t.message=t.message.replace(e,n),t}function gc(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Bu(r))return r}return{}}function vc(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Bu(t[0])?t[0]:Bu(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var yc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(s.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new pc(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return Yu(this._,t._)},e}(O),mc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.data=function(t){return this._.data(t)},e}(yc),bc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new uc(e),r}return Object(s.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Ru(this._,function(t,e,n){var r=e,i=Nu("where",t);return new Pu(i,r,n)}(t,n,r)))}catch(t){throw dc(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Ru(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Nu("orderBy",t);return new Du(r,n)}(t,n)))}catch(t){throw dc(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Ru(this._,function(t){return Ea("limit",t),new Lu("limit",t,"F")}(t)))}catch(t){throw dc(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Ru(this._,function(t){return Ea("limitToLast",t),new Lu("limitToLast",t,"L")}(t)))}catch(t){throw dc(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ru(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mu("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw dc(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ru(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mu("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw dc(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ru(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fu("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw dc(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ru(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fu("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw dc(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return xa(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=wa(t,Ca);var e=wa(t.firestore,Eu),n=Tu(e),r=new Xu(e);return function(t,e){var n=this,r=new Xn;return t.fs.ys((function(){return Object(s.b)(n,void 0,void 0,(function(){var n;return Object(s.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(s.b)(this,void 0,void 0,(function(){var r,i,o,a,u;return Object(s.d)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,Yi(t,e,!0)];case 1:return u=s.sent(),r=new Is(e,u.Pc),i=r.dl(u.documents),o=r.Ei(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=s.sent(),u=lr(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,du(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new $u(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=wa(t,Ca);var e=wa(t.firestore,Eu),n=Tu(e),r=new Xu(e);return bu(n,t.C_,{source:"server"}).then((function(n){return new $u(e,r,t,n)}))}(this._):function(t){t=wa(t,Ca);var e=wa(t.firestore,Eu),n=Tu(e),r=new Xu(e);return ju(t.C_),bu(n,t.C_).then((function(n){return new $u(e,r,t,n)}))}(this._)).then((function(t){return new wc(e.firestore,new $u(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=gc(e),i=vc(e,(function(e){return new wc(t.firestore,new $u(t.firestore._,t.Hf,t._,e.ud))}));return tc(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(fc.Rd(this.firestore,t)))},e}(O),_c=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(s.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new mc(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(O),wc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(s.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new bc(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new mc(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new _c(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new mc(n.zf,r))}))},e.prototype.isEqual=function(t){return Yu(this._,t._)},e}(O),Ec=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return Object(s.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new pc(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new pc(this.firestore,void 0===t?Na(this._):Na(this._,t))}catch(t){throw dc(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=wa(t.firestore,Eu),r=Na(t),i=Ku(t.v_,e);return ec(n,[qa(Va(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Ie.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new pc(e.firestore,t)}))},e.prototype.isEqual=function(t){return ja(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(fc.Rd(this.firestore,t)))},e}(bc);function Tc(t){return t instanceof O&&(t=t._),wa(t,Sa)}var Ic=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(pa.bind.apply(pa,Object(s.g)([void 0],e))))||this}return Object(s.c)(e,t),e.documentId=function(){return new e(B.lt().ot())},e.prototype.isEqual=function(t){return t instanceof O&&(t=t._),t instanceof pa&&this._.d_.isEqual(t.d_)},e}(O),Oc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.serverTimestamp=function(){var t=new Ka("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Ha("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new za("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wa("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Ga("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(O),Sc=function(){function t(){this.gd={},this.Vd=new Xn,this.pd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this.gd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Vd.promise.catch(t)},t.prototype.then=function(t,e){return this.Vd.promise.then(t,e)},t.prototype.Ul=function(t){this.Ql(t),this.gd.complete&&this.gd.complete(),this.Vd.resolve(t)},t.prototype.Wl=function(t){this.pd.taskState="Error",this.gd.next&&this.gd.next(this.pd),this.gd.error&&this.gd.error(t),this.Vd.reject(t)},t.prototype.Ql=function(t){this.pd=t,this.gd.next&&this.gd.next(t)},t}();function Cc(t,e){var n=new Sc;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new fa(t,e)}(function(t,e){if(t instanceof Uint8Array)return la(t,e);if(t instanceof ArrayBuffer)return la(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,jo(e));t.fs.ys((function(){return Object(s.b)(i,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(n){switch(n.label){case 0:return e=oa,[4,vu(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(Tu(t._),t.I_,e,n),n}function Ac(t,e){return function(t,e){var n=this;return t.fs.enqueue((function(){return Object(s.b)(n,void 0,void 0,(function(){var n;return Object(s.d)(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=g(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Eo.$s(t,e)}))},[4,du(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Tu(t._),e).then((function(e){return e?new bc(t,new Ca(t._,null,e.query)):null}))}},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},IzEk:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function s(t){return e=>0===t?Object(o.b)():e.lift(new a(t))}class a{constructor(t){if(this.total=t,this.total<0)throw new i.a}call(t,e){return e.subscribe(new u(t,this.total))}}class u extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}},JX91:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("LRne"),i=n("0EUg");function o(...t){return Object(i.a)()(Object(r.a)(...t))}var s=n("z+Ro");function a(...t){const e=t[t.length-1];return Object(s.a)(e)?(t.pop(),n=>o(t,n,e)):e=>o(t,e)}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.2.4","app")},Kqap:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}class o{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))}}class s extends r.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},SxV6:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("sVev"),i=n("pLZG"),o=n("IzEk"),s=n("xbPD"),a=n("XDbj"),u=n("SpAZ");function c(t,e){const n=arguments.length>=2;return c=>c.pipe(t?Object(i.a)((e,n)=>t(e,n,c)):u.a,Object(o.a)(1),n?Object(s.a)(e):Object(a.a)(()=>new r.a))}},UbJi:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return x})),n.d(e,"c",(function(){return O}));var r=n("fXoL"),i=n("XNiG"),o=n("LRne"),s=n("HDdC"),a=n("Cfvw"),u=n("VRyK"),c=n("pxpQ"),l=n("eIep"),h=n("lJxs"),f=n("qgXg"),p=n("quSY"),d=n("9ppp"),g=n("Ylt2");class v extends i.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new y(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new d.a;if(this.isStopped||this.hasError?o=p.a.EMPTY:(this.observers.push(t),o=new g.a(this,t)),r&&t.add(t=new c.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||f.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class y{constructor(t,e){this.time=t,this.value=e}}function m(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new v(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}var b=n("SxV6");function _(t,e){return e?Object(l.a)(()=>t,e):Object(l.a)(()=>t)}var w=n("tf+s"),E=n("pLZG"),T=n("spgP"),I=n("ofXK");const O=new r.q("angularfire2.auth.use-emulator"),S=new r.q("angularfire2.auth.settings"),C=new r.q("angularfire2.auth.tenant-id"),A=new r.q("angularfire2.auth.langugage-code"),k=new r.q("angularfire2.auth.use-device-language"),N=new r.q("angularfire.auth.persistence");let j=(()=>{class t{constructor(t,e,r,f,p,d,g,v,y,O){const S=new T.d(f),C=Object(T.h)(S),A=new i.a,k=Object(o.a)(void 0).pipe(Object(c.b)(S.outsideAngular),Object(l.a)(()=>f.runOutsideAngular(()=>n.e(9).then(n.bind(null,"6nsN")))),Object(h.a)(()=>Object(T.g)(t,f,e)),Object(h.a)(t=>f.runOutsideAngular(()=>{const e=p,n=d;return Object(T.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=f.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),g&&(r.tenantId=g),r.languageCode=v,y&&r.useDeviceLanguage(),n&&(r.settings=n),O&&r.setPersistence(O),r},[e,g,v,y,n,O])})),m({bufferSize:1,refCount:!1}));if(Object(I.m)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(o.a)(null);else{k.pipe(Object(b.a)()).subscribe();const t=k.pipe(Object(l.a)(t=>t.getRedirectResult().then(t=>t,()=>null)),C,m({bufferSize:1,refCount:!1})),e=t=>new s.a(e=>({unsubscribe:f.runOutsideAngular(()=>t(e))})),n=k.pipe(Object(l.a)(t=>e(t.onAuthStateChanged.bind(t)))),r=k.pipe(Object(l.a)(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(_(n),Object(w.a)(S.outsideAngular),Object(c.b)(S.insideAngular)),this.user=t.pipe(_(r),Object(w.a)(S.outsideAngular),Object(c.b)(S.insideAngular)),this.idToken=this.user.pipe(Object(l.a)(t=>t?Object(a.a)(t.getIdToken()):Object(o.a)(null))),this.idTokenResult=this.user.pipe(Object(l.a)(t=>t?Object(a.a)(t.getIdTokenResult()):Object(o.a)(null))),this.credential=Object(u.a)(t,A,this.authState.pipe(Object(E.a)(t=>!t))).pipe(Object(h.a)(t=>(null==t?void 0:t.user)?t:null),Object(w.a)(S.outsideAngular),Object(c.b)(S.insideAngular))}return Object(T.i)(this,k,f,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>A.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(T.c),r.Kb(T.b,8),r.Kb(r.B),r.Kb(r.z),r.Kb(O,8),r.Kb(S,8),r.Kb(C,8),r.Kb(A,8),r.Kb(k,8),r.Kb(N,8))},t.\u0275prov=Object(r.Ab)({factory:function(){return new t(Object(r.Kb)(T.c),Object(r.Kb)(T.b,8),Object(r.Kb)(r.B),Object(r.Kb)(r.z),Object(r.Kb)(O,8),Object(r.Kb)(S,8),Object(r.Kb)(C,8),Object(r.Kb)(A,8),Object(r.Kb)(k,8),Object(r.Kb)(N,8))},token:t,providedIn:"any"}),t})(),x=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[j]}),t})()},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XDbj:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("sVev"),i=n("7o/Q");function o(t=u){return e=>e.lift(new s(t))}class s{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new a(t,this.errorFactory))}}class a extends i.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function u(){return new r.a}},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},ZUHj:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var o=n("SeVD"),s=n("HDdC");function a(t,e,n,r,a=new i(t,n,r)){if(!a.closed)return e instanceof s.a?e.subscribe(a):Object(o.a)(e)(a)}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},eIep:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e){return"function"==typeof e?n=>n.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))))):e=>e.lift(new a(t))}class a{constructor(t){this.project=t}call(t,e){return e.subscribe(new u(t,this.project))}}class u extends o.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new o.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(o.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}},fXoL:function(t,e,n){"use strict";n.d(e,"a",(function(){return $i})),n.d(e,"b",(function(){return Qs})),n.d(e,"c",(function(){return Bs})),n.d(e,"d",(function(){return qs})),n.d(e,"e",(function(){return Hs})),n.d(e,"f",(function(){return Fa})),n.d(e,"g",(function(){return Aa})),n.d(e,"h",(function(){return xi})),n.d(e,"i",(function(){return oa})),n.d(e,"j",(function(){return qo})),n.d(e,"k",(function(){return Ys})),n.d(e,"l",(function(){return Ho})),n.d(e,"m",(function(){return dn})),n.d(e,"n",(function(){return Os})),n.d(e,"o",(function(){return z})),n.d(e,"p",(function(){return h})),n.d(e,"q",(function(){return K})),n.d(e,"r",(function(){return Qi})),n.d(e,"s",(function(){return as})),n.d(e,"t",(function(){return us})),n.d(e,"u",(function(){return Js})),n.d(e,"v",(function(){return st})),n.d(e,"w",(function(){return Na})),n.d(e,"x",(function(){return ot})),n.d(e,"y",(function(){return Ta})),n.d(e,"z",(function(){return ua})),n.d(e,"A",(function(){return f})),n.d(e,"B",(function(){return Gs})),n.d(e,"C",(function(){return Ws})),n.d(e,"D",(function(){return Wo})),n.d(e,"E",(function(){return Ko})),n.d(e,"F",(function(){return zo})),n.d(e,"G",(function(){return Qo})),n.d(e,"H",(function(){return nr})),n.d(e,"I",(function(){return d})),n.d(e,"J",(function(){return Ra})),n.d(e,"K",(function(){return fs})),n.d(e,"L",(function(){return va})),n.d(e,"M",(function(){return Pi})),n.d(e,"N",(function(){return Jo})),n.d(e,"O",(function(){return $o})),n.d(e,"P",(function(){return ds})),n.d(e,"Q",(function(){return ht})),n.d(e,"R",(function(){return Ia})),n.d(e,"S",(function(){return xn})),n.d(e,"T",(function(){return jn})),n.d(e,"U",(function(){return La})),n.d(e,"V",(function(){return ba})),n.d(e,"W",(function(){return $s})),n.d(e,"X",(function(){return Di})),n.d(e,"Y",(function(){return Do})),n.d(e,"Z",(function(){return tr})),n.d(e,"ab",(function(){return Mn})),n.d(e,"bb",(function(){return En})),n.d(e,"cb",(function(){return In})),n.d(e,"db",(function(){return An})),n.d(e,"eb",(function(){return Sn})),n.d(e,"fb",(function(){return On})),n.d(e,"gb",(function(){return Cn})),n.d(e,"hb",(function(){return jo})),n.d(e,"ib",(function(){return Da})),n.d(e,"jb",(function(){return xo})),n.d(e,"kb",(function(){return Ro})),n.d(e,"lb",(function(){return Tn})),n.d(e,"mb",(function(){return L})),n.d(e,"nb",(function(){return to})),n.d(e,"ob",(function(){return vo})),n.d(e,"pb",(function(){return go})),n.d(e,"qb",(function(){return No})),n.d(e,"rb",(function(){return Qt})),n.d(e,"sb",(function(){return C})),n.d(e,"tb",(function(){return wn})),n.d(e,"ub",(function(){return Ht})),n.d(e,"vb",(function(){return wr})),n.d(e,"wb",(function(){return ro})),n.d(e,"xb",(function(){return Ms})),n.d(e,"yb",(function(){return gt})),n.d(e,"zb",(function(){return Et})),n.d(e,"Ab",(function(){return y})),n.d(e,"Bb",(function(){return m})),n.d(e,"Cb",(function(){return bt})),n.d(e,"Db",(function(){return Tt})),n.d(e,"Eb",(function(){return so})),n.d(e,"Fb",(function(){return fo})),n.d(e,"Gb",(function(){return ho})),n.d(e,"Hb",(function(){return lo})),n.d(e,"Ib",(function(){return po})),n.d(e,"Jb",(function(){return So})),n.d(e,"Kb",(function(){return et})),n.d(e,"Lb",(function(){return ao})),n.d(e,"Mb",(function(){return Vs})),n.d(e,"Nb",(function(){return yo})),n.d(e,"Ob",(function(){return Fs})),n.d(e,"Pb",(function(){return _o})),n.d(e,"Qb",(function(){return uo})),n.d(e,"Rb",(function(){return wo})),n.d(e,"Sb",(function(){return Ls})),n.d(e,"Tb",(function(){return he})),n.d(e,"Ub",(function(){return rr})),n.d(e,"Vb",(function(){return _t})),n.d(e,"Wb",(function(){return oo})),n.d(e,"Xb",(function(){return To})),n.d(e,"Yb",(function(){return Io})),n.d(e,"Zb",(function(){return Oo}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){return{toString:t}.toString()}const c="__parameters__";function l(t,e,n){return u(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(c)?t[c]:Object.defineProperty(t,c,{value:[]})[c];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const h=l("Inject",t=>({token:t})),f=l("Optional"),p=l("Self"),d=l("SkipSelf");var g=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function v(t){for(let e in t)if(t[e]===v)return e;throw Error("Could not find renamed property on target object.")}function y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function m(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function b(t){return _(t,t[E])||_(t,t[O])}function _(t,e){return e&&e.token===t?e:null}function w(t){return t&&(t.hasOwnProperty(T)||t.hasOwnProperty(S))?t[T]:null}const E=v({"\u0275prov":v}),T=v({"\u0275inj":v}),I=v({"\u0275provFallback":v}),O=v({ngInjectableDef:v}),S=v({ngInjectorDef:v});function C(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(C).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function A(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const k=v({__forward_ref__:v});function N(t){return t.__forward_ref__=N,t.toString=function(){return C(this())},t}function j(t){return"function"==typeof(e=t)&&e.hasOwnProperty(k)&&e.__forward_ref__===N?t():t;var e}const x="undefined"!=typeof globalThis&&globalThis,R="undefined"!=typeof window&&window,P="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,D="undefined"!=typeof global&&global,L=x||D||R||P,M=v({"\u0275cmp":v}),F=v({"\u0275dir":v}),U=v({"\u0275pipe":v}),V=v({"\u0275mod":v}),q=v({"\u0275loc":v}),H=v({"\u0275fac":v}),B=v({__NG_ELEMENT_ID__:v});class K{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=y({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const z=new K("INJECTOR",-1),W={},G=/\n/gm,Q="__source",$=v({provide:String,useValue:v});let J,Y=void 0;function X(t){const e=Y;return Y=t,e}function Z(t){const e=J;return J=t,e}function tt(t,e=g.Default){if(void 0===Y)throw new Error("inject() must be called from an injection context");return null===Y?nt(t,void 0,e):Y.get(t,e&g.Optional?null:void 0,e)}function et(t,e=g.Default){return(J||tt)(j(t),e)}function nt(t,e,n){const r=b(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&g.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${C(t)}]`)}function rt(t){const e=[];for(let n=0;n<t.length;n++){const r=j(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=g.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof f||"Optional"===i.ngMetadataName||i===f?n|=g.Optional:i instanceof d||"SkipSelf"===i.ngMetadataName||i===d?n|=g.SkipSelf:i instanceof p||"Self"===i.ngMetadataName||i===p?n|=g.Self:t=i instanceof h||i===h?i.token:i}e.push(et(t,n))}else e.push(et(r))}return e}class it{get(t,e=W){if(e===W){const e=new Error(`NullInjectorError: No provider for ${C(t)}!`);throw e.name="NullInjectorError",e}return e}}class ot{}class st{}function at(t,e){t.forEach(t=>Array.isArray(t)?at(t,e):e(t))}function ut(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ct(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var lt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),ht=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const ft={},pt=[];let dt=0;function gt(t){return u(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===lt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||pt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ht.Emulated,id:"c",styles:t.styles||pt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=dt++,n.inputs=wt(t.inputs,e),n.outputs=wt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(vt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(yt):null,n})}function vt(t){return It(t)||function(t){return t[F]||null}(t)}function yt(t){return function(t){return t[U]||null}(t)}const mt={};function bt(t){const e={type:t.type,bootstrap:t.bootstrap||pt,declarations:t.declarations||pt,imports:t.imports||pt,exports:t.exports||pt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&u(()=>{mt[t.id]=t.type}),e}function _t(t,e){return u(()=>{const n=St(t,!0);n.declarations=e.declarations||pt,n.imports=e.imports||pt,n.exports=e.exports||pt})}function wt(t,e){if(null==t)return ft;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Et=gt;function Tt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function It(t){return t[M]||null}function Ot(t,e){return t.hasOwnProperty(H)?t[H]:null}function St(t,e){const n=t[V]||null;if(!n&&!0===e)throw new Error(`Type ${C(t)} does not have '\u0275mod' property.`);return n}const Ct=20,At=10;function kt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Nt(t){return Array.isArray(t)&&!0===t[1]}function jt(t){return 0!=(8&t.flags)}function xt(t){return 2==(2&t.flags)}function Rt(t){return 1==(1&t.flags)}function Pt(t){return null!==t.template}function Dt(t){return 0!=(512&t[2])}function Lt(t){return"string"==typeof t?t:null==t?"":""+t}function Mt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Lt(t)}const Ft=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(L))();function Ut(t){return t instanceof Function?t():t}function Vt(t,e){const n=e?" in "+e:"";throw new Error(`No provider for ${Mt(t)} found${n}`)}class qt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ht(){return Bt}function Bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=zt),Kt}function Kt(){const t=Wt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===ft)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function zt(t,e,n,r){const i=Wt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:ft,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new qt(u&&u.currentValue,e,s===ft),t[r]=e}function Wt(t){return t.__ngSimpleChanges__||null}Ht.ngInherit=!0;let Gt=void 0;function Qt(t){Gt=t}function $t(t){return!!t.listen}const Jt={createRenderer:(t,e)=>void 0!==Gt?Gt:"undefined"!=typeof document?document:void 0};function Yt(t){for(;Array.isArray(t);)t=t[0];return t}function Xt(t,e){return Yt(e[t.index])}function Zt(t,e){return t.data[e+Ct]}function te(t,e){const n=e[t];return kt(n)?n:n[0]}function ee(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ne(t){return 4==(4&t[2])}function re(t){return 128==(128&t[2])}function ie(t,e){return null===t||null==e?null:t[e]}function oe(t){t[18]=0}function se(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const ae={lFrame:Oe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ue(){return ae.bindingsEnabled}function ce(){return ae.lFrame.lView}function le(){return ae.lFrame.tView}function he(t){ae.lFrame.contextLView=t}function fe(){return ae.lFrame.currentTNode}function pe(t,e){ae.lFrame.currentTNode=t,ae.lFrame.isParent=e}function de(){return ae.lFrame.isParent}function ge(){return ae.isInCheckNoChangesMode}function ve(t){ae.isInCheckNoChangesMode=t}function ye(){return ae.lFrame.bindingIndex++}function me(t,e){const n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,be(e)}function be(t){ae.lFrame.currentDirectiveIndex=t}function _e(){return ae.lFrame.currentQueryIndex}function we(t){ae.lFrame.currentQueryIndex=t}function Ee(t,e){const n=Ie();ae.lFrame=n,n.currentTNode=e,n.lView=t}function Te(t){const e=Ie(),n=t[1];ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex}function Ie(){const t=ae.lFrame,e=null===t?null:t.child;return null===e?Oe(t):e}function Oe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Se(){const t=ae.lFrame;return ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ce=Se;function Ae(){const t=Se();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ke(){return ae.lFrame.selectedIndex}function Ne(t){ae.lFrame.selectedIndex=t}function je(){const t=ae.lFrame;return Zt(t.tView,t.selectedIndex)}function xe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Re(t,e,n){Le(t,e,3,n)}function Pe(t,e,n,r){(3&t[2])===n&&Le(t,e,n,r)}function De(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Le(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Me(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Me(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Fe=-1;class Ue{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ve(t,e,n){const r=$t(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];He(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function qe(t){return 3===t||4===t||6===t}function He(t){return 64===t.charCodeAt(0)}function Be(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ke(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ke(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function ze(t){return t!==Fe}function We(t){return 32767&t}function Ge(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Qe=!0;function $e(t){const e=Qe;return Qe=t,e}let Je=0;function Ye(t,e){const n=Ze(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Xe(r.data,t),Xe(e,null),Xe(r.blueprint,null));const i=tn(t,e),o=t.injectorIndex;if(ze(i)){const t=We(i),n=Ge(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Xe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ze(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function tn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Fe;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Fe}function en(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(B)&&(r=n[B]),null==r&&(r=n[B]=Je++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function nn(t,e,n,r=g.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(B)?t[B]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){Ee(e,t);try{const t=i();if(null!=t||r&g.Optional)return t;Vt(n)}finally{Ce()}}else if("number"==typeof i){if(-1===i)return new ln(t,e);let o=null,s=Ze(t,e),a=Fe,u=r&g.Host?e[16][6]:null;for((-1===s||r&g.SkipSelf)&&(a=-1===s?tn(t,e):e[s+8],a!==Fe&&cn(r,!1)?(o=e[1],s=We(a),e=Ge(a,e)):s=-1);-1!==s;){const t=e[1];if(un(i,s,t.data)){const t=on(s,e,n,o,r,u);if(t!==rn)return t}a=e[s+8],a!==Fe&&cn(r,e[1].data[s+8]===u)&&un(i,s,e)?(o=t,s=We(a),e=Ge(a,e)):s=-1}}}if(r&g.Optional&&void 0===i&&(i=null),0==(r&(g.Self|g.Host))){const t=e[9],o=Z(void 0);try{return t?t.get(n,i,r&g.Optional):nt(n,i,r&g.Optional)}finally{Z(o)}}if(r&g.Optional)return i;Vt(n,"NodeInjector")}const rn={};function on(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=sn(a,s,n,null==r?xt(a)&&Qe:r!=s&&2===a.type,i&g.Host&&o===a);return null!==u?an(e,s,u,a):rn}function sn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Pt(t)&&t.type===n)return u}return null}function an(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ue){const s=i;s.resolving&&function(t,e){throw new Error("Circular dependency in DI detected for "+t)}(Mt(o[n]));const a=$e(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Z(s.injectImpl):null;Ee(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&Z(u),$e(a),s.resolving=!1,Ce()}}return i}function un(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function cn(t,e){return!(t&g.Self||t&g.Host&&e)}class ln{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return nn(this._tNode,this._lView,t,void 0,e)}}function hn(t){return t.ngDebugContext}function fn(t){return t.ngOriginalError}function pn(t,...e){t.error(...e)}class dn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||pn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?hn(t)?hn(t):this._findContext(fn(t)):null}_findOriginalError(t){let e=fn(t);for(;e&&fn(e);)e=fn(e);return e}}class gn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class vn extends gn{getTypeName(){return"HTML"}}class yn extends gn{getTypeName(){return"Style"}}class mn extends gn{getTypeName(){return"Script"}}class bn extends gn{getTypeName(){return"URL"}}class _n extends gn{getTypeName(){return"ResourceURL"}}function wn(t){return t instanceof gn?t.changingThisBreaksApplicationSecurity:t}function En(t,e){const n=Tn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Tn(t){return t instanceof gn&&t.getTypeName()||null}function In(t){return new vn(t)}function On(t){return new yn(t)}function Sn(t){return new mn(t)}function Cn(t){return new bn(t)}function An(t){return new _n(t)}let kn=!0,Nn=!1;function jn(){return Nn=!0,kn}function xn(){if(Nn)throw new Error("Cannot enable prod mode after platform setup.");kn=!1}class Rn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Pn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Dn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ln=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Mn(t){return(t=String(t)).match(Dn)||t.match(Ln)?t:(jn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Fn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Un(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Vn=Fn("area,br,col,hr,img,wbr"),qn=Fn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Hn=Fn("rp,rt"),Bn=Un(Hn,qn),Kn=Un(Vn,Un(qn,Fn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Un(Hn,Fn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bn),zn=Fn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Wn=Fn("srcset"),Gn=Un(zn,Wn,Fn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Qn=Fn("script,style,template");class $n{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Kn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Qn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Gn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;zn[o]&&(s=Mn(s)),Wn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Mn(t.trim())).join(", ")),this.buf.push(" ",e,'="',Xn(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Kn.hasOwnProperty(e)&&!Vn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Xn(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const Jn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yn=/([^\#-~ |!])/g;function Xn(t){return t.replace(/&/g,"&amp;").replace(Jn,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(Yn,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Zn;function tr(t,e){let n=null;try{Zn=Zn||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Rn:new Pn(t)}(t);let r=e?String(e):"";n=Zn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Zn.getInertBodyElement(r)}while(r!==o);const s=new $n,a=s.sanitizeChildren(er(n)||n);return jn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=er(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function er(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var nr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function rr(t){const e=function(){const t=ce();return t&&t[12]}();return e?e.sanitize(nr.URL,t)||"":En(t,"URL")?wn(t):Mn(Lt(t))}function ir(t,e){t.__ngContext__=e}function or(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const sr="ng-template";function ar(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==or(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ur(t){return 0===t.type&&t.tagName!==sr}function cr(t,e,n){return e===(0!==t.type||n?t.tagName:sr)}function lr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(qe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!cr(t,u,n)||""===u&&1===e.length){if(hr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ar(t.attrs,c,n)){if(hr(r))return!1;s=!0}continue}const l=fr(8&r?"class":u,i,ur(t),n);if(-1===l){if(hr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==or(e,c,0)||2&r&&c!==t){if(hr(r))return!1;s=!0}}}}else{if(!s&&!hr(r)&&!hr(u))return!1;if(s&&hr(u))continue;s=!1,r=u|1&r}}return hr(r)||s}function hr(t){return 0==(1&t)}function fr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function pr(t,e,n=!1){for(let r=0;r<e.length;r++)if(lr(t,e[r],n))return!0;return!1}function dr(t,e){return t?":not("+e.trim()+")":e}function gr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||hr(s)||(e+=dr(o,i),i=""),r=s,o=o||!hr(r);n++}return""!==i&&(e+=dr(o,i)),e}const vr={};function yr(t){const e=t[3];return Nt(e)?e[3]:e}function mr(t){return _r(t[13])}function br(t){return _r(t[4])}function _r(t){for(;null!==t&&!Nt(t);)t=t[4];return t}function wr(t){Er(le(),ce(),ke()+t,ge())}function Er(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Re(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Pe(e,r,0,n)}Ne(n)}function Tr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];we(i),n.contentQueries(2,e[o],o)}}}function Ir(t,e,n){return $t(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Or(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,oe(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Sr(t,e,n,r,i){const o=e+Ct,s=t.data[o]||function(t,e,n,r,i){const o=fe(),s=de(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s&&null==o.child&&null!==a.parent?o.child=a:s||(o.next=a)),a}(t,o,n,r,i);return pe(s,!0),s}function Cr(t,e,n){Te(e);try{const r=t.viewQuery;null!==r&&ri(1,r,n);const i=t.template;null!==i&&Nr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Tr(t,e),t.staticViewQueries&&ri(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Xr(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Ae()}}function Ar(t,e,n,r){const i=e[2];if(256==(256&i))return;Te(e);const o=ge();try{oe(e),ae.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Nr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Re(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Pe(e,n,0,null),De(e,0)}if(function(t){for(let e=mr(t);null!==e;e=br(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&se(r,1),n[2]|=1024}}}(e),function(t){for(let e=mr(t);null!==e;e=br(e))for(let t=At;t<e.length;t++){const n=e[t],r=n[1];re(n)&&Ar(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Tr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Re(e,n)}else{const n=t.contentHooks;null!==n&&Pe(e,n,1),De(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,Ne(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(me(r,i),s(2,e[i])),i++)}}}finally{Ne(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Yr(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ri(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Re(e,n)}else{const n=t.viewHooks;null!==n&&Pe(e,n,2),De(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,se(e[3],-1))}finally{Ae()}}function kr(t,e,n,r){const i=e[10],o=!ge(),s=ne(e);try{o&&!s&&i.begin&&i.begin(),s&&Cr(t,e,r),Ar(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Nr(t,e,n,r,i){const o=ke();try{Ne(-1),2&r&&e.length>Ct&&Er(t,e,0,ge()),n(r,i)}finally{Ne(o)}}function jr(t,e,n){ue()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ye(n,e),ir(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Pt(r);o&&Gr(e,n,r);const u=an(e,t,a,n);ir(u,e),null!==s&&Qr(0,a-i,u,r,0,s),o&&(te(n.index,e)[8]=u)}}(t,e,n,Xt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-Ct,u=ae.lFrame.currentDirectiveIndex;try{Ne(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];be(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?qr(r,i):s&&o.push(null)}}finally{Ne(-1),be(u)}}(t,e,n))}function xr(t,e,n=Xt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Rr(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Pr(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Pr(t,e,n,r,i,o,s,a,u,c){const l=Ct+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:vr);return n}(l,h),p="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1}}function Dr(t,e,n,r){const i=oi(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function Lr(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Mr(t,e,n,r,i,o,s,a){const u=Xt(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(ai(t,n,c,r,i),xt(e)&&function(t,e){const n=te(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):2===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.tagName||"",r):i,$t(o)?o.setProperty(u,r,i):He(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Fr(t,e,n,r){let i=!1;if(ue()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];pr(n,s.selectors,!1)&&(i||(i=[]),en(Ye(n,e),t,s.type),Pt(s)?(Br(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,zr(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}Hr(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Be(n.mergedAttrs,c.hostAttrs),Wr(t,e,c),Kr(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-Ct),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-Ct),u=!0),Ur(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ur(e)?null:$r(n,i);o.push(c),s=Lr(n,u,s),a=Lr(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),Vr(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Be(n.mergedAttrs,n.attrs),i}function Ur(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Vr(t,e,n){for(let r=0;r<n;r++)e.push(vr),t.blueprint.push(vr),t.data.push(null)}function qr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Hr(t,e,n){const r=Ct-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function Br(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Kr(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Pt(e)&&(n[""]=t)}}function zr(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Wr(t,e,n){t.data.push(n);const r=n.factory||(n.factory=Ot(n.type)),i=new Ue(r,Pt(n),null);t.blueprint.push(i),e.push(i)}function Gr(t,e,n){const r=Xt(e,t),i=Rr(n),o=t[10],s=Zr(t,Or(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Qr(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function $r(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Jr(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Yr(t,e){const n=te(e,t);if(re(n)){const t=n[1];80&n[2]?Ar(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=mr(e);null!==r;r=br(r))for(let e=At;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Ar(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=te(n[r],e);re(i)&&i[5]>0&&t(i)}}(n)}}function Xr(t,e){const n=te(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Cr(r,n,n[8])}function Zr(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function ti(t){for(;t;){t[2]|=64;const e=yr(t);if(Dt(t)&&!e)return t;t=e}return null}function ei(t,e,n){const r=e[10];r.begin&&r.begin();try{Ar(t,e,t.template,n)}catch(i){throw si(e,i),i}finally{r.end&&r.end()}}function ni(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=ee(n),i=r[1];kr(i,r,i.template,n)}}(t[8])}function ri(t,e,n){we(0),e(t,n)}const ii=(()=>Promise.resolve(null))();function oi(t){return t[7]||(t[7]=[])}function si(t,e){const n=t[9],r=n?n.get(dn,null):null;r&&r.handleError(e)}function ai(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function ui(t,e,n,r,i){if(null!=r){let o,s=!1;Nt(r)?o=r:kt(r)&&(s=!0,r=r[0]);const a=Yt(r);0===t&&null!==n?null==i?di(e,n,a):pi(e,n,a,i||null):1===t&&null!==n?pi(e,n,a,i||null):2===t?function(t,e,n){const r=vi(t,e);r&&function(t,e,n,r){$t(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Yt(n)&&ui(e,t,r,o,i);for(let s=At;s<n.length;s++){const i=n[s];bi(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function ci(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,se(i,-1)),n.splice(r,1)}function li(t,e){if(t.length<=At)return;const n=At+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&ci(o,r),e>0&&(t[n-1][4]=r[4]);const s=ct(t,At+e);bi(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function hi(t,e){if(!(256&e[2])){const n=e[11];$t(n)&&n.destroyNode&&bi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return fi(t[1],t);for(;e;){let n=null;if(kt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)kt(e)&&fi(e[1],e),e=e[3];null===e&&(e=t),kt(e)&&fi(e[1],e),n=e&&e[4]}e=n}}(e)}}function fi(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ue)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Yt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&$t(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Nt(e[3])){n!==e[3]&&ci(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function pi(t,e,n,r){$t(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function di(t,e,n){$t(t)?t.appendChild(e,n):e.appendChild(n)}function gi(t,e,n,r){null!==r?pi(t,e,n,r):di(t,e,n)}function vi(t,e){return $t(t)?t.parentNode(e):e.parentNode}function yi(t,e,n,r){const i=function(t,e,n){let r=e.parent;for(;null!=r&&(3===r.type||4===r.type);)r=(e=r).parent;if(null===r)return n[0];if(e&&4===e.type&&4&e.flags)return Xt(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==ht.ShadowDom&&n!==ht.Native)return null}return Xt(r,n)}(t,r,e);if(null!=i){const t=e[11],o=function(t,e){return 3===t.type||4===t.type?Xt(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)gi(t,i,n[e],o);else gi(t,i,n,o)}}function mi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&ir(Yt(a),r),n.flags|=4),64!=(64&n.flags)&&(3===u||4===u?(mi(t,e,n.child,r,i,o,!1),ui(e,t,i,a,o)):1===u?_i(t,e,r,n,i,o):ui(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function bi(t,e,n,r,i,o){mi(n,r,t.firstChild,e,i,o,!1)}function _i(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)ui(e,t,i,a[u],o);else mi(t,e,a,s[3],i,o,!0)}function wi(t,e,n){$t(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ei(t,e,n){$t(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Ti{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Yt(s)),Nt(s))for(let e=At;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(3===a||4===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=yr(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}hi(this._lView[1],this._lView)}onDestroy(t){Dr(this._lView[1],this._lView,null,t)}markForCheck(){ti(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ei(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){ve(!0);try{ei(t,e,n)}finally{ve(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,bi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ii extends Ti{constructor(t){super(t),this._view=t}detectChanges(){ni(this._view)}checkNoChanges(){!function(t){ve(!0);try{ni(t)}finally{ve(!1)}}(this._view)}get context(){return null}}let Oi,Si,Ci;function Ai(t,e,n){return Oi||(Oi=class extends t{}),new Oi(Xt(e,n))}function ki(t,e,n,r){return Si||(Si=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Or(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Cr(e,n,t),new Ti(n)}}),0===n.type?new Si(r,n,Ai(e,n,r)):null}function Ni(t,e,n,r){let i;Ci||(Ci=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Ai(e,this._hostTNode,this._hostView)}get injector(){return new ln(this._hostTNode,this._hostView)}get parentInjector(){const t=tn(this._hostTNode,this._hostView);if(ze(t)){const e=Ge(t,this._hostView),n=We(t);return new ln(e[1].data[n+8],e)}return new ln(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-At}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ot,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Nt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ci(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=At+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-At?(e[4]=n[i],ut(n,At+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=function t(e,n){const r=At+e+1;if(r<n.length){const e=n[r],i=e[1].firstChild;if(null!==i)return function e(n,r){if(null!==r){const i=r.type;if(2===i)return Xt(r,n);if(0===i)return t(-1,n[r.index]);if(3===i||4===i){const i=r.child;if(null!==i)return e(n,i);{const e=n[r.index];return Nt(e)?t(-1,e):Yt(e)}}{const t=n[16],i=t[6],o=yr(t),s=i.projection[r.projection];return null!=s?e(o,s):e(n,r.next)}}return null}(e,i)}return n[7]}(i,o),a=n[11],u=vi(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,bi(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),ut(o[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=li(this._lContainer,e);n&&(ct(this._lContainer[8],e),hi(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=li(this._lContainer,e);return n&&null!=ct(this._lContainer[8],e)?new Ti(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Nt(o))i=o;else{let t;if(3===n.type)t=Yt(o);else if(t=r[11].createComment(""),Dt(r)){const e=r[11],i=Xt(n,r);pi(e,vi(e,i),t,function(t,e){return $t(t)?t.nextSibling(e):e.nextSibling}(e,i))}else yi(r[1],r,t,n);r[n.index]=i=Jr(o,r,t,n),Zr(r,i)}return new Ci(i,n,r)}function ji(t=!1){return function(t,e,n){if(!n&&xt(t)){const n=te(t.index,e);return new Ti(n,n)}return 2===t.type||0===t.type||3===t.type||4===t.type?new Ti(e[16],e):null}(fe(),ce(),t)}let xi=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ri(),t})();const Ri=ji,Pi=Function,Di=new K("Set Injector scope."),Li={},Mi={},Fi=[];let Ui=void 0;function Vi(){return void 0===Ui&&(Ui=new it),Ui}function qi(t,e=null,n=null,r){return new Hi(t,n,e||Vi(),r)}class Hi{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&at(e,n=>this.processProvider(n,t,e)),at([t],t=>this.processInjectorType(t,[],i)),this.records.set(z,Ki(void 0,this));const o=this.records.get(Di);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:C(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=W,n=g.Default){this.assertNotDestroyed();const r=X(this);try{if(!(n&g.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof K)&&b(t);e=n&&this.injectableDefInScope(n)?Ki(Bi(t),Li):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&g.Self?Vi():this.parent).get(t,e=n&g.Optional&&e===W?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(C(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[Q]&&i.unshift(e[Q]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=C(e);if(Array.isArray(e))i=e.map(C).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):C(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(G,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{X(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(C(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=j(t)))return!1;let r=w(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=w(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{at(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];at(r,t=>this.processProvider(t,n,r||Fi))}}this.injectorDefTypes.add(o),this.records.set(o,Ki(r.factory,Li));const a=r.providers;if(null!=a&&!s){const e=t;at(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Wi(t=j(t))?t:j(t&&t.provide);const i=function(t,e,n){return zi(t)?Ki(void 0,t.useValue):Ki(function(t,e,n){let r=void 0;if(Wi(t)){const e=j(t);return Ot(e)||Bi(e)}if(zi(t))r=()=>j(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...rt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>et(j(t.useExisting));else{const e=j(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Ot(e)||Bi(e);r=()=>new e(...rt(t.deps))}var i;return r}(t),Li)}(t);if(Wi(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Ki(void 0,Li,!0),e.factory=()=>rt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Li&&(e.value=Mi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Bi(t){const e=b(t),n=null!==e?e.factory:Ot(t);if(null!==n)return n;const r=w(t);if(null!==r)return r.factory;if(t instanceof K)throw new Error(`Token ${C(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${C(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[E]||t[O]||t[I]&&t[I]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Ki(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function zi(t){return null!==t&&"object"==typeof t&&$ in t}function Wi(t){return"function"==typeof t}const Gi=function(t,e,n){return function(t,e=null,n=null,r){const i=qi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Qi=(()=>{class t{static create(t,e){return Array.isArray(t)?Gi(t,e,""):Gi(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=W,t.NULL=new it,t.\u0275prov=y({token:t,providedIn:"any",factory:()=>et(z)}),t.__NG_ELEMENT_ID__=-1,t})();const $i=new K("AnalyzeForEntryComponents");function Ji(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=A(i,t):2==o&&(r=A(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Yi(t,e){const n=ee(t)[1],r=n.data.length-1;xe(n,{directiveStart:r,directiveEnd:r+1})}let Xi=null;function Zi(){if(!Xi){const t=L.Symbol;if(t&&t.iterator)Xi=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Xi=n)}}}return Xi}function to(t){return!!eo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Zi()in t)}function eo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function no(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ro(t,e,n,r){const i=ce();return no(i,ye(),e)&&(le(),function(t,e,n,r,i,o){const s=Xt(t,e),a=e[11];if(null==r)$t(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?Lt(r):i(r,t.tagName||"",n);$t(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(je(),i,t,e,n,r)),ro}function io(t,e,n,r){return no(t,ye(),n)?e+Lt(n)+r:vr}function oo(t,e,n,r,i,o,s,a){const u=ce(),c=le(),l=t+Ct,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Sr(e,t,0,s||null,ie(c,a));Fr(e,n,l,ie(c,u)),xe(e,l);const h=l.tViews=Pr(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];pe(h,!1);const f=u[11].createComment("");yi(c,u,f,h),ir(f,u),Zr(u,u[l]=Jr(f,u,f,h)),Rt(h)&&jr(c,u,h),null!=s&&xr(u,h,a)}function so(t,e=g.Default){const n=ce();return null===n?et(t,e):nn(fe(),n,j(t),e)}function ao(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(qe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(fe(),t)}function uo(t,e,n){const r=ce();return no(r,ye(),e)&&Mr(le(),je(),r,t,e,r[11],n,!1),uo}function co(t,e,n,r,i){const o=i?"class":"style";ai(t,n,e.inputs[o],o,r)}function lo(t,e,n,r){const i=ce(),o=le(),s=Ct+t,a=i[11],u=i[s]=Ir(e,a,ae.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Sr(e,t,2,i,ie(a,o));return Fr(e,n,u,ie(a,s)),null!==u.attrs&&Ji(u,u.attrs,!1),null!==u.mergedAttrs&&Ji(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,o,i,0,e,n,r):o.data[s];pe(c,!0);const l=c.mergedAttrs;null!==l&&Ve(a,u,l);const h=c.classes;null!==h&&Ei(a,u,h);const f=c.styles;null!==f&&wi(a,u,f),yi(o,i,u,c),0===ae.lFrame.elementDepthCount&&ir(u,i),ae.lFrame.elementDepthCount++,Rt(c)&&(jr(o,i,c),function(t,e,n){if(jt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&xr(i,c)}function ho(){let t=fe();de()?ae.lFrame.isParent=!1:(t=t.parent,pe(t,!1));const e=t;ae.lFrame.elementDepthCount--;const n=le();n.firstCreatePass&&(xe(n,t),jt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&co(n,e,ce(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&co(n,e,ce(),e.stylesWithoutHost,!1)}function fo(t,e,n,r){lo(t,e,n,r),ho()}function po(){return ce()}function go(t){return!!t&&"function"==typeof t.then}function vo(t){return!!t&&"function"==typeof t.subscribe}function yo(t,e,n=!1,r){const i=ce(),o=le(),s=fe();return function(t,e,n,r,i,o,s=!1,a){const u=Rt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=oi(e);let h=!0;if(2===r.type){const f=Xt(r,e),p=a?a(f):ft,d=p.target||f,g=l.length,v=a?t=>a(Yt(t[r.index])).target:r.index;if($t(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=bo(r,e,o,!1);const t=n.listen(p.name||d,i,o);l.push(o,t),c&&c.push(i,v,g,g+1)}}else o=bo(r,e,o,!0),d.addEventListener(i,o,s),l.push(o),c&&c.push(i,v,g,s)}const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),yo}function mo(t,e,n){try{return!1!==e(n)}catch(r){return si(t,r),!1}}function bo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?te(t.index,e):e;0==(32&e[2])&&ti(s);let a=mo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=mo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function _o(t=1){return function(t){return(ae.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ae.lFrame.contextLView))[8]}(t)}function wo(t,e,n){return Eo(t,"",e,"",n),wo}function Eo(t,e,n,r,i){const o=ce(),s=io(o,e,n,r);return s!==vr&&Mr(le(),je(),o,t,s,o[11],i,!1),Eo}function To(t,e=""){const n=ce(),r=le(),i=t+Ct,o=r.firstCreatePass?Sr(r,t,2,null,null):r.data[i],s=n[i]=function(t,e){return $t(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);yi(r,n,s,o),pe(o,!1)}function Io(t){return Oo("",t,""),Io}function Oo(t,e,n){const r=ce(),i=io(r,t,e,n);return i!==vr&&function(t,e,n){const r=function(t,e){return Yt(e[t+Ct])}(e,t),i=t[11];$t(i)?i.setValue(r,n):r.textContent=n}(r,ke(),i),Oo}function So(t,e,n){const r=ce();return no(r,ye(),e)&&Mr(le(),je(),r,t,e,r[11],n,!0),So}const Co=void 0;var Ao=["en",[["a","p"],["AM","PM"],Co],[["AM","PM"],Co,Co],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Co,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Co,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Co,"{1} 'at' {0}",Co],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ko={};function No(t,e,n){"string"!=typeof e&&(n=e,e=t[Do.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ko[e]=t,n&&(ko[e][Do.ExtraData]=n)}function jo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Po(e);if(n)return n;const r=e.split("-")[0];if(n=Po(r),n)return n;if("en"===r)return Ao;throw new Error(`Missing locale data for the locale "${t}".`)}function xo(t){return jo(t)[Do.CurrencyCode]||null}function Ro(t){return jo(t)[Do.PluralCase]}function Po(t){return t in ko||(ko[t]=L.ng&&L.ng.common&&L.ng.common.locales&&L.ng.common.locales[t]),ko[t]}var Do=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Lo="en-US";let Mo=Lo;function Fo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Mo=t.toLowerCase().replace(/_/g,"-"))}class Uo{}class Vo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${C(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let qo=(()=>{class t{}return t.NULL=new Vo,t})(),Ho=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Bo(t),t})();const Bo=function(t){return Ai(t,fe(),ce())};class Ko{}var zo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Wo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Go(),t})();const Go=function(){const t=ce(),e=te(fe().index,t);return function(t){const e=t[11];if($t(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(kt(e)?e:t)};let Qo=(()=>{class t{}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>null}),t})();class $o{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Jo=new $o("10.2.4");class Yo{constructor(){}supports(t){return to(t)}create(t){return new Zo(t)}}const Xo=(t,e)=>e;class Zo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Xo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<rs(n,r,i)?e:n,s=rs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!to(t))throw new Error(`Error trying to diff '${C(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Zi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new ts(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ns),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ns),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ts{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class es{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ns{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new es,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class is{constructor(){}supports(t){return t instanceof Map||eo(t)}create(){return new os}}class os{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||eo(t)))throw new Error(`Error trying to diff '${C(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ss(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ss{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let as=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new d,new f]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>new t([new Yo])}),t})(),us=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new d,new f]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>new t([new is])}),t})();const cs=[new is],ls=new as([new Yo]),hs=new us(cs);let fs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ps(t,Ho),t})();const ps=function(t,e){return ki(t,e,fe(),ce())};let ds=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>gs(t,Ho),t})();const gs=function(t,e){return Ni(t,e,fe(),ce())},vs={};class ys extends qo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=It(t);return new _s(e,this.ngModule)}}function ms(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const bs=new K("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ft});class _s extends Uo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(gr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ms(this.componentDef.inputs)}get outputs(){return ms(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,vs,i);return o!==vs||r===vs?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ko,Jt),s=i.get(Qo,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if($t(t))return t.selectRootElement(e,n===ht.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ir(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Ft,clean:ii,playerHandler:null,flags:0},f=Pr(0,null,null,1,0,null,null,null,null,null),p=Or(null,f,h,l,null,null,o,a,s,i);let d,g;Te(p);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Sr(s,0,2,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Ji(a,u,!0),null!==t&&(Ve(i,t,u),null!==a.classes&&Ei(i,t,a.classes),null!==a.styles&&wi(i,t,a.styles)));const c=r.createRenderer(t,e),l=Or(n,Rr(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(en(Ye(a,n),s,e.type),Br(s,a),zr(a,n.length,1)),Zr(n,l),n[20]=l}(c,this.componentDef,p,o,a);if(c)if(n)Ve(a,c,["ng-version",Jo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!hr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ve(a,c,t),e&&e.length>0&&Ei(a,c,e.join(" "))}if(g=Zt(f,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}d=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=fe();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Hr(t,r,1),Wr(t,e,n));const i=an(e,t,e.length-1,r);ir(i,e);const o=Xt(r,e);return o&&ir(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=fe();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Ne(a.index-Ct);const t=n[1];Ur(t,e),Vr(t,n,e.hostVars),qr(e,s)}return s}(t,this.componentDef,p,h,[Yi]),Cr(f,p,null)}finally{Ae()}return new ws(this.componentType,d,Ai(Ho,g,p),p,g)}}class ws extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Ii(r),this.componentType=t}get injector(){return new ln(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Es=new Map;class Ts extends ot{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ys(this);const n=St(t),r=t[q]||null;r&&Fo(r),this._bootstrapComponents=Ut(n.bootstrap),this._r3Injector=qi(t,e,[{provide:ot,useValue:this},{provide:qo,useValue:this.componentFactoryResolver}],C(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Qi.THROW_IF_NOT_FOUND,n=g.Default){return t===Qi||t===ot||t===z?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Is extends st{constructor(t){super(),this.moduleType=t,null!==St(t)&&function(t){const e=new Set;!function t(n){const r=St(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${C(e)} vs ${C(e.name)}`)}(i,Es.get(i),n),Es.set(i,n));const o=Ut(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ts(this.moduleType,t)}}const Os=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Ss(){return this._results[Zi()]()}class Cs{constructor(){this.dirty=!0,this._results=[],this.changes=new Os,this.length=0;const t=Zi(),e=Cs.prototype;e[t]||(e[t]=Ss)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class As{constructor(t){this.queryList=t,this.matches=null}clone(){return new As(this.queryList)}setDirty(){this.queryList.setDirty()}}class ks{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new ks(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Us(t,e).matches&&this.queries[e].setDirty()}}class Ns{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class js{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new js(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class xs{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new xs(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&3===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Rs(e,i)),this.matchTNodeWithReadOption(t,e,sn(e,t,i,!1,!1))}else n===fs?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,sn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ho||r===ds||r===fs&&0===e.type)this.addMatch(e.index,-2);else{const n=sn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Rs(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ps(t,e,n,r){return-1===n?function(t,e){return 2===t.type||3===t.type?Ai(Ho,t,e):0===t.type?ki(fs,Ho,t,e):null}(e,t):-2===n?function(t,e,n){return n===Ho?Ai(Ho,e,t):n===fs?ki(fs,Ho,e,t):n===ds?Ni(ds,Ho,e,t):void 0}(t,e,r):an(t,t[1],n,e)}function Ds(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ps(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ls(t){const e=ce(),n=le(),r=_e();we(r+1);const i=Us(n,r);if(t.dirty&&ne(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=Ds(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=At;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):Ds(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Ms(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new js),t.queries.track(new xs(e,n))}(t,new Ns(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),function(t,e){const n=new Cs;Dr(t,e,n,n.destroy),null===e[19]&&(e[19]=new ks),e[19].queries.push(new As(n))}(t,e)}(le(),ce(),e,n,r,0,fe(),t)}function Fs(){return t=ce(),e=_e(),t[19].queries[e].queryList;var t,e}function Us(t,e){return t.queries.getByIndex(e)}function Vs(t=g.Default){const e=ji(!0);if(null!=e||t&g.Optional)return e;Vt("ChangeDetectorRef")}const qs=new K("Application Initializer");let Hs=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();go(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(et(qs,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const Bs=new K("AppId"),Ks={provide:Bs,useFactory:function(){return`${zs()}${zs()}${zs()}`},deps:[]};function zs(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ws=new K("Platform Initializer"),Gs=new K("Platform ID"),Qs=new K("appBootstrapListener");let $s=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const Js=new K("LocaleId"),Ys=new K("DefaultCurrencyCode");class Xs{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Zs=function(t){return new Is(t)},ta=Zs,ea=function(t){return Promise.resolve(Zs(t))},na=function(t){const e=Zs(t),n=Ut(St(t).declarations).reduce((t,e)=>{const n=It(e);return n&&t.push(new _s(n)),t},[]);return new Xs(e,n)},ra=na,ia=function(t){return Promise.resolve(na(t))};let oa=(()=>{class t{constructor(){this.compileModuleSync=ta,this.compileModuleAsync=ea,this.compileModuleAndAllComponentsSync=ra,this.compileModuleAndAllComponentsAsync=ia}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const sa=(()=>Promise.resolve(0))();function aa(t){"undefined"==typeof Zone?sa.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ua{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Os(!1),this.onMicrotaskEmpty=new Os(!1),this.onStable=new Os(!1),this.onError=new Os(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=L.requestAnimationFrame,e=L.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(L,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,fa(t),ha(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),fa(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return pa(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),da(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return pa(t),e.invoke(r,i,o,s,a)}finally{da(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,fa(t),ha(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ua.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ua.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,la,ca,ca);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function ca(){}const la={};function ha(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fa(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function pa(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function da(t){t._nesting--,ha(t)}class ga{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Os,this.onMicrotaskEmpty=new Os,this.onStable=new Os,this.onError=new Os}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let va=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ua.assertNotInAngularZone(),aa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())aa(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(et(ua))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),ya=(()=>{class t{constructor(){this._applications=new Map,wa.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return wa.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();class ma{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function ba(t){wa=t}let _a,wa=new ma;const Ea=new K("AllowMultipleToken");class Ta{constructor(t,e){this.name=t,this.token=e}}function Ia(t,e,n=[]){const r="Platform: "+e,i=new K(r);return(e=[])=>{let o=Oa();if(!o||o.injector.get(Ea,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Di,useValue:"platform"});!function(t){if(_a&&!_a.destroyed&&!_a.injector.get(Ea,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_a=t.get(Sa);const e=t.get(Ws,null);e&&e.forEach(t=>t())}(Qi.create({providers:t,name:r}))}return function(t){const e=Oa();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Oa(){return _a&&!_a.destroyed?_a:null}let Sa=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ga:("zone.js"===t?void 0:t)||new ua({enableLongStackTrace:jn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:ua,useValue:n}];return n.run(()=>{const e=Qi.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(dn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>ka(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return go(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Hs);return t.runInitializers(),t.donePromise.then(()=>(Fo(i.injector.get(Js,Lo)||Lo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Ca({},e);return function(t,e,n){const r=new Is(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Aa);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${C(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(et(Qi))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Ca(t,e){return Array.isArray(e)?e.reduce(Ca,t):Object.assign(Object.assign({},t),e)}let Aa=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=jn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ua.assertNotInAngularZone(),aa(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ua.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Uo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ot),i=n.create(Qi.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(va,null);return o&&i.injector.get(ya).registerApplication(i.location.nativeElement,o),this._loadComponent(i),jn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;ka(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Qs,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),ka(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(et(ua),et($s),et(Qi),et(dn),et(qo),et(Hs))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function ka(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Na{}class ja{}const xa={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ra=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||xa}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Pa(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Pa(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(et(oa),et(ja,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Pa(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Da=function(t){return null},La=Ia(null,"core",[{provide:Gs,useValue:"unknown"},{provide:Sa,deps:[Qi]},{provide:ya,deps:[]},{provide:$s,deps:[]}]),Ma=[{provide:Aa,useClass:Aa,deps:[ua,$s,Qi,dn,qo,Hs]},{provide:bs,deps:[ua],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Hs,useClass:Hs,deps:[[new f,qs]]},{provide:oa,useClass:oa,deps:[]},Ks,{provide:as,useFactory:function(){return ls},deps:[]},{provide:us,useFactory:function(){return hs},deps:[]},{provide:Js,useFactory:function(t){return Fo(t=t||"undefined"!=typeof $localize&&$localize.locale||Lo),t},deps:[[new h(Js),new f,new d]]},{provide:Ys,useValue:"USD"}];let Fa=(()=>{class t{constructor(t){}}return t.\u0275mod=bt({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)(et(Aa))},providers:Ma}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},l7GE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,s){n(i=t[e].apply(t,r)).then(o,s)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function s(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function a(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},ofXK:function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return M})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return E})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return T})),n.d(e,"g",(function(){return m})),n.d(e,"h",(function(){return x})),n.d(e,"i",(function(){return P})),n.d(e,"j",(function(){return w})),n.d(e,"k",(function(){return c})),n.d(e,"l",(function(){return V})),n.d(e,"m",(function(){return U})),n.d(e,"n",(function(){return a})),n.d(e,"o",(function(){return F})),n.d(e,"p",(function(){return o})),n.d(e,"q",(function(){return N})),n.d(e,"r",(function(){return s}));var r=n("fXoL");let i=null;function o(){return i}function s(t){i||(i=t)}class a{}const u=new r.q("DocumentToken");let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ab)({factory:l,token:t,providedIn:"platform"}),t})();function l(){return Object(r.Kb)(f)}const h=new r.q("Location Initialized");let f=(()=>{class t extends c{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){p()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){p()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(u))},t.\u0275prov=Object(r.Ab)({factory:d,token:t,providedIn:"platform"}),t})();function p(){return!!window.history.pushState}function d(){return new f(Object(r.Kb)(u))}function g(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function v(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function y(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ab)({factory:b,token:t,providedIn:"root"}),t})();function b(t){const e=Object(r.Kb)(u).location;return new w(Object(r.Kb)(c),e&&e.origin||"")}const _=new r.q("appBaseHref");let w=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return g(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(c),r.Kb(_,8))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),E=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=g(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(c),r.Kb(_,8))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),T=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=v(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+y(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(m),r.Kb(c))},t.normalizeQueryParams=y,t.joinWithSlash=g,t.stripTrailingSlash=v,t.\u0275prov=Object(r.Ab)({factory:I,token:t,providedIn:"root"}),t})();function I(){return new T(Object(r.Kb)(m),Object(r.Kb)(c))}function O(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const C=r.kb;class A{}let k=(()=>{class t extends A{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(C(e||this.locale)(t)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.u))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();function N(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class j{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let x=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.T)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new j(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new R(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new R(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(r.P),r.Eb(r.K),r.Eb(r.s))},t.\u0275dir=r.zb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class R{constructor(t,e){this.record=t,this.view=e}}let P=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new D,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){L("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){L("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(r.P),r.Eb(r.K))},t.\u0275dir=r.zb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class D{constructor(){this.$implicit=null,this.ngIf=null}}function L(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.sb)(e)}'.`)}let M=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[{provide:A,useClass:k}]}),t})();const F="browser";function U(t){return"server"===t}let V=(()=>{class t{}return t.\u0275prov=Object(r.Ab)({token:t,providedIn:"root",factory:()=>new q(Object(r.Kb)(u),window,Object(r.Kb)(r.m))}),t})();class q{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=H(this.window.history)||H(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function H(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}},pLZG:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return p}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return C})),n.d(e,"c",(function(){return S})),n.d(e,"d",(function(){return V})),n.d(e,"e",(function(){return O})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return a})),n.d(e,"i",(function(){return u})),n.d(e,"j",(function(){return J})),n.d(e,"k",(function(){return D})),n.d(e,"l",(function(){return q})),n.d(e,"m",(function(){return l})),n.d(e,"n",(function(){return h})),n.d(e,"o",(function(){return z})),n.d(e,"p",(function(){return p})),n.d(e,"q",(function(){return P})),n.d(e,"r",(function(){return v})),n.d(e,"s",(function(){return y})),n.d(e,"t",(function(){return b})),n.d(e,"u",(function(){return M})),n.d(e,"v",(function(){return _})),n.d(e,"w",(function(){return T})),n.d(e,"x",(function(){return d})),n.d(e,"y",(function(){return g})),n.d(e,"z",(function(){return E})),n.d(e,"A",(function(){return m})),n.d(e,"B",(function(){return w})),n.d(e,"C",(function(){return R})),n.d(e,"D",(function(){return N})),n.d(e,"E",(function(){return F})),n.d(e,"F",(function(){return U})),n.d(e,"G",(function(){return L})),n.d(e,"H",(function(){return $})),n.d(e,"I",(function(){return Q})),n.d(e,"J",(function(){return j})),n.d(e,"K",(function(){return K})),n.d(e,"L",(function(){return W})),n.d(e,"M",(function(){return G})),n.d(e,"N",(function(){return I}));var r=n("30Go"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function v(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return p().indexOf("Electron/")>=0}function _(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return p().indexOf("MSAppHost/")>=0}function E(){return!1}function T(){return"indexedDB"in self&&null!=indexedDB}function I(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function O(){return!(!navigator||!navigator.cookieEnabled)}var S=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,C.prototype.create),o}return Object(r.c)(e,t),e}(Error),C=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?A(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new S(i,a,r);return u},t}();function A(t,e){return t.replace(k,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var k=/\{\$([^}]+)}/g;function N(t){return JSON.parse(t)}function j(t){return JSON.stringify(t)}var x=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=N(c(o[0])||""),n=N(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},R=function(t){var e=x(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},P=function(t){var e=x(t).claims;return"object"==typeof e&&!0===e.admin};function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function M(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function F(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function U(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var V=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new H(t,e);return n.subscribe.bind(n)}var H=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function B(){}var K=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function z(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function W(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(z(t,e,r)+"must be a valid function.")}function G(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(z(t,e,r)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},$=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function J(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},qgXg:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},sVev:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})()},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return S})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return y})),n.d(e,"f",(function(){return I})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return E}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class p{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function d(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],v=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.O("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&T("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{T("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},T=(t,...e)=>{Object(u.T)()&&"undefined"!=typeof console&&console[t](...e)};function I(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&T("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const O={provide:class{},useFactory:w,deps:[m,u.z,[new u.A,b]]};let S=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:m,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Cb({type:t}),t.\u0275inj=u.Bb({factory:function(e){return new(e||t)(u.Kb(u.B))},providers:[O]}),t})()}).call(this,n("3UD+")(t))},t6oF:function(t,e,n){"use strict";var r=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Qa(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Qa(o(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function h(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function v(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++m)}var y="closure_uid_"+(1e9*Math.random()>>>0),m=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:_).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function I(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function O(t){return t}function S(t,e,n){this.code=k+t,this.message=e||N[t]||"",this.a=n||null}function C(t){var e=t&&t.code;return e?new S(e.substring(k.length),t.message,t.serverResponse):null}I(S,Error),S.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},S.prototype.toJSON=function(){return this.w()};var A,k="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},j={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function x(t){for(var e in j)if(j[e].id===t)return{firebaseEndpoint:(t=j[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function R(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function L(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function M(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}A=x("__EID__")?"__EID__":void 0,I(P,Error),P.prototype.name="CustomError",I(D,P),D.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new M((function(){return new H}),(function(t){t.reset()}));function q(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function H(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},H.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},H.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},K=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=B(t,e)}function $(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function J(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)}))}function Y(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,st=/\x00/g,at=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var lt=a.navigator;if(lt){var ht=lt.userAgent;if(ht){Z=ht;break t}}Z=""}function ft(t){return ut(Z,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function dt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;L("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function bt(t,e){this.a=t===Tt&&e||"",this.b=Et}function _t(t){return t instanceof bt&&t.constructor===bt&&t.b===Et?t.a:(L("expected object of type Const, got '"+t+"'"),"type_error:Const")}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a},bt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt,Et={},Tt={};function It(){if(void 0===wt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:O,createScript:O,createScriptURL:O})}catch(n){a.console&&a.console.error(n.message)}wt=t}else wt=t}return wt}function Ot(t,e){this.a=e===Nt?t:""}function St(t){return t instanceof Ot&&t.constructor===Ot?t.a:(L("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function Ct(t,e){var n=_t(t);if(!kt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=It();return new Ot(t=e?e.createScriptURL(t):t,Nt)}(t=n.replace(At,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof bt?_t(t):encodeURIComponent(String(t))})))}Ot.prototype.sa=!0,Ot.prototype.ra=function(){return this.a.toString()},Ot.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var At=/%{(\w+)}/g,kt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Nt={};function jt(t,e){this.a=e===Ft?t:""}function xt(t){return t instanceof jt&&t.constructor===jt?t.a:(L("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}jt.prototype.sa=!0,jt.prototype.ra=function(){return this.a.toString()},jt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Rt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Pt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Lt(t){if(t instanceof jt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t))t=new jt(t,Ft);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Pt);t=e&&Rt.test(e[1])?new jt(t,Ft):null}return t}function Mt(t){return t instanceof jt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new jt(t,Ft))}var Ft={},Ut=new jt("about:invalid#zClosurez",Ft);function Vt(t,e,n){this.a=n===qt?t:""}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qt={};function Ht(t,e,n,r){return t=t instanceof jt?t:Mt(t),e=e||a,n=n instanceof bt?_t(n):n||"",e.open(xt(t),n,r,void 0)}function Bt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Kt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=h;var Wt,Gt,Qt=ft("Opera"),$t=ft("Trident")||ft("MSIE"),Jt=ft("Edge"),Yt=Jt||$t,Xt=ft("Gecko")&&!(ut(Z.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),Zt=ut(Z.toLowerCase(),"webkit")&&!ft("Edge");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee="",ne=(Gt=Z,Xt?/rv:([^\);]+)(\)|;)/.exec(Gt):Jt?/Edge\/([\d\.]+)/.exec(Gt):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):Zt?/WebKit\/(\S+)/.exec(Gt):Qt?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(ne&&(ee=ne?ne[1]:""),$t){var re=te();if(null!=re&&re>parseFloat(ee)){Wt=String(re);break t}}Wt=ee}var ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=tt(String(Wt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ct(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ct(0==s[2].length,0==a[2].length)||ct(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var se=a.document&&$t&&(te()||parseInt(Wt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var ae=!$t||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var le,he,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){s="function"==typeof o.item;break t}}s=!1}K(s?X(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout((function(){throw t}),0)}function ve(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(be)}}else he=function(){var t=be;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!ft("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),ye||(he(),ye=!0),me.add(t,e)}var ye=!1,me=new U;function be(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){ge(e)}F(V,t)}ye=!1}function _e(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Re(n,Ee,t)}),(function(t){if(!(t instanceof Ve))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Re(n,Te,t)}))}catch(r){Re(this,Te,r)}}var we=0,Ee=2,Te=3;function Ie(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ie.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Oe=new M((function(){return new Ie}),(function(t){t.reset()}));function Se(t,e,n){var r=Oe.get();return r.g=t,r.b=e,r.f=n,r}function Ce(t){if(t instanceof _e)return t;var e=new _e(h);return Re(e,Ee,t),e}function Ae(t){return new _e((function(e,n){n(t)}))}function ke(t,e,n){Pe(t,e,n,null)||ve(E(e,t))}function Ne(t){return new _e((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)ke(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function je(t,e){t.b||t.a!=Ee&&t.a!=Te||De(t),t.f?t.f.next=e:t.b=e,t.f=e}function xe(t,e,n,r){var i=Se(null,null,null);return i.a=new _e((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ve?o(e):t(i)}catch(s){o(s)}}:o})),i.a.c=t,je(t,i),i.a}function Re(t,e,n){t.a==we&&(t===n&&(e=Te,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Pe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,De(t),e!=Te||n instanceof Ve||function(t,e){t.g=!0,ve((function(){t.g&&Ue.call(null,e)}))}(t,n)))}function Pe(t,e,n,r){if(t instanceof _e)return je(t,Se(e||h,n||null,r)),!0;if(R(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function De(t){t.h||(t.h=!0,ve(t.gc,t))}function Le(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Me(t,e,n,r){if(n==Te&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Fe(e,n,r);else try{e.c?e.g.call(e.f):Fe(e,n,r)}catch(i){Ue.call(null,i)}F(Oe,e)}function Fe(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return xe(this,d(t)?t:null,d(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(t=_e.prototype).oa=function(t,e){return(t=Se(t,t,e)).c=!0,je(this,t),this},t.o=function(t,e){return xe(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new Ve(t);ve((function(){!function t(e,n){if(e.a==we)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==we&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Le(r),Me(r,o,Te,n)))}e.c=null}else Re(e,Te,n)}(this,e)}),this)}},t.$c=function(t){this.a=we,Re(this,Ee,t)},t.ad=function(t){this.a=we,Re(this,Te,t)},t.gc=function(){for(var t;t=Le(this);)Me(this,t,this.a,this.i);this.h=!1};var Ue=ge;function Ve(t){P.call(this,t)}function qe(){0!=He&&(Be[v(this)]=this),this.xa=this.xa,this.pa=this.pa}I(Ve,P),Ve.prototype.name="cancel";var He=0,Be={};function Ke(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=He)){var e=v(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Be[e]}}qe.prototype.xa=!1,qe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var ze=Object.freeze||function(t){return t},We=!$t||9<=Number(se),Ge=$t&&!oe("9"),Qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Je(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{zt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ye[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},I(Je,$e);var Ye=ze({2:"touch",3:"pen",4:"mouse"});Je.prototype.preventDefault=function(){Je.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ge)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Je.prototype.g=function(){return this.a};var Xe="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Ze,this.va=this.Pa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new tn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)ln(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Xe]?wn(t,e,n,g(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i,a=yn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=We?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=bn(n),t&&t[Xe]?En(t,e,n,g(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=bn(n),t&&t[Xe]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Xe])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function pn(t){return t in an?an[t]:an[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=gn(o,r),i=i&&!1!==o)}return i}function gn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&fn(t),n.call(r,e)}function vn(t,e){if(t.va)return!0;if(!We){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Je(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return gn(t,new Je(e,this))}function yn(t){return(t=t[sn])instanceof nn?t:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return d(t)?t:(t[mn]||(t[mn]=function(e){return t.handleEvent(e)}),t[mn])}function _n(){qe.call(this),this.v=new nn(this),this.ac=this,this.gb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Tn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&rn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function In(t,e,n){if(d(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function On(t){var e=null;return new _e((function(n,r){-1==(e=In((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function Sn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Cn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function An(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof An)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function kn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Nn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Nn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Nn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(_n,qe),_n.prototype[Xe]=!0,_n.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;yt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Tn(s,r,!0,t)&&i}if(i=Tn(s=t.b=n,r,!0,t)&&i,i=Tn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tn(s=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Da=function(){if(_n.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=An.prototype).W=function(){kn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return kn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Nn(this.b,t)?this.b[t]:e},t.set=function(t,e){Nn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var jn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof xn?(this.i=void 0!==e?e:t.i,Rn(this,t.c),this.l=t.l,this.a=t.a,Pn(this,t.g),this.f=t.f,Dn(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(jn))?(this.i=!!e,Rn(this,n[1]||"",!0),this.l=Vn(n[2]||""),this.a=Vn(n[3]||"",!0),Pn(this,n[4]),this.f=Vn(n[5]||"",!0),Dn(this,n[6]||"",!0),this.h=Vn(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function Rn(t,e,n){t.c=n?Vn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Pn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Dn(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&($n(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Yn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Wn)),t.b=new Qn(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Mn(t,e){return t.b.get(e)}function Fn(t){return t instanceof xn?new xn(t):new xn(t,void 0)}function Un(t,e,n,r){var i=new xn(null,void 0);return t&&Rn(i,t),e&&(i.a=e),n&&Pn(i,n),r&&(i.f=r),i}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}xn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(qn(e,Bn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?zn:Kn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,Gn)),t.join("")},xn.prototype.resolve=function(t){var e=new xn(this),n=!!t.c;n?Rn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Pn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Dn(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Bn=/[#\/\?@]/g,Kn=/[#\?:]/g,zn=/[#\?]/g,Wn=/[#\?@]/g,Gn=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $n(t){t.a||(t.a=new An,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Jn(t){var e=Cn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=Sn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Yn(t,e){$n(t),e=er(t,e),Nn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Nn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&kn(t)))}function Xn(t,e){return $n(t),e=er(t,e),Nn(t.a.b,e)}function Zn(t,e,n){Yn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),X(n)),t.b+=n.length)}function tr(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new An(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),sr(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":sr(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new rr,t,e),e.join("")}function rr(){}(t=Qn.prototype).add=function(t,e){$n(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){$n(this),this.a.forEach((function(n,r){K(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){$n(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){$n(this);var e=[];if("string"==typeof t)Xn(this,t)&&(e=Y(e,this.a.get(er(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=Y(e,t[n])}return e},t.set=function(t,e){return $n(this),this.c=null,Xn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(or,(function(t){var e=ir[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ir[t]=e),e})),'"')}function ar(){var t=Sr();return $t&&!!se&&11==se||/Edge\/\d+/.test(t)}function ur(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function cr(t,e){e=e||a.window;var n="about:blank";t&&(n=xt(Lt(t)||Ut)),e.location.href=n}function lr(t){return!!((t=(t||Sr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function hr(t){t=t||a.window;try{t.close()}catch(e){}}function fr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Sr().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),Tr(Sr())==wr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof jt?n:Lt(void 0!==n.href?n.href:String(n))||Ut,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(mt(s=de(document,"A"),"HTMLAnchorElement"),e=e instanceof jt?e:Mt(e),s.href=xt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Ht("",r,n,s),t=xt(e),s&&(Yt&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Kt(t)+'">',t=new Vt(t=(r=It())?r.createHTML(t):t,null,qt),r=s.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(L("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Ht(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var pr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dr=/^[^@]+@[^@]+$/;function gr(){var t=null;return new _e((function(e){"complete"==a.document.readyState?e():(t=function(){e()},ln(window,"load",t))})).o((function(e){throw hn(window,"load",t),e}))}function vr(t){return t=t||Sr(),!("file:"!==jr()&&"ionic:"!==jr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function yr(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function mr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function br(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":mr()?"Worker":"Browser"}function _r(){var t=br();return"ReactNative"===t||"Node"===t}var wr="Firefox",Er="Chrome";function Tr(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?wr:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var Ir={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Or(t,e){e=e||[];var n,r=[],i={};for(n in Ir)i[Ir[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=br())?r=Tr(i=Sr()):"Worker"===r&&(r=Tr(i=Sr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Sr(){return a.navigator&&a.navigator.userAgent||""}function Cr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Ar(){try{var t=a.localStorage,e=Lr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ar()||!!a.indexedDB}catch(n){return mr()&&!!a.indexedDB}return!1}function kr(){return(Nr()||"chrome-extension:"===jr()||vr())&&!_r()&&Ar()&&!mr()}function Nr(){return"http:"===jr()||"https:"===jr()}function jr(){return a.location&&a.location.protocol||null}function xr(t){return!lr(t=t||Sr())&&Tr(t)!=wr}function Rr(t){return void 0===t?null:nr(t)}function Pr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Dr(t){if(null!==t)return JSON.parse(t)}function Lr(t){return t||Math.floor(1e9*Math.random()).toString()}function Mr(t){return"Safari"!=Tr(t=t||Sr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Fr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Ur(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Sr(),e=br(),this.b=lr(t)||"ReactNative"===e}function Vr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function qr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Hr(){return!(!Cr("fireauth.oauthhelper",a)&&!Cr("fireauth.iframe",a))}Ur.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Nr()&&"chrome-extension:"!==jr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Br,Kr={};function zr(t){Kr[t]||(Kr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Wr={};Object.defineProperty(Wr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Wr,"abcd",{configurable:!0,enumerable:!0,value:2}),Br=2==Wr.abcd}catch(Gt){Br=!1}function Gr(t,e,n){Br?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Gr(t,n,e[n])}function $r(t){var e={};return Qr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Gr(e,n,Jr(t[n]));return e}function Yr(t){var e=t&&(t[ni]?"phone":null);if(!(e&&t&&t[ei]))throw new S("internal-error","Internal assert: invalid MultiFactorInfo object");Gr(this,"uid",t[ei]),Gr(this,"displayName",t[Zr]||null);var n=null;t[ti]&&(n=new Date(t[ti]).toUTCString()),Gr(this,"enrollmentTime",n),Gr(this,"factorId",e)}function Xr(t){try{var e=new ri(t)}catch(n){e=null}return e}Yr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Zr="displayName",ti="enrolledAt",ei="mfaEnrollmentId",ni="phoneInfo";function ri(t){Yr.call(this,t),Gr(this,"phoneNumber",t[ni])}function ii(t){var e={},n=t[ui],r=t[li],i=t[hi];if(t=Xr(t[ci]),!i||i!=si&&i!=ai&&!n||i==ai&&!r||i==oi&&!t)throw Error("Invalid checkActionCode response!");i==ai?(e[pi]=n||null,e[gi]=n||null,e[fi]=r):(e[pi]=r||null,e[gi]=r||null,e[fi]=n||null),e[di]=t||null,Gr(this,yi,i),Gr(this,vi,Jr(e))}I(ri,Yr),ri.prototype.w=function(){var t=ri.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var oi="REVERT_SECOND_FACTOR_ADDITION",si="EMAIL_SIGNIN",ai="VERIFY_AND_CHANGE_EMAIL",ui="email",ci="mfaInfo",li="newEmail",hi="requestType",fi="email",pi="fromEmail",di="multiFactorInfo",gi="previousEmail",vi="data",yi="operation";function mi(t){var e=Mn(t=Fn(t),bi)||null,n=Mn(t,_i)||null,r=Mn(t,Ti)||null;if(r=r&&Oi[r]||null,!e||!n||!r)throw new S("argument-error",bi+", "+_i+"and "+Ti+" are required in a valid action code URL.");Qr(this,{apiKey:e,operation:r,code:n,continueUrl:Mn(t,wi)||null,languageCode:Mn(t,Ei)||null,tenantId:Mn(t,Ii)||null})}var bi="apiKey",_i="oobCode",wi="continueUrl",Ei="languageCode",Ti="mode",Ii="tenantId",Oi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:oi,signIn:si,verifyAndChangeEmail:ai,verifyEmail:"VERIFY_EMAIL"};function Si(t){try{return new mi(t)}catch(e){return null}}function Ci(t){var e=t[xi];if(void 0===e)throw new S("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new S("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ai];if(n&&"object"==typeof n){e=n[Di];var r=n[Ri];if(n=n[Pi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new S("argument-error",Ri+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new S("argument-error",Pi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new S("argument-error",Di+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new S("missing-android-pkg-name")}}else if(void 0!==n)throw new S("argument-error",Ai+" property must be a non null object when specified.");if(this.f=null,(e=t[ji])&&"object"==typeof e){if("string"==typeof(e=e[Li])&&e.length)this.f=e;else if(void 0!==e)throw new S("argument-error",Li+" property must be a non empty string when specified.")}else if(void 0!==e)throw new S("argument-error",ji+" property must be a non null object when specified.");if(void 0!==(e=t[Ni])&&"boolean"!=typeof e)throw new S("argument-error",Ni+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[ki])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new S("argument-error",ki+" property must be a non empty string when specified.");this.i=t||null}var Ai="android",ki="dynamicLinkDomain",Ni="handleCodeInApp",ji="iOS",xi="url",Ri="installApp",Pi="minimumVersion",Di="packageName",Li="bundleId";function Mi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Fi=null;function Ui(t){var e=qi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Vi(t){try{return new Ui(t)}catch(e){return null}}function qi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Fi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Fi){Fi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Fi[o]&&(Fi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(r){}return null}Ui.prototype.T=function(){return this.f},Ui.prototype.l=function(){return this.c},Ui.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Bi=["client_id","response_type","scope","redirect_uri","state"],Ki={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Bi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Bi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Bi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Hi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function zi(t){for(var e in Ki)if(Ki[e].fa==t)return Ki[e];return null}function Wi(t){var e={};e["facebook.com"]=Yi,e["google.com"]=Zi,e["github.com"]=Xi,e["twitter.com"]=to;var n=t&&t[Qi];try{if(n)return e[n]?new e[n](t):new Ji(t);if(void 0!==t[Gi])return new $i(t)}catch(r){}return null}var Gi="idToken",Qi="providerId";function $i(t){var e=t[Qi];if(!e&&t[Gi]){var n=Vi(t[Gi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Gr(this,"providerId",e),Gr(this,"isNewUser",n)}function Ji(t){$i.call(this,t),Gr(this,"profile",Jr((t=Dr(t.rawUserInfo||"{}"))||{}))}function Yi(t){if(Ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Xi(t){if(Ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Gr(this,"username",this.profile&&this.profile.login||null)}function Zi(t){if(Ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Gr(this,"username",t.screenName||null)}function eo(t){var e=Fn(t),n=Mn(e,"link"),r=Mn(Fn(n),"link");return e=Mn(e,"deep_link_id"),Mn(Fn(e),"link")||e||r||n||t}function no(t,e){if(!t&&!e)throw new S("internal-error","Internal assert: no raw session string available");if(t&&e)throw new S("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ro:io}I(Ji,$i),I(Yi,Ji),I(Xi,Ji),I(Zi,Ji),I(to,Ji);var ro="enroll",io="signin";function oo(){}function so(t,e){return t.then((function(t){if(t[Ws]){var n=Vi(t[Ws]);if(!n||e!=n.i)throw new S("user-mismatch");return t}throw new S("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==k+"user-not-found"?new S("user-mismatch"):t}))}function ao(t,e){if(!e)throw new S("internal-error","failed to construct a credential");this.a=e,Gr(this,"providerId",t),Gr(this,"signInMethod",t)}function uo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function co(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ao(t.providerId,t.pendingToken)}catch(e){}return null}function lo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Gr(this,"idToken",e.idToken),e.accessToken&&Gr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Gr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new S("internal-error","failed to construct a credential");Gr(this,"accessToken",e.oauthToken),Gr(this,"secret",e.oauthTokenSecret)}Gr(this,"providerId",t),Gr(this,"signInMethod",n)}function ho(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Jn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function fo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new lo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function po(t,e){this.Qc=e||[],Qr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(zi(t)||{}).Ja||null,this.ob=null}function go(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new S("argument-error",'SAML provider IDs must be prefixed with "saml."');po.call(this,t,[])}function vo(t){po.call(this,t,Bi),this.a=[]}function yo(){vo.call(this,"facebook.com")}function mo(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new yo).credential({accessToken:e})}function bo(){vo.call(this,"github.com")}function _o(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function wo(){vo.call(this,"google.com"),this.Ca("profile")}function Eo(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new wo).credential({idToken:n,accessToken:e})}function To(){po.call(this,"twitter.com",Hi)}function Io(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new S("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new lo("twitter.com",n,"twitter.com")}function Oo(t,e,n){this.a=t,this.f=e,Gr(this,"providerId","password"),Gr(this,"signInMethod",n===Co.EMAIL_LINK_SIGN_IN_METHOD?Co.EMAIL_LINK_SIGN_IN_METHOD:Co.EMAIL_PASSWORD_SIGN_IN_METHOD)}function So(t){return t&&t.email&&t.password?new Oo(t.email,t.password,t.signInMethod):null}function Co(){Qr(this,{providerId:"password",isOAuthProvider:!1})}function Ao(t,e){if(!(e=ko(e)))throw new S("argument-error","Invalid email link!");return new Oo(t,e.code,Co.EMAIL_LINK_SIGN_IN_METHOD)}function ko(t){return(t=Si(t=eo(t)))&&t.operation===si?t:null}function No(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new S("internal-error");this.a=t,Gr(this,"providerId","phone"),this.fa="phone",Gr(this,"signInMethod","phone")}function jo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new No(e)}return null}function xo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Ro(t){try{this.a=t||r.a.auth()}catch(e){throw new S("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Qr(this,{providerId:"phone",isOAuthProvider:!1})}function Po(t,e){if(!t)throw new S("missing-verification-id");if(!e)throw new S("missing-verification-code");return new No({eb:t,cb:e})}function Do(t){if(t.temporaryProof&&t.phoneNumber)return new No({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Eo(o,n);case"facebook.com":return mo(n);case"github.com":return _o(n);case"twitter.com":return Io(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ao(e,s):new lo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new vo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Lo(t){if(!t.isOAuthProvider)throw new S("invalid-oauth-provider")}function Mo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new S("invalid-auth-event");if(this.g&&this.a)throw new S("invalid-auth-event");if(this.g&&!this.f)throw new S("invalid-auth-event")}function Fo(t){return(t=t||{}).type?new Mo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&C(t.error),t.postBody,t.tenantId):null}function Uo(){this.b=null,this.a=[]}no.prototype.Ha=function(){return Ce(this.a?this.a:this.b)},no.prototype.w=function(){return this.type==ro?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},oo.prototype.ka=function(){},oo.prototype.b=function(){},oo.prototype.c=function(){},oo.prototype.w=function(){},ao.prototype.ka=function(t){return pa(t,uo(this))},ao.prototype.b=function(t,e){var n=uo(this);return n.idToken=e,da(t,n)},ao.prototype.c=function(t,e){return so(ga(t,uo(this)),e)},ao.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},lo.prototype.ka=function(t){return pa(t,ho(this))},lo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,da(t,n)},lo.prototype.c=function(t,e){return so(ga(t,ho(this)),e)},lo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},po.prototype.Ka=function(t){return this.Ib=gt(t),this},I(go,po),I(vo,po),vo.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},vo.prototype.Qb=function(){return X(this.a)},vo.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new S("argument-error","credential failed: must provide the ID token and/or the access token.");return new lo(this.providerId,n,this.providerId)},I(yo,vo),Gr(yo,"PROVIDER_ID","facebook.com"),Gr(yo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(bo,vo),Gr(bo,"PROVIDER_ID","github.com"),Gr(bo,"GITHUB_SIGN_IN_METHOD","github.com"),I(wo,vo),Gr(wo,"PROVIDER_ID","google.com"),Gr(wo,"GOOGLE_SIGN_IN_METHOD","google.com"),I(To,po),Gr(To,"PROVIDER_ID","twitter.com"),Gr(To,"TWITTER_SIGN_IN_METHOD","twitter.com"),Oo.prototype.ka=function(t){return this.signInMethod==Co.EMAIL_LINK_SIGN_IN_METHOD?Ja(t,Ta,{email:this.a,oobCode:this.f}):Ja(t,za,{email:this.a,password:this.f})},Oo.prototype.b=function(t,e){return this.signInMethod==Co.EMAIL_LINK_SIGN_IN_METHOD?Ja(t,Ia,{idToken:e,email:this.a,oobCode:this.f}):Ja(t,Ma,{idToken:e,email:this.a,password:this.f})},Oo.prototype.c=function(t,e){return so(this.ka(t),e)},Oo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Qr(Co,{PROVIDER_ID:"password"}),Qr(Co,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Qr(Co,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),No.prototype.ka=function(t){return t.fb(xo(this))},No.prototype.b=function(t,e){var n=xo(this);return n.idToken=e,Ja(t,Ga,n)},No.prototype.c=function(t,e){var n=xo(this);return n.operation="REAUTH",so(t=Ja(t,Qa,n),e)},No.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Ro.prototype.fb=function(t,e){var n=this.a.a;return Ce(e.verify()).then((function(r){if("string"!=typeof r)throw new S("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==ro?i.Ha().then((function(t){return function(t,e){return Ja(t,Ua,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==io?i.Ha().then((function(e){return function(t,e){return Ja(t,Va,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return Ja(t,Da,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new S("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Qr(Ro,{PROVIDER_ID:"phone"}),Qr(Ro,{PHONE_SIGN_IN_METHOD:"phone"}),Mo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Mo.prototype.T=function(){return this.h},Mo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Vo,qo=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Fn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Bt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Bt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",S.call(this,e,n)}function Bo(t,e,n){S.call(this,t,n),(t=e||{}).Jb&&Gr(this,"email",t.Jb),t.ea&&Gr(this,"phoneNumber",t.ea),t.credential&&Gr(this,"credential",t.credential),t.Zb&&Gr(this,"tenantId",t.Zb)}function Ko(t){if(t.code){var e=t.code||"";0==e.indexOf(k)&&(e=e.substring(k.length));var n={credential:Do(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new S(e,t.message||void 0);return new Bo(e,n,t.message)}return null}function zo(){}function Wo(){}function Go(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Qo(){}function $o(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Sb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function Jo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Yo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Xo(t){this.f=t,this.b=this.c=this.a=null}function Zo(t,e){this.name=t,this.value=e}I(Ho,S),I(Bo,S),Bo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Bo.prototype.toJSON=function(){return this.w()},zo.prototype.c=null,I(Wo,zo),Wo.prototype.a=function(){var t=Go(this);return t?new ActiveXObject(t):new XMLHttpRequest},Wo.prototype.b=function(){var t={};return Go(this)&&(t[0]=!0,t[1]=!0),t},Vo=new Wo,I(Qo,zo),Qo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new $o;throw Error("Unsupported browser")},Qo.prototype.b=function(){return{}},(t=$o.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Jo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Jo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Jo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Yo.prototype.a=null,Yo.prototype.reset=function(t,e,n,r,i){r||T(),delete this.a},Zo.prototype.toString=function(){return this.name};var ts=new Zo("SEVERE",1e3),es=new Zo("WARNING",900),ns=new Zo("CONFIG",700),rs=new Zo("FINE",500);Xo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(L("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new Yo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var is={},os=null;function ss(t){var e;if(os||(os=new Xo(""),is[""]=os,os.c=ns),!(e=is[t])){e=new Xo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ss(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,is[t]=e}return e}function as(t,e){t&&t.log(rs,e,void 0)}function us(t){this.f=t}function cs(t){_n.call(this),this.u=t,this.h=void 0,this.readyState=ls,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ss("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}I(us,zo),us.prototype.a=function(){return new cs(this.f)},us.prototype.b=function(t){return function(){return t}}({}),I(cs,_n);var ls=0;function hs(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function fs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ps(t)}function ps(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ds(t){_n.call(this),this.headers=new An,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=gs,this.u=this.S=!1}(t=cs.prototype).open=function(t,e){if(this.readyState!=ls)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ps(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,fs(this)),this.readyState=ls},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ps(this)),this.a&&(this.readyState=3,ps(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,hs(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?fs(this):ps(this),3==this.readyState&&hs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,fs(this))},t.sc=function(t){this.a&&(this.response=t,fs(this))},t.Ua=function(t){var e=this.i;e&&e.log(es,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&fs(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(es,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(es,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(cs.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),I(ds,_n);var gs="";ds.prototype.b=ss("goog.net.XhrIo");var vs=/^https?$/i,ys=["POST","PUT"];function ms(t){return"content-type"==t.toLowerCase()}function bs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,_s(t),Es(t)}function _s(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ws(t){if(t.c&&void 0!==s)if(t.C[1]&&4==Is(t)&&2==Os(t))as(t.b,Ss(t,"Local request error detected and ignored"));else if(t.i&&4==Is(t))In(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Is(t)){as(t.b,Ss(t,"Request complete")),t.c=!1;try{var e,n=Os(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(jn)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!vs.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Is(t)?t.a.statusText:""}catch(l){as(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+Os(t)+"]",_s(t)}}finally{Es(t)}}}function Es(t,e){if(t.a){Ts(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(ts,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Ts(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Is(t){return t.a?t.a.readyState:0}function Os(t){try{return 2<Is(t)?t.a.status:-1}catch(e){return-1}}function Ss(t,e){return e+" ["+t.R+" "+t.l+" "+Os(t)+"]"}function Cs(t){var e=Fs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function As(t,e,n){t.a=!0,t.c=n,t.f=!e,xs(t)}function ks(t){if(t.a){if(!t.v)throw new Rs(t);t.v=!1}}function Ns(t,e,n,r){t.g.push([e,n,r]),t.a&&xs(t)}function js(t){return G(t.g,(function(t){return d(t[1])}))}function xs(t){if(t.h&&t.a&&js(t)){var e=t.h,n=Ls[e];n&&(a.clearTimeout(n.a),delete Ls[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(R(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,js(t)||(n=!0)}}t.c=e,r&&(u=w(t.m,t,!0),r=w(t.m,t,!1),e instanceof Cs?(Ns(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Ds(e),Ls[e.a]=e,t.h=e.a)}function Rs(){P.call(this)}function Ps(){P.call(this)}function Ds(t){this.a=a.setTimeout(w(this.c,this),0),this.b=t}(t=ds.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",as(this.b,Ss(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(as(this.b,Ss(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Es(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Es(this,!0)),ds.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?ws(this):this.Jc())},t.Jc=function(){ws(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case gs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ts,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return as(this.b,"Can not get response: "+e.message),null}},Cs.prototype.cancel=function(t){if(this.a)this.c instanceof Cs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ps(this),ks(this),As(this,!1,t))}},Cs.prototype.m=function(t,e){this.i=!1,As(this,t,e)},Cs.prototype.then=function(t,e,n){var r,i,o=new _e((function(t,e){r=t,i=e}));return Ns(this,r,(function(t){t instanceof Ps?o.cancel():i(t)})),o.then(t,e,n)},Cs.prototype.$goog_Thenable=!0,I(Rs,P),Rs.prototype.message="Deferred has already fired",Rs.prototype.name="AlreadyCalledError",I(Ps,P),Ps.prototype.message="Deferred was canceled",Ps.prototype.name="CanceledError",Ds.prototype.c=function(){throw delete Ls[this.a],this.b};var Ls={};function Ms(t){var e={},n=e.document||document,r=St(t).toString(),i=de(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new Cs(o),u=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(u=window.setTimeout((function(){Us(i,!0);var t=new Hs(qs,"Timeout reached for loading script "+r);ks(s),As(s,!1,t)}),h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Us(i,e.xd||!1,u),ks(s),As(s,!0,null))},i.onerror=function(){Us(i,!0,u);var t=new Hs(Vs,"Error while loading script "+r);ks(s),As(s,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){mt(t,"HTMLScriptElement"),t.src=St(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=l(e.document):(null===c&&(c=l(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Fs(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Us(t,!0,this.Ma)}}function Us(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Vs=0,qs=1;function Hs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function Bs(t){this.f=t}function Ks(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Gs,this.g=gt(t.secureTokenHeaders||Qs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||$s,this.a=gt(t.firebaseHeaders||Js),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==br(),!(n=a.XMLHttpRequest||n&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!mr())throw new S("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=mr()?new us(self):_r()?new Bs(n):new Qo,this.b=null}I(Hs,P),I(Bs,zo),Bs.prototype.a=function(){return new this.f},Bs.prototype.b=function(){return{}};var zs,Ws="idToken",Gs=new Ur(3e4,6e4),Qs={"Content-Type":"application/x-www-form-urlencoded"},$s=new Ur(3e4,6e4),Js={"Content-Type":"application/json"};function Ys(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Xs(t,e){e&&(t.l=Zs("https://securetoken.googleapis.com/v1/token",e),t.h=Zs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Zs("https://identitytoolkit.googleapis.com/v2/",e))}function Zs(t,e){return t=Fn(t),e=Fn(e.url),t.f=t.a+t.f,Rn(t,e.c),t.a=e.a,Pn(t,e.g),t.toString()}function ta(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ea(t,e,n,r,i,o,s){(function(){var t=Sr();return!((t=Tr(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||$t&&se&&!(9<se))})()||mr()?t=w(t.u,t):(zs||(zs=new _e((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[ra]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ns(t,null,e,void 0)}(Ms(Ct(na,{onload:ra})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=w(t.s,t)),t(e,n,r,i,o,s)}Ks.prototype.T=function(){return this.b},Ks.prototype.u=function(t,e,n,r,i,o){if(mr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new S("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ds(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}wn(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return as(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),En(s,"ready",(function(){u&&clearTimeout(u),Ke(this)})),En(s,"timeout",(function(){u&&clearTimeout(u),Ke(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Vo.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:Vo),t.a.onreadystatechange=w(t.Vb,t);try{as(t.b,Ss(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(s){return as(t.b,Ss(t,"Error opening Xhr: "+s.message)),void bs(t,s)}e=r||"";var o=new An(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)K(t,e,void 0);else for(var n=Cn(t),r=Sn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=ms,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!Q(ys,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ts(t),0<t.g&&(t.u=function(t){return $t&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),as(t.b,Ss(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.s=In(t.Ma,t.g,t)),as(t.b,Ss(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){as(t.b,Ss(t,"Send error: "+s.message)),bs(t,s)}}(s,t,n,r,i)};var na=new bt(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),ra="__fcb"+Math.floor(1e6*Math.random()).toString();function ia(t){if("string"!=typeof(t=t.email)||!dr.test(t))throw new S("invalid-email")}function oa(t){"email"in t&&ia(t)}function sa(t){if(!t[Ws]){if(t.mfaPendingCredential)throw new S("multi-factor-auth-required",null,gt(t));throw new S("internal-error")}}function aa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new S("internal-error")}else{if(!t.sessionInfo)throw new S("missing-verification-id");if(!t.code)throw new S("missing-verification-code")}}Ks.prototype.s=function(t,e,n,r,i){var o=this;zs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ks.prototype.zb=function(){return Ja(this,Fa,{})},Ks.prototype.Bb=function(t,e){return Ja(this,La,{idToken:t,email:e})},Ks.prototype.Cb=function(t,e){return Ja(this,Ma,{idToken:t,password:e})};var ua={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ca(t){if(!t.phoneVerificationInfo)throw new S("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new S("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new S("missing-verification-code")}function la(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new S("internal-error")}function ha(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Xn(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function fa(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Ko(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Ko(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Ko(t)):t.errorMessage&&(e=Ya(t.errorMessage)),e)throw e;sa(t)}function pa(t,e){return e.returnIdpCredential=!0,Ja(t,qa,e)}function da(t,e){return e.returnIdpCredential=!0,Ja(t,Ba,e)}function ga(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ja(t,Ha,e)}function va(t){if(!t.oobCode)throw new S("invalid-action-code")}(t=Ks.prototype).Db=function(t,e){var n={idToken:t},r=[];return pt(ua,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Ja(this,La,n)},t.vb=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),Ja(this,ja,t)},t.wb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),Ja(this,Aa,t)},t.ub=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ja(this,ka,t)},t.Eb=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ja(this,Na,t)},t.fb=function(t){return Ja(this,Wa,t)},t.nb=function(t,e){return Ja(this,Pa,{oobCode:t,newPassword:e})},t.Ra=function(t){return Ja(this,ma,{oobCode:t})},t.jb=function(t){return Ja(this,ya,{oobCode:t})};var ya={endpoint:"setAccountInfo",A:va,Z:"email",B:!0},ma={endpoint:"resetPassword",A:va,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new S("internal-error")},B:!0},ba={endpoint:"signupNewUser",A:function(t){if(ia(t),!t.password)throw new S("weak-password")},G:sa,V:!0,B:!0},_a={endpoint:"createAuthUri",B:!0},wa={endpoint:"deleteAccount",N:["idToken"]},Ea={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new S("internal-error")}},Ta={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ia,G:sa,V:!0,B:!0},Ia={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ia,G:sa,V:!0},Oa={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ca,G:sa,B:!0,Na:!0},Sa={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ca,G:sa,B:!0,Na:!0},Ca={endpoint:"getAccountInfo"},Aa={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new S("internal-error");ia(t)},Z:"email",B:!0},ka={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",B:!0},Na={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",B:!0},ja={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new S("internal-error");ia(t)},Z:"email",B:!0},xa={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Ra={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new S("internal-error")}},Pa={endpoint:"resetPassword",A:va,Z:"email",B:!0},Da={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},La={endpoint:"setAccountInfo",N:["idToken"],A:oa,V:!0},Ma={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(oa(t),!t.password)throw new S("weak-password")},G:sa,V:!0},Fa={endpoint:"signupNewUser",G:sa,V:!0,B:!0},Ua={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new S("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new S("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},Va={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},qa={endpoint:"verifyAssertion",A:la,Ya:ha,G:fa,V:!0,B:!0},Ha={endpoint:"verifyAssertion",A:la,Ya:ha,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new S("user-not-found");if(t.errorMessage)throw Ya(t.errorMessage);sa(t)},V:!0,B:!0},Ba={endpoint:"verifyAssertion",A:function(t){if(la(t),!t.idToken)throw new S("internal-error")},Ya:ha,G:fa,V:!0},Ka={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new S("invalid-custom-token")},G:sa,V:!0,B:!0},za={endpoint:"verifyPassword",A:function(t){if(ia(t),!t.password)throw new S("wrong-password")},G:sa,V:!0,B:!0},Wa={endpoint:"verifyPhoneNumber",A:aa,G:sa,B:!0},Ga={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new S("internal-error");aa(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Ko(t);sa(t)}},Qa={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:aa,G:sa,B:!0},$a={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ws]^!!t.refreshToken)throw new S("internal-error")},B:!0,Na:!0};function Ja(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Ae(new S("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Ce(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Fn(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",T().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new _e((function(e,n){ea(t,a.toString(),(function(t){t?t.error?n(Xa(t,o||{})):e(t):n(new S("network-request-failed"))}),r,u?void 0:nr(Pr(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new S("internal-error");return r[e.Z]}))}function Ya(t){return Xa({error:{errors:[{message:t}],code:400,message:t}})}function Xa(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new S(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new S(r[i],e);return!e&&t&&(e=Rr(t)),new S("internal-error",e)}function Za(t){this.b=t,this.a=null,this.rb=function(t){return(ru||(ru=new _e((function(t,e){function n(){Fr(),Cr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Fr(),e(Error("Network Error"))},timeout:eu.get()})}if(Cr("gapi.iframes.Iframe"))t();else if(Cr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Cr("gapi.load")?n():e(Error("Network Error"))},Ce(Ms(r=Ct(tu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw ru=null,t})))).then((function(){return new _e((function(e,n){Cr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),nu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var tu=new bt(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),eu=new Ur(3e4,6e4),nu=new Ur(5e3,15e3),ru=null;function iu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Un((t=Fn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function ou(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function su(t){try{return r.a.app(t).auth().Ga()}catch(e){return[]}}function au(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function uu(t){var e=ur();return function(t){return Ja(t,xa,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Fn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Fn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:pr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ho(ur())}))}function cu(t){return t.m||(t.m=gr().then((function(){if(!t.u){var e=t.c,n=t.i,r=su(t.b),i=new iu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new Za(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Fo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ce(n)}return n.status="ERROR",Ce(n)}))}(t)}))),t.m}function lu(t){return t.l||(t.C=t.c?Or(t.c,su(t.b)):null,t.l=new Ks(t.g,x(t.i),t.C),t.f&&Xs(t.l,t.f)),t.l}function hu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new ou(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=gt(u||null),t.f=c,t.yb(l).toString()}function fu(t){if(this.a=t||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new S("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function pu(t){this.b=t,this.a={},this.f=w(this.c,this)}iu.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Yn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Yn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Yn(this.a.b,"fw"),this.a.toString()},ou.prototype.yb=function(t){return this.h=t,this},ou.prototype.toString=function(){if(this.v){var t=Fn(this.v.url);t=Un(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.a.app(this.c).auth().la()}catch(u){n=null}for(var i in e.ob=n,Ln(t,"providerId",this.a.providerId),e=Pr((n=this.a).Ib))e[i]=e[i].toString();i=n.Qc,e=gt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),dt(e)||Ln(t,"customParameters",Rr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Ln(t,"scopes",n.join(",")),this.l?Ln(t,"redirectUrl",this.l):Yn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Yn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Yn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Mn(t,a)&&Ln(t,a,this.b[a]);return this.h?Ln(t,"tid",this.h):Yn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Yn(t.b,"eid"),(a=su(this.c)).length&&Ln(t,"fw",a.join(",")),t.toString()},(t=au.prototype).Ob=function(t,e,n){var r=new S("popup-closed-by-user"),i=new S("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return cu(t).then((function(){return function(t,e){return t.rb.then((function(){return new _e((function(n){t.a.send(e.type,e,n,Cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&hr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new _e((function(e){return function n(){On(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return On(n).then((function(){e(r)}))}))},t.Xb=function(){var t=Sr();return!xr(t)&&!Mr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return Ae(new S("popup-blocked"));if(s&&!xr())return this.ma().o((function(e){hr(t),i(e)})),r(),Ce();this.a||(this.a=uu(lu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw hr(t),i(e),e}));return r(),e})).then((function(){Lo(n),s||cr(hu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=uu(lu(this)));var i=this;return this.a.then((function(){Lo(e),cr(hu(i.s,i.g,i.b,t,e,ur(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return cu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new S("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){J(this.h,(function(e){return e==t}))},(t=fu.prototype).get=function(t){return Ce(this.a.getItem(t)).then((function(t){return t&&Dr(t)}))},t.set=function(t,e){return Ce(this.a.setItem(t,Rr(e)))},t.U=function(t){return Ce(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var du,gu=[];function vu(t,e,n){dt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function yu(t){this.a=t}function mu(t){this.c=t,this.b=!1,this.a=[]}function bu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ae(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _e((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return _u(t,c),e})).o((function(e){throw _u(t,c),e}))}function _u(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),J(t.a,(function(t){return t==e}))}}function wu(){if(!Iu())throw new S("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;mr()&&self?(this.v=function(){var t=mr()?self:null;if(K(gu,(function(n){n.b==t&&(e=n)})),!e){var e=new pu(t);gu.push(e)}return e}(),vu(this.v,"keyChanged",(function(e,n){return ku(t).then((function(e){return 0<e.length&&K(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),vu(this.v,"ping",(function(){return Ce(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?Ce().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ce(null)}().then((function(e){(t.h=e)&&(t.g=new mu(new yu(e)),bu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Eu(t){return t.i||(t.i=function t(e){return new _e((function(n,r){var i=e.m.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(e){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new _e((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(e).then((function(){return t(e)})).then((function(t){n(t)})).o((function(t){r(t)}))}}))}(t)),t.i}function Tu(t,e){var n=0;return new _e((function r(i,o){Eu(t).then(e).then(i).o((function(e){if(!(3<++n))return Eu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Iu(){try{return!!a.indexedDB}catch(Gt){return!1}}function Ou(t){return t.objectStore("firebaseLocalStorage")}function Su(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Cu(t){return new _e((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Au(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?bu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ce()}function ku(t){return Eu(t).then((function(t){var e=Ou(Su(t,!1));return e.getAll?Cu(e.getAll()):new _e((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function Nu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ce().then((function(){if(Iu()){var t=Lr(),r="__sak"+t;return du||(du=new wu),(n=du).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){K(e.a,(function(e){e(t)}))})),t}))}function xu(){this.a={},this.type="inMemory"}function Ru(){if(!function(){var t="Node"==br();if(!(t=Pu()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==br())throw new S("internal-error","The LocalStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=Pu()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function Pu(){try{var t=a.localStorage,e=Lr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Du(){this.type="nullStorage"}function Lu(){if(!function(){var t="Node"==br();if(!(t=Mu()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==br())throw new S("internal-error","The SessionStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=Mu()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Mu(){try{var t=a.sessionStorage,e=Lr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Fu(){var t={};t.Browser=qu,t.Node=Hu,t.ReactNative=Bu,t.Worker=Ku,this.a=t[br()]}pu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];K(r,(function(e){i.push(Ce().then((function(){return e(t.origin,t.data.data)})))})),Ne(i).then((function(r){var i=[];K(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),K(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},yu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},mu.prototype.close=function(){for(;0<this.a.length;)_u(this,this.a[0]);this.b=!0},(t=wu.prototype).set=function(t,e){var n=this,r=!1;return Tu(this,(function(e){return Cu((e=Ou(Su(e,!0))).get(t))})).then((function(i){return Tu(n,(function(o){if(o=Ou(Su(o,!0)),i)return i.value=e,Cu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Cu(o.add(s))}))})).then((function(){return n.c[t]=e,Au(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Tu(this,(function(e){return Cu(Ou(Su(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Tu(this,(function(r){return n=!0,e.b++,Cu(Ou(Su(r,!0)).delete(t))})).then((function(){return delete e.c[t],Au(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){Nu(t),function e(){t.f=setTimeout((function(){t.l=ku(t).then((function(e){0<e.length&&K(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){J(this.a,(function(e){return e==t})),0==this.a.length&&Nu(this)},(t=ju.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){J(this.a,(function(e){return e==t}))},(t=xu.prototype).get=function(t){return Ce(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ce()},t.U=function(t){return delete this.a[t],Ce()},t.ca=function(){},t.ia=function(){},(t=Ru.prototype).get=function(t){var e=this;return Ce().then((function(){return Dr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Rr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&un(a.window,"storage",t)},t.ia=function(t){a.window&&hn(a.window,"storage",t)},(t=Du.prototype).get=function(){return Ce(null)},t.set=function(){return Ce()},t.U=function(){return Ce()},t.ca=function(){},t.ia=function(){},(t=Lu.prototype).get=function(t){var e=this;return Ce().then((function(){return Dr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Rr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Uu,Vu,qu={F:Ru,bb:Lu},Hu={F:Ru,bb:Lu},Bu={F:fu,bb:Du},Ku={F:Ru,bb:Du},zu={rd:"local",NONE:"none",td:"session"};function Wu(){var t=!(Mr(Sr())||!yr()),e=xr(),n=Ar();this.m=t,this.h=e,this.l=n,this.a={},Uu||(Uu=new Fu),t=Uu;try{this.g=!ar()&&Hr()||!a.indexedDB?new t.a.F:new ju(mr()?new xu:new t.a.F)}catch(r){this.g=new xu,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new xu}this.v=new xu,this.f=w(this.Yb,this),this.b={}}function Gu(){return Vu||(Vu=new Wu),Vu}function Qu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function $u(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ju(t,e,n){return n=$u(e,n),"local"==e.F&&(t.b[n]=null),Qu(t,e.F).U(n)}function Yu(t){t.c&&(clearInterval(t.c),t.c=null)}function Xu(t){this.a=t,this.b=Gu()}(t=Wu.prototype).get=function(t,e){return Qu(this,t.F).get($u(t,e))},t.set=function(t,e,n){var r=$u(t,n),i=this,o=Qu(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=$u(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),dt(this.a)&&(Qu(this,"local").ca(this.f),this.h||(ar()||!Hr())&&a.indexedDB||!this.l||function(t){Yu(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Je({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=$u(t,e),this.a[t]&&(J(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),dt(this.a)&&(Qu(this,"local").ia(this.f),Yu(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Qu(this,"local").ia(this.f):Yu(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},$t&&se&&10==se&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else K(t,w(this.mb,this))},t.mb=function(t){this.a[t]&&K(this.a[t],(function(t){t()}))};var Zu,tc={name:"authEvent",F:"local"};function ec(){this.a=Gu()}function nc(t,e){this.b=rc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===Zu&&(Zu=a.Int32Array?new Int32Array(lc):lc),this.reset()}I(nc,(function(){this.b=-1}));for(var rc=64,ic=rc-1,oc=[],sc=0;sc<ic;sc++)oc[sc]=0;var ac=Y(128,oc);function uc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|Zu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function cc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(uc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(uc(t),i=0)}}t.c=i,t.g+=n}nc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):X(this.h)};var lc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function hc(){nc.call(this,8,fc)}I(hc,nc);var fc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function pc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new ec,this.g=new Xu(this.h),this.f=null,this.b=[],this.a=this.c=null}function dc(t){return new S("invalid-cordova-configuration",t)}function gc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function vc(t){return t.f||(t.f=t.ma().then((function(){return new _e((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),yc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=eo(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Dr(Mn(o=Fn(i),"firebaseError")||null))?C(o):null)?new Mo(r.c,r.b,null,null,o,null,r.T()):new Mo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}gc(t,i)}))}var n=new Mo("unknown",null,null,null,new S("no-auth-event")),r=!1,i=On(500).then((function(){return yc(t).then((function(){r||gc(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Cr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},qo||(qo=new Uo),function(t){var e=qo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Cr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function yc(t){var e=null;return function(t){return t.b.get(tc,t.a).then((function(t){return Fo(t)}))}(t.g).then((function(n){return e=n,Ju((n=t.g).b,tc,n.a)})).then((function(){return e}))}function mc(t){this.a=t,this.b=Gu()}(t=pc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(vr(void 0)?gr().then((function(){return new _e((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ae(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Cr("universalLinks.subscribe",a))throw dc("cordova-universal-links-plugin-fix is not installed");if(void 0===Cr("BuildInfo.packageName",a))throw dc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Cr("cordova.plugins.browsertab.openUrl",a))throw dc("cordova-plugin-browsertab is not installed");if("function"!=typeof Cr("cordova.InAppBrowser.open",a))throw dc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new S("cordova-not-ready")}))},t.Ob=function(t,e){return e(new S("operation-not-supported-in-this-environment")),Ce()},t.Mb=function(){return Ae(new S("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Ae(new S("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=Ce().then((function(){return Lo(e),vc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Mo(e,r,null,o,new S("no-auth-event"),null,i),u=Cr("BuildInfo.packageName",a);if("string"!=typeof u)throw new S("invalid-cordova-configuration");var c=Cr("BuildInfo.displayName",a),l={};if(Sr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Sr().toLowerCase().match(/android/))return Ae(new S("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new hc;cc(e,t),t=[];var n=8*e.g;cc(e,ac,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(uc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),l.sessionId=o;var h=hu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(tc,s.w(),e)})).then((function(){var e=Cr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new S("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Cr("cordova.plugins.browsertab.openUrl",a)))throw new S("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Cr("cordova.InAppBrowser.open",a)))throw new S("invalid-cordova-configuration");e=Sr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new _e((function(t,e){u=function(){var e=Cr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Vr()&&c()},o.addEventListener("resume",c=function(){s||(s=On(2e3).then((function(){e(new S("redirect-cancelled-by-user"))})))},!1),Sr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return yc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),vc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Mo("unknown",null,null,null,new S("no-auth-event")),t(e))}))},t.Sa=function(t){J(this.b,(function(e){return e==t}))};var bc={name:"pendingRedirect",F:"session"};function _c(t){return Ju(t.b,bc,t.a)}function wc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new Lc,this.C=new qc,this.g=new mc(Pc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Ec(this.D,this.v,this.m,A,this.J)}function Ec(t,e,n,i,o){var s=r.a.SDK_VERSION||null;return vr()?new pc(t,e,n,s,i,o):new au(t,e,n,s,i,o)}function Tc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Ic(t){t.a.Xb()&&Tc(t).o((function(e){var n=new Mo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Nc(e)&&t.s(n)})),t.a.Tb()||Mc(t.b)}function Oc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(bc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?_c(t.g).then((function(){Tc(t).o((function(e){var n=new Mo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Nc(e)&&t.s(n)}))})):Ic(t)})).o((function(){Ic(t)}))}function Sc(t,e){J(t.h,(function(t){return t==e}))}wc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Ec(this.D,this.v,this.m,null,this.J),this.i={}},wc.prototype.s=function(t){if(!t)throw new S("invalid-auth-event");if(6e5<=T()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=T())),e=!0;break}}return Mc(this.b),e};var Cc=new Ur(2e3,1e4),Ac=new Ur(3e4,6e4);function kc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Nc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function jc(t,e,n,r,i){var o;return function(t){return t.b.set(bc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Nc(e))throw new S("operation-not-supported-in-this-environment");return o=e,_c(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new _e((function(){})):_c(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function xc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Cc.get())}wc.prototype.qa=function(){return this.b.qa()};var Rc={};function Pc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Dc(t,e,n,r){var i=Pc(e,n,r);return Rc[i]||(Rc[i]=new wc(t,e,n,r)),Rc[i]}function Lc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Mc(t){t.g||(t.g=!0,Vc(t,!1,null,null))}function Fc(t){t.g&&!t.i&&Vc(t,!1,null,null)}function Uc(t,e){if(t.b=function(){return Ce(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Vc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ae(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Uc(t,n):Uc(t,{user:null}),t.f=[],t.c=[]}function qc(){}function Hc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Bc(t,e){this.a=e,Gr(this,"verificationId",t)}function Kc(t,e,n,r){return new Ro(t).fb(e,n).then((function(t){return new Bc(t,r)}))}function zc(t){var e=qi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new S("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Qr(this,{token:t,expirationTime:qr(1e3*e.exp),authTime:qr(1e3*e.auth_time),issuedAtTime:qr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Wc(t,e,n){var r=e&&e[Qc];if(!r)throw new S("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new no(null,r),this.b=[];var i=this;K(e[Gc]||[],(function(t){(t=Xr(t))&&i.b.push(t)})),Gr(this,"auth",this.a),Gr(this,"session",this.c),Gr(this,"hints",this.b)}Lc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Lc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Vc(this,!0,null,t.a),Ce()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Vc(t,a,e,null)})).o((function(e){Vc(t,a,null,e)}))}(this,t,e):Ae(new S("invalid-auth-event")):(Vc(this,!1,null,null),Ce())}else Ae(new S("invalid-auth-event"))},Lc.prototype.qa=function(){var t=this;return new _e((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new S("timeout");t.a&&t.a.cancel(),t.a=On(Ac.get()).then((function(){t.b||(t.g=!0,Vc(t,!0,null,e))}))}(t))}))},qc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ce()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ae(new S("invalid-auth-event"))}else Ae(new S("invalid-auth-event"))},Bc.prototype.confirm=function(t){return t=Po(this.verificationId,t),this.a(t)};var Gc="mfaInfo",Qc="mfaPendingCredential";function $c(t,e,n,r){S.call(this,"multi-factor-auth-required",r,e),this.b=new Wc(t,e,n),Gr(this,"resolver",this.b)}function Jc(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new $c(e,t.serverResponse,n,t.message)}catch(r){}return null}function Yc(){}function Xc(t){Gr(this,"factorId",t.fa),this.a=t}function Zc(t){if(Xc.call(this,t),this.a.fa!=Ro.PROVIDER_ID)throw new S("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function tl(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function el(t,e){this.a=t,this.b=[],this.c=w(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&K(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ei]=t.uid),t.displayName&&(r[Zr]=t.displayName),t.enrollmentTime&&(r[ti]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ni]=t.phoneNumber);try{e=new ri(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),nl(this,n)}function nl(t,e){t.b=e,Gr(t,"enrolledFactors",e)}function rl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function il(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function ol(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function sl(t,e){t.b=Vi(e[Ws]||""),t.a=e.refreshToken,ol(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function al(t,e){this.a=t||null,this.b=e||null,Qr(this,{lastSignInTime:qr(e||null),creationTime:qr(t||null)})}function ul(t,e,n,r,i,o){Qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function cl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.a.SDK_VERSION?Or(r.a.SDK_VERSION):null;this.a=new Ks(this.l,x(A),i),t.emulatorConfig&&Xs(this.a,t.emulatorConfig),this.b=new il(this.a),yl(this,e[Ws]),sl(this.b,e),Gr(this,"refreshToken",this.b.a),_l(this,n||{}),_n.call(this),this.R=!1,this.s&&kr()&&(this.i=Dc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new rl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=w(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){Xs(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){fl(o,t.f)},this.ba=null,this.O=new el(this,n),Gr(this,"multiFactor",this.O)}function ll(t,e){t.ja&&hn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&un(e,"languageCodeChanged",t.Oa)}function hl(t,e){t.X&&hn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&un(e,"emulatorConfigChanged",t.Aa)}function fl(t,e){t.$=e,ta(t.a,r.a.SDK_VERSION?Or(r.a.SDK_VERSION,t.$):null)}function pl(t,e){t.ba&&hn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&un(e,"frameworkChanged",t.Ba)}function dl(t){try{return r.a.app(t.m).auth()}catch(e){throw new S("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function gl(t){t.D||t.u.b||(t.u.start(),hn(t,"tokenChanged",t.aa),un(t,"tokenChanged",t.aa))}function vl(t){hn(t,"tokenChanged",t.aa),t.u.stop()}function yl(t,e){t.za=e,Gr(t,"_lat",e)}function ml(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ne(e).then((function(){return t}))}function bl(t){t.i&&!t.R&&(t.R=!0,Oc(t.i,t))}function _l(t,e){Qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new al(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function wl(){}function El(t){return Ce().then((function(){if(t.D)throw new S("app-deleted")}))}function Tl(t){return W(t.providerData,(function(t){return t.providerId}))}function Il(t,e){e&&(Ol(t,e.providerId),t.providerData.push(e))}function Ol(t,e){J(t.providerData,(function(t){return t.providerId==e}))}function Sl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Gr(t,e,n)}function Cl(t,e){t!=e&&(Qr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Gr(t,"metadata",e.metadata?function(t){return new al(t.a,t.b)}(e.metadata):new al),K(e.providerData,(function(e){Il(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Gr(t,"refreshToken",t.b.a),nl(t.O,e.O.b))}function Al(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return Ja(t.a,Ca,{idToken:e}).then(w(t.Kc,t))}(t,e).then((function(){return n||Sl(t,"isAnonymous",!1),e}))}))}function kl(t,e){e[Ws]&&t.za!=e[Ws]&&(sl(t.b,e),t.dispatchEvent(new tl("tokenChanged")),yl(t,e[Ws]),Sl(t,"refreshToken",t.b.a))}function Nl(t,e){return Al(t).then((function(){if(Q(Tl(t),e))return ml(t).then((function(){throw new S("provider-already-linked")}))}))}function jl(t,e,n){return $r({user:t,credential:Do(e),additionalUserInfo:e=Wi(e),operationType:n})}function xl(t,e){return kl(t,e),t.reload().then((function(){return t}))}function Rl(t,e,n,i,o){if(!kr())return Ae(new S("operation-not-supported-in-this-environment"));if(t.h&&!o)return Ae(t.h);var s=zi(n.providerId),a=Lr(t.uid+":::"),u=null;(!xr()||yr())&&t.s&&n.isOAuthProvider&&(u=hu(t.s,t.l,t.m,e,n,null,a,r.a.SDK_VERSION||null,null,null,t.tenantId));var c=fr(u,s&&s.ua,s&&s.ta);return i=i().then((function(){if(Dl(t),!o)return t.I().then((function(){}))})).then((function(){return kc(t.i,c,e,n,a,!!u,t.tenantId)})).then((function(){return new _e((function(n,r){t.na(e,null,new S("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=xc(t.i,t,e,c,a)}))})).then((function(t){return c&&hr(c),t?$r(t):null})).o((function(t){throw c&&hr(c),t})),Ll(t,i,o)}function Pl(t,e,n,r,i){if(!kr())return Ae(new S("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ae(t.h);var o=null,s=Lr(t.uid+":::");return r=r().then((function(){if(Dl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,ml(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Ul,t.w(),e.a)),e})).then((function(){return jc(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Vl(t.ha);throw o})).then((function(){if(o)throw o})),Ll(t,r,i)}function Dl(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new S("internal-error");throw new S("auth-domain-config-required")}}function Ll(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Ae(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new tl("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){$(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Jc(e.w(),dl(t),w(t.jc,t))),n||e}))}function Ml(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ws]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new cl(e,n,t);return t.providerData&&K(t.providerData,(function(t){t&&Il(i,$r(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Fl(t){this.a=t,this.b=Gu()}Wc.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=gt(e.f);return delete n[Gc],delete n[Qc],yt(n,t),e.g(n)}))},I($c,S),Yc.prototype.sb=function(t,e,n){return e.type==ro?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:xo(t.a)}),Ja(e,Oa,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:xo(t.a)}),Ja(e,Sa,n)}))}(this,t,e)},I(Xc,Yc),I(Zc,Xc),I(tl,$e),(t=el.prototype).yc=function(t){nl(this,function(t){var e=[];return K(t.mfaInfo||[],(function(t){(t=Xr(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new no(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return kl(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Ja(r,$a,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=z(e.b,(function(t){return t.uid!=n}));return nl(e,r),kl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(t){return t.w()}))}}},rl.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=On(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=a.document,e=null;return Vr()||!t?Ce():new _e((function(n){e=function(){Vr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},rl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},il.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},il.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ae(new S("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new _e((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ea(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Xa(t)):t.access_token&&t.refresh_token?n(t):r(new S("internal-error")):r(new S("network-request-failed"))}),"POST",Jn(e).toString(),t.g,t.m.get()):r(new S("internal-error"))}))}(t.f,e).then((function(e){return t.b=Vi(e.access_token),t.a=e.refresh_token,ol(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ce(null):Ce({accessToken:this.b.toString(),refreshToken:this.a})},al.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(cl,_n),cl.prototype.wa=function(t){this.ya=t,Ys(this.a,t)},cl.prototype.la=function(){return this.ya},cl.prototype.Ga=function(){return X(this.$)},cl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Gr(cl.prototype,"providerId","firebase"),(t=cl.prototype).reload=function(){var t=this;return Ll(this,El(this).then((function(){return Al(t).then((function(){return ml(t)})).then(wl)})))},t.oc=function(t){return this.I(t).then((function(t){return new zc(t)}))},t.I=function(t){var e=this;return Ll(this,El(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new S("internal-error");return t.accessToken!=e.za&&(yl(e,t.accessToken),e.dispatchEvent(new tl("tokenChanged"))),Sl(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new S("internal-error");_l(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,(function(t){return new ul(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Il(this,e[n]);Sl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new tl("userReloaded",{hd:t}))},t.Lc=function(t){return zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Ll(this,t.c(this.a,this.uid).then((function(t){return kl(e,t),n=jl(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Ll(this,Nl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=jl(e,t,"link"),xl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Ll(this,Nl(this,"phone").then((function(){return Kc(dl(n),t,e,w(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Ll(this,Ce().then((function(){return Kc(dl(n),t,e,w(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Ll(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return kl(e,t),e.reload()})))},t.ed=function(t){var e=this;return Ll(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return kl(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Ll(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return kl(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return El(this);var e=this;return Ll(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return kl(e,t),Sl(e,"displayName",t.displayName||null),Sl(e,"photoURL",t.photoUrl||null),K(e.providerData,(function(t){"password"===t.providerId&&(Gr(t,"displayName",e.displayName),Gr(t,"photoURL",e.photoURL))})),ml(e)})).then(wl))},t.cd=function(t){var e=this;return Ll(this,Al(this).then((function(n){return Q(Tl(e),t)?function(t,e,n){return Ja(t,Ea,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return K(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),K(Tl(e),(function(t){n[t]||Ol(e,t)})),n[Ro.PROVIDER_ID]||Gr(e,"phoneNumber",null),ml(e)})):ml(e).then((function(){throw new S("no-such-provider")}))})))},t.delete=function(){var t=this;return Ll(this,this.I().then((function(e){return Ja(t.a,wa,{idToken:e})})).then((function(){t.dispatchEvent(new tl("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");ll(t,null),hl(t,null),pl(t,null),t.J=[],t.D=!0,vl(t),Gr(t,"refreshToken",null),t.i&&Sc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?w(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?w(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Lb,this):null},t.Ec=function(t){var e=this;return Rl(this,"linkViaPopup",t,(function(){return Nl(e,t.providerId).then((function(){return ml(e)}))}),!1)},t.Nc=function(t){return Rl(this,"reauthViaPopup",t,(function(){return Ce()}),!0)},t.Fc=function(t){var e=this;return Pl(this,"linkViaRedirect",t,(function(){return Nl(e,t.providerId)}),!1)},t.Oc=function(t){return Pl(this,"reauthViaRedirect",t,(function(){return Ce()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ll(this,this.I().then((function(n){return da(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=jl(i,t,"link"),xl(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ll(this,Ce().then((function(){return so(ga(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=jl(i,t,"reauthenticate"),kl(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return Ll(this,this.I().then((function(e){return n=e,void 0===t||dt(t)?{}:Mi(new Ci(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Ll(this,this.I().then((function(t){return r=t,void 0===e||dt(e)?{}:Mi(new Ci(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Ll(this,t=so(Ce(t),n.uid).then((function(t){return e=jl(n,t,"reauthenticate"),kl(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),K(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.O.w()),t};var Ul={name:"redirectUser",F:"session"};function Vl(t){return Ju(t.b,Ul,t.a)}function ql(t){this.a=t,this.b=Gu(),this.c=null,this.f=function(t){var e=Kl("local"),n=Kl("session"),r=Kl("none");return function(t,e,n){var r=$u(e,n),i=Qu(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Dr(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Bl,t.a).then((function(t){return t?Kl(t):e}))}))}))})).then((function(e){return t.c=e,Hl(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Kl("local"),this.a,w(this.g,this))}function Hl(t,e){var n,r=[];for(n in zu)zu[n]!==e&&r.push(Ju(t.b,Kl(zu[n]),t.a));return r.push(Ju(t.b,Bl,t.a)),function(t){return new _e((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)ke(t[a],E(o,a),s);else e(i)}))}(r)}ql.prototype.g=function(){var t=this,e=Kl("local");Ql(this,(function(){return Ce().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Hl(t,"local").then((function(){t.c=e}))}))}))};var Bl={name:"persistence",F:"session"};function Kl(t){return{name:"authUser",F:t}}function zl(t,e){return Ql(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function Wl(t){return Ql(t,(function(){return Ju(t.b,t.c,t.a)}))}function Gl(t,e,n){return Ql(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Ml(t||{})}))}))}function Ql(t,e){return t.f=t.f.then(e,e),t.f}function $l(t){if(this.l=!1,Gr(this,"settings",new Hc),Gr(this,"app",t),!rh(this).options||!rh(this).options.apiKey)throw new S("invalid-api-key");t=r.a.SDK_VERSION?Or(r.a.SDK_VERSION):null,this.a=new Ks(rh(this).options&&rh(this).options.apiKey,x(A),t),this.R=[],this.s=[],this.O=[],this.hb=r.a.INTERNAL.createSubscribe(w(this.zc,this)),this.X=void 0,this.bc=r.a.INTERNAL.createSubscribe(w(this.Ac,this)),eh(this,null),this.i=new ql(rh(this).options.apiKey+":"+rh(this).name),this.D=new Fl(rh(this).options.apiKey+":"+rh(this).name),this.$=ah(this,function(t){var e=rh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Ul,t.a).then((function(t){return t&&e&&(t.authDomain=e),Ml(t||{})}))}(t.D,rh(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Vl(t.D)}));return ah(t,e)}(t).then((function(){return Gl(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return zl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:Wl(t.i)}))):null})).then((function(e){eh(t,e||null)}));return ah(t,n)}(this)),this.h=ah(this,function(t){return t.$.then((function(){return th(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Kl("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.ya=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(t){var e=rh(t).options.authDomain,n=rh(t).options.apiKey;e&&kr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Dc(e,n,rh(t).name,t.P),Oc(t.b,t),ih(t)&&bl(ih(t)),t.m){bl(t.m);var r=t.m;r.wa(t.la()),ll(r,t),fl(r=t.m,t.J),pl(r,t),Xs((r=t.m).a,t.P),hl(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Fn(this.P.url);t=$r({protocol:t.c,host:t.a,port:t.g,options:$r({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function Jl(t){$e.call(this,"languageCodeChanged"),this.h=t}function Yl(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function Xl(t){$e.call(this,"frameworkChanged"),this.f=t}function Zl(t){return t.Oa||Ae(new S("auth-domain-config-required"))}function th(t){if(!kr())return Ae(new S("operation-not-supported-in-this-environment"));var e=Zl(t).then((function(){return t.b.qa()})).then((function(t){return t?$r(t):null}));return ah(t,e)}function eh(t,e){ih(t)&&(function(t,e){J(t.S,(function(t){return t==e}))}(ih(t),t.Ba),hn(ih(t),"tokenChanged",t.ya),hn(ih(t),"userDeleted",t.za),hn(ih(t),"userInvalidated",t.Aa),vl(ih(t))),e&&(e.S.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&gl(e)),Gr(t,"currentUser",e),e&&(e.wa(t.la()),ll(e,t),fl(e,t.J),pl(e,t),Xs(e.a,t.P),hl(e,t))}function nh(t,e){var n=null,r=null;return ah(t,e.then((function(e){return n=Do(e),r=Wi(e),function(t,e){var n={};return n.apiKey=rh(t).options.apiKey,n.authDomain=rh(t).options.authDomain,n.appName=rh(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new cl(t,e);return n&&(i.ha=n),r&&fl(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return ih(t)&&e.uid==ih(t).uid?(Cl(ih(t),e),t.da(e)):(eh(t,e),bl(e),t.da(e))})).then((function(){sh(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Jc(e.w(),t,w(t.kc,t))),n||e})).then((function(){return $r({user:ih(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function rh(t){return t.app}function ih(t){return t.currentUser}function oh(t){return ih(t)&&ih(t)._lat||null}function sh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](oh(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](oh(t))}}function ah(t,e){return t.R.push(e),e.oa((function(){$(t.R,e)})),e}function uh(){}function ch(){this.a={},this.b=1e12}ql.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new S("invalid-persistence-type"),n=new S("unsupported-persistence-type");t:{for(r in zu)if(zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(br()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Iu()&&"none"!==t)throw n;break;default:if(!Ar()&&"none"!==t)throw n}}(t),Ql(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Hl(n,t)})).then((function(){if(n.c=Kl(t),e)return n.b.set(n.c,e,n.a)})):Ce()}))},I($l,_n),I(Jl,$e),I(Yl,$e),I(Xl,$e),(t=$l.prototype).xb=function(t){return ah(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,Ys(this.a,this.aa),this.dispatchEvent(new Jl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new S("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&gr().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,Xs(this.a,this.P),this.dispatchEvent(new Yl(this.P))}},t.Gc=function(t){this.J.push(t),ta(this.a,r.a.SDK_VERSION?Or(r.a.SDK_VERSION,this.J):null),this.dispatchEvent(new Xl(this.J))},t.Ga=function(){return X(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:rh(this).options.apiKey,authDomain:rh(this).options.authDomain,appName:rh(this).name,currentUser:ih(this)&&ih(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?w(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return nh(i,pa(i.a,o))}))},t.Xc=function(t){if(!kr())return Ae(new S("operation-not-supported-in-this-environment"));var e=this,n=zi(t.providerId),i=Lr(),o=null;(!xr()||yr())&&rh(this).options.authDomain&&t.isOAuthProvider&&(o=hu(rh(this).options.authDomain,rh(this).options.apiKey,rh(this).name,"signInViaPopup",t,null,i,r.a.SDK_VERSION||null,null,null,this.T(),this.P));var s=fr(o,n&&n.ua,n&&n.ta);return ah(this,n=Zl(this).then((function(n){return kc(n,s,"signInViaPopup",t,i,!!o,e.T())})).then((function(){return new _e((function(t,n){e.na("signInViaPopup",null,new S("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=xc(e.b,e,"signInViaPopup",s,i)}))})).then((function(t){return s&&hr(s),t?$r(t):null})).o((function(t){throw s&&hr(s),t})))},t.Yc=function(t){if(!kr())return Ae(new S("operation-not-supported-in-this-environment"));var e=this;return ah(this,Zl(this).then((function(){return function(t){return Ql(t,(function(){return t.b.set(Bl,t.c.F,t.a)}))}(e.i)})).then((function(){return jc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return th(this).then((function(e){return t.b&&Fc(t.b.b),e})).o((function(e){throw t.b&&Fc(t.b.b),e}))},t.dd=function(t){if(!t)return Ae(new S("null-user"));if(this.S!=t.tenantId)return Ae(new S("tenant-id-mismatch"));var e=this,n={};n.apiKey=rh(this).options.apiKey,n.authDomain=rh(this).options.authDomain,n.appName=rh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ws]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new cl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&fl(e,r),Cl(e,t),e}(t,n,e.D,e.Ga());return ah(this,this.h.then((function(){if(rh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return ih(e)&&t.uid==ih(e).uid?(Cl(ih(e),t),e.da(t)):(eh(e,r),bl(r),e.da(r))})).then((function(){sh(e)})))},t.Ab=function(){var t=this;return ah(this,this.h.then((function(){return t.b&&Fc(t.b.b),ih(t)?(eh(t,null),Wl(t.i).then((function(){sh(t)}))):Ce()})))},t.Zc=function(){var t=this;return Gl(this.i,rh(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=ih(t)&&e){n=ih(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Cl(ih(t),e),ih(t).I();(ih(t)||e)&&(eh(t,e),e&&(bl(e),e.ha=t.D),t.b&&Oc(t.b,t),sh(t))}}))},t.da=function(t){return zl(this.i,t)},t.mc=function(){sh(this),this.da(ih(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return nh(e,Ce(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ih(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),ah(t,t.h.then((function(){!t.l&&Q(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(oh(t)))})))}(this,(function(){t.next(ih(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(ih(r)):"function"==typeof t.next&&t.next(ih(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(ih(r)):"function"==typeof t.next&&t.next(ih(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return ah(this,this.h.then((function(){return ih(e)?ih(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return nh(e,Ja(e.a,Ka,{token:t}))})).then((function(t){var n=t.user;return Sl(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return nh(n,Ja(n.a,za,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return nh(n,Ja(n.a,ba,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return nh(e,t.ka(e.a))}))},t.Sc=function(t){return zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=ih(t);if(e&&e.isAnonymous){var n=$r({providerId:null,isNewUser:!1});return $r({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return nh(t,t.a.zb()).then((function(e){var n=e.user;return Sl(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return ih(this)&&ih(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ih(this)&&gl(ih(this))},t.Pc=function(t){var e=this;K(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&ih(this)&&vl(ih(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),ah(this,this.h.then((function(){e.l||Q(e.s,t)&&t(oh(e))})))},t.removeAuthTokenListener=function(t){J(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Kl("local"),t.a,this.ja),this.b&&(Sc(this.b,this),Fc(this.b.b)),Promise.resolve()},t.hc=function(t){return ah(this,function(t,e){return Ja(t,_a,{identifier:e,continueUri:Nr()?ur():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!ko(t)},t.wb=function(t,e){var n=this;return ah(this,Ce().then((function(){var t=new Ci(e);if(!t.c)throw new S("argument-error",Ni+" must be true when sending sign in link to email");return Mi(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return ah(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return ah(this,this.a.Ra(t).then((function(t){return new ii(t)})))},t.jb=function(t){return ah(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return ah(this,Ce().then((function(){return void 0===e||dt(e)?{}:Mi(new Ci(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return ah(this,Kc(this,t,e,w(this.$a,this)))},t.Vc=function(t,e){var n=this;return ah(this,Ce().then((function(){var r=e||ur(),i=Ao(t,r);if(!(r=ko(r)))throw new S("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new S("tenant-id-mismatch");return n.$a(i)})))},uh.prototype.render=function(){},uh.prototype.reset=function(){},uh.prototype.getResponse=function(){},uh.prototype.execute=function(){};var lh=null;function hh(t,e){return(e=fh(e))&&t.a[e]||null}function fh(t){return(t=void 0===t?1e12:t)?t.toString():null}function ph(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function dh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function gh(){}function vh(){}ch.prototype.render=function(t,e){return this.a[this.b.toString()]=new ph(t,e),this.b++},ch.prototype.reset=function(t){var e=hh(this,t);t=fh(t),e&&t&&(e.delete(),delete this.a[t])},ch.prototype.getResponse=function(t){return(t=hh(this,t))?t.getResponse():null},ch.prototype.execute=function(t){(t=hh(this,t))&&t.execute()},ph.prototype.getResponse=function(){return dh(this),this.b},ph.prototype.execute=function(){dh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},ph.prototype.delete=function(){dh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Gr(gh,"FACTOR_ID","phone"),vh.prototype.g=function(){return lh||(lh=new ch),Ce(lh)},vh.prototype.c=function(){};var yh=null;function mh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var bh=new bt(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),_h=new Ur(3e4,6e4);mh.prototype.g=function(t){var e=this;return new _e((function(n,r){var i=setTimeout((function(){r(new S("network-request-failed"))}),_h.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new S("internal-error"));delete a[e.a]},Ce(Ms(Ct(bh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new S("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},mh.prototype.c=function(){this.b--};var wh=null;function Eh(t,e,n,r,i,o,s){if(Gr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(yh||(yh=new vh),s=yh):(wh||(wh=new mh),s=wh),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Oh])throw new S("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Sh],!a.document)throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new S("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ks(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Th];this.a[Th]=function(t){if(Ch(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Cr(c,a);"function"==typeof e&&e(t)}};var l=this.a[Ih];this.a[Ih]=function(){if(Ch(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Cr(l,a);"function"==typeof t&&t()}}}var Th="callback",Ih="expired-callback",Oh="sitekey",Sh="size";function Ch(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Ah(t,e){return t.h.push(e),e.oa((function(){$(t.h,e)})),e}function kh(t){if(t.D)throw new S("internal-error","RecaptchaVerifier instance has been destroyed.")}function Nh(t,e,n){var i=!1;try{this.b=n||r.a.app()}catch(a){throw new S("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new S("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=r.a.SDK_VERSION?Or(r.a.SDK_VERSION,s):null,Eh.call(this,n,t,e,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),s,x(A),i)}function jh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new S("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=xh.length)throw new S("internal-error","Argument validator received an unsupported number of arguments.");n=xh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new S("argument-error",t+" failed: "+r)}(t=Eh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Ah(this,Ce().then((function(){if(Nr()&&!mr())return gr();throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,Ja(t.s,Ra,{})})).then((function(e){t.a[Oh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){kh(this);var t=this;return Ah(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Kt(s.name),'"'),s.type){o.push(' type="',Kt(s.type),'"');var a={};yt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=de(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&pe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){kh(this);var t=this;return Ah(this,this.render().then((function(e){return new _e((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){J(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){kh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){kh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Nh,Eh);var xh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Rh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Ph(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Dh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function Lh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Mh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Fh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function Uh(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Vh(t){return g(t)&&"string"==typeof t.uid}function qh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Hh(t,e){for(var n in e){var r=e[n].name;t[r]=zh(r,t[n],e[n].j)}}function Bh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){jh(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function Kh(t,e,n,r){t[e]=zh(e,n,r)}function zh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return jh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Hh($l.prototype,{jb:{name:"applyActionCode",j:[Rh("code")]},Ra:{name:"checkActionCode",j:[Rh("code")]},nb:{name:"confirmPasswordReset",j:[Rh("code"),Rh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Rh("email"),Rh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Rh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Rh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[qh(Dh(),Lh(),"nextOrObserver"),Lh("opt_error",!0),Lh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[qh(Dh(),Lh(),"nextOrObserver"),Lh("opt_error",!0),Lh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Rh("email"),qh(Dh("opt_actionCodeSettings",!0),Mh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Rh("email"),Dh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Rh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Fh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Fh()]},Tc:{name:"signInWithCustomToken",j:[Rh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Rh("email"),Rh("password")]},Vc:{name:"signInWithEmailLink",j:[Rh("email"),Rh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Rh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[qh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof cl)}},Mh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Rh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Rh("url"),Dh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Rh("code")]}}),Bh($l.prototype,{lc:{name:"languageCode",kb:qh(Rh(),Mh(),"languageCode")},ti:{name:"tenantId",kb:qh(Rh(),Mh(),"tenantId")}}),($l.Persistence=zu).LOCAL="local",$l.Persistence.SESSION="session",$l.Persistence.NONE="none",Hh(cl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Ph("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ph("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Fh()]},qb:{name:"linkWithCredential",j:[Fh()]},Dc:{name:"linkWithPhoneNumber",j:[Rh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Fh()]},tb:{name:"reauthenticateWithCredential",j:[Fh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Rh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[qh(Dh("opt_actionCodeSettings",!0),Mh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Rh(null,!0)]},cd:{name:"unlink",j:[Rh("provider")]},Bb:{name:"updateEmail",j:[Rh("email")]},Cb:{name:"updatePassword",j:[Rh("password")]},ed:{name:"updatePhoneNumber",j:[Fh("phone")]},Db:{name:"updateProfile",j:[Dh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Rh("email"),qh(Dh("opt_actionCodeSettings",!0),Mh(null,!0),"opt_actionCodeSettings",!0)]}}),Hh(ch.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hh(uh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hh(_e.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Bh(Hc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Ph("appVerificationDisabledForTesting")}}),Hh(Bc.prototype,{confirm:{name:"confirm",j:[Rh("verificationCode")]}}),Kh(oo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[fo,So,jo,co],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[qh(Rh(),Dh(),"json")]),Kh(Co,"credential",(function(t,e){return new Oo(t,e)}),[Rh("email"),Rh("password")]),Hh(Oo.prototype,{w:{name:"toJSON",j:[Rh(null,!0)]}}),Hh(yo.prototype,{Ca:{name:"addScope",j:[Rh("scope")]},Ka:{name:"setCustomParameters",j:[Dh("customOAuthParameters")]}}),Kh(yo,"credential",mo,[qh(Rh(),Dh(),"token")]),Kh(Co,"credentialWithLink",Ao,[Rh("email"),Rh("emailLink")]),Hh(bo.prototype,{Ca:{name:"addScope",j:[Rh("scope")]},Ka:{name:"setCustomParameters",j:[Dh("customOAuthParameters")]}}),Kh(bo,"credential",_o,[qh(Rh(),Dh(),"token")]),Hh(wo.prototype,{Ca:{name:"addScope",j:[Rh("scope")]},Ka:{name:"setCustomParameters",j:[Dh("customOAuthParameters")]}}),Kh(wo,"credential",Eo,[qh(Rh(),qh(Dh(),Mh()),"idToken"),qh(Rh(),Mh(),"accessToken",!0)]),Hh(To.prototype,{Ka:{name:"setCustomParameters",j:[Dh("customOAuthParameters")]}}),Kh(To,"credential",Io,[qh(Rh(),Dh(),"token"),Rh("secret",!0)]),Hh(vo.prototype,{Ca:{name:"addScope",j:[Rh("scope")]},credential:{name:"credential",j:[qh(Rh(),qh(Dh(),Mh()),"optionsOrIdToken"),qh(Rh(),Mh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Dh("customOAuthParameters")]}}),Hh(lo.prototype,{w:{name:"toJSON",j:[Rh(null,!0)]}}),Hh(ao.prototype,{w:{name:"toJSON",j:[Rh(null,!0)]}}),Kh(Ro,"credential",Po,[Rh("verificationId"),Rh("verificationCode")]),Hh(Ro.prototype,{fb:{name:"verifyPhoneNumber",j:[qh(Rh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Uh(t.session,ro)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Uh(t.session,io)&&Vh(t.multiFactorHint):t.session&&t.multiFactorUid?Uh(t.session,io)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Hh(No.prototype,{w:{name:"toJSON",j:[Rh(null,!0)]}}),Hh(S.prototype,{toJSON:{name:"toJSON",j:[Rh(null,!0)]}}),Hh(Bo.prototype,{toJSON:{name:"toJSON",j:[Rh(null,!0)]}}),Hh(Ho.prototype,{toJSON:{name:"toJSON",j:[Rh(null,!0)]}}),Hh($c.prototype,{toJSON:{name:"toJSON",j:[Rh(null,!0)]}}),Hh(Wc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Hh(el.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Rh("displayName",!0)]},bd:{name:"unenroll",j:[qh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Vh},Rh(),"multiFactorInfoIdentifier")]}}),Hh(Nh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Kh(mi,"parseLink",Si,[Rh("link")]),Kh(gh,"assertion",(function(t){return new Zc(t)}),[Fh("phone")]),function(){if(void 0===r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:si,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:oi,VERIFY_AND_CHANGE_EMAIL:ai,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:$l,AuthCredential:oo,Error:S};Kh(t,"EmailAuthProvider",Co,[]),Kh(t,"FacebookAuthProvider",yo,[]),Kh(t,"GithubAuthProvider",bo,[]),Kh(t,"GoogleAuthProvider",wo,[]),Kh(t,"TwitterAuthProvider",To,[]),Kh(t,"OAuthProvider",vo,[Rh("providerId")]),Kh(t,"SAMLAuthProvider",go,[Rh("providerId")]),Kh(t,"PhoneAuthProvider",Ro,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof $l)}}]),Kh(t,"RecaptchaVerifier",Nh,[qh(Rh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Dh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.a.app.App)}}]),Kh(t,"ActionCodeURL",mi,[]),Kh(t,"PhoneMultiFactorGenerator",gh,[]),r.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new $l(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.nc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.a.registerVersion("@firebase/auth","0.16.2"),r.a.INTERNAL.extendNamespace({User:cl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const p=new f(l);var d=n("DH7j");class g extends r.a{constructor(t,e=0,n=p){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(d.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=p)}static create(t,e=0,n=p){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function v(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},tyNb:function(t,e,n){"use strict";n.d(e,"a",(function(){return pn})),n.d(e,"b",(function(){return dn})),n.d(e,"c",(function(){return gn})),n.d(e,"d",(function(){return Cn})),n.d(e,"e",(function(){return yn}));var r=n("ofXK"),i=n("fXoL"),o=n("LRne"),s=n("Cfvw"),a=n("XNiG"),u=n("9ppp");class c extends a.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new u.a;return this._value}next(t){super.next(this._value=t)}}var l=n("z+Ro"),h=n("DH7j"),f=n("l7GE"),p=n("ZUHj"),d=n("yCtX");const g={};class v{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new y(t,this.resultSelector))}}class y extends f.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(g),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(p.a)(this,e,void 0,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===g?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var m=n("HDdC"),b=n("sVev"),_=n("EY2u");function w(t){return new m.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(s.a)(n):Object(_.b)()).subscribe(e)})}var E=n("lJxs"),T=n("0EUg"),I=n("pLZG"),O=n("7o/Q"),S=n("4I5i");function C(t){return function(e){return 0===t?Object(_.b)():e.lift(new A(t))}}class A{constructor(t){if(this.total=t,this.total<0)throw new S.a}call(t,e){return e.subscribe(new k(t,this.total))}}class k extends O.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var N=n("XDbj"),j=n("xbPD"),x=n("SpAZ"),R=n("eIep"),P=n("IzEk"),D=n("JX91"),L=n("Kqap"),M=n("zx2A");function F(t){return function(e){const n=new U(t),r=e.lift(n);return n.caught=r}}class U{constructor(t){this.selector=t}call(t,e){return e.subscribe(new V(t,this.selector,this.caught))}}class V extends M.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new M.a(this);this.add(r);const i=Object(M.c)(n,r);i!==r&&this.add(i)}}}var q=n("5+tZ");function H(t,e){return Object(q.a)(t,e,1)}var B=n("SxV6"),K=n("vkgz"),z=n("quSY");class W{constructor(t){this.callback=t}call(t,e){return e.subscribe(new G(t,this.callback))}}class G extends O.a{constructor(t,e){super(t),this.add(new z.a(e))}}var Q=n("bHdf");class ${constructor(t,e){this.id=t,this.url=e}}class J extends ${constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Y extends ${constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class X extends ${constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Z extends ${constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tt extends ${constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class et extends ${constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nt extends ${constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rt extends ${constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class it extends ${constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ot{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class st{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class at{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ut{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ct{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lt{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ht{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ft="primary";class pt{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function dt(t){return new pt(t)}function gt(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function vt(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function yt(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!mt(t[i],e[i]))return!1;return!0}function mt(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function bt(t){return Array.prototype.concat.apply([],t)}function _t(t){return t.length>0?t[t.length-1]:null}function wt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Et(t){return Object(i.ob)(t)?t:Object(i.pb)(t)?Object(s.a)(Promise.resolve(t)):Object(o.a)(t)}function Tt(t,e,n){return n?function(t,e){return yt(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Ct(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>mt(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Ct(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Ct(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!Ct(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class It{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dt(this.queryParams)),this._queryParamMap}toString(){return jt.serialize(this)}}class Ot{constructor(t,e){this.segments=t,this.children=e,this.parent=null,wt(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xt(this)}}class St{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=dt(this.parameters)),this._parameterMap}toString(){return Ft(this)}}function Ct(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function At(t,e){let n=[];return wt(t.children,(t,r)=>{r===ft&&(n=n.concat(e(t,r)))}),wt(t.children,(t,r)=>{r!==ft&&(n=n.concat(e(t,r)))}),n}class kt{}class Nt{parse(t){const e=new Bt(t);return new It(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return xt(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return wt(e.children,(e,n)=>{n!==ft&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=At(e,(n,r)=>r===ft?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${xt(e)}/${n[0]}`:`${xt(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Pt(e)}=${Pt(t)}`).join("&"):`${Pt(e)}=${Pt(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const jt=new Nt;function xt(t){return t.segments.map(t=>Ft(t)).join("/")}function Rt(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pt(t){return Rt(t).replace(/%3B/gi,";")}function Dt(t){return Rt(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lt(t){return decodeURIComponent(t)}function Mt(t){return Lt(t.replace(/\+/g,"%20"))}function Ft(t){return`${Dt(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Dt(t)}=${Dt(e[t])}`).join("")}`;var e}const Ut=/^[^\/()?;=#]+/;function Vt(t){const e=t.match(Ut);return e?e[0]:""}const qt=/^[^=?&#]+/,Ht=/^[^?&#]+/;class Bt{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ot([],{}):new Ot([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Ot(t,e)),n}parseSegment(){const t=Vt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new St(Lt(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Vt(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Vt(this.remaining);t&&(n=t,this.capture(n))}t[Lt(e)]=Lt(n)}parseQueryParam(t){const e=function(t){const e=t.match(qt);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Ht);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Mt(e),i=Mt(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Vt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=ft);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Ot([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Kt{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=zt(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=zt(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Wt(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Wt(t,this._root).map(t=>t.value)}}function zt(t,e){if(t===e.value)return e;for(const n of e.children){const e=zt(t,n);if(e)return e}return null}function Wt(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Wt(t,n);if(r.length)return r.unshift(e),r}return[]}class Gt{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Qt(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class $t extends Kt{constructor(t,e){super(t),this.snapshot=e,ee(this,t)}toString(){return this.snapshot.toString()}}function Jt(t,e){const n=function(t,e){const n=new Zt([],{},{},"",{},ft,e,null,t.root,-1,{});return new te("",new Gt(n,[]))}(t,e),r=new c([new St("",{})]),i=new c({}),o=new c({}),s=new c({}),a=new c(""),u=new Yt(r,i,s,a,o,ft,e,n.root);return u.snapshot=n.root,new $t(new Gt(u,[]),n)}class Yt{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(E.a)(t=>dt(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(E.a)(t=>dt(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xt(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Zt{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=dt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class te extends Kt{constructor(t,e){super(e),this.url=t,ee(this,e)}toString(){return ne(this._root)}}function ee(t,e){e.value._routerState=t,e.children.forEach(e=>ee(t,e))}function ne(t){const e=t.children.length>0?` { ${t.children.map(ne).join(", ")} } `:"";return`${t.value}${e}`}function re(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,yt(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),yt(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!yt(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),yt(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function ie(t,e){var n,r;return yt(t.params,e.params)&&Ct(n=t.url,r=e.url)&&n.every((t,e)=>yt(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||ie(t.parent,e.parent))}function oe(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function se(t){return"object"==typeof t&&null!=t&&t.outlets}function ae(t,e,n,r,i){let o={};return r&&wt(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new It(n.root===t?e:function t(e,n,r){const i={};return wt(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new Ot(e.segments,i)}(n.root,t,e),o,i)}class ue{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&oe(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(se);if(r&&r!==_t(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ce{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function le(t,e,n){if(t||(t=new Ot([],{})),0===t.segments.length&&t.hasChildren())return he(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(se(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!ge(a,u,e))return o;r+=2}else{if(!ge(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Ot(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Ot(t.segments.slice(r.pathIndex),t.children),he(e,0,i)}return r.match&&0===i.length?new Ot(t.segments,{}):r.match&&!t.hasChildren()?fe(t,e,n):r.match?he(t,0,i):fe(t,e,n)}function he(t,e,n){if(0===n.length)return new Ot(t.segments,{});{const r=function(t){return se(t[0])?t[0].outlets:{[ft]:t}}(n),i={};return wt(r,(n,r)=>{null!==n&&(i[r]=le(t.children[r],e,n))}),wt(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Ot(t.segments,i)}}function fe(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(se(o)){const t=pe(o.outlets);return new Ot(r,t)}if(0===i&&oe(n[0])){r.push(new St(t.segments[e].path,n[0])),i++;continue}const s=se(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&oe(a)?(r.push(new St(s,de(a))),i+=2):(r.push(new St(s,{})),i++)}return new Ot(r,{})}function pe(t){const e={};return wt(t,(t,n)=>{null!==t&&(e[n]=fe(new Ot([],{}),0,t))}),e}function de(t){const e={};return wt(t,(t,n)=>e[n]=""+t),e}function ge(t,e,n){return t==n.path&&yt(e,n.parameters)}class ve{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),re(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Qt(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),wt(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Qt(t),i=t.value.component?n.children:e;wt(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Qt(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new lt(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ut(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(re(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),ye(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function ye(t){re(t.value),t.children.forEach(ye)}class me{constructor(t,e){this.routes=t,this.module=e}}function be(t){return"function"==typeof t}function _e(t){return t instanceof It}const we=Symbol("INITIAL_VALUE");function Ee(){return Object(R.a)(t=>function(...t){let e=void 0,n=void 0;return Object(l.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(h.a)(t[0])&&(t=t[0]),Object(d.a)(t,n).lift(new v(e))}(...t.map(t=>t.pipe(Object(P.a)(1),Object(D.a)(we)))).pipe(Object(L.a)((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==we)return t;if(r===we&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||_e(r))return r}return t},t)},we),Object(I.a)(t=>t!==we),Object(E.a)(t=>_e(t)?t:!0===t),Object(P.a)(1)))}class Te{constructor(t){this.segmentGroup=t||null}}class Ie{constructor(t){this.urlTree=t}}function Oe(t){return new m.a(e=>e.error(new Te(t)))}function Se(t){return new m.a(e=>e.error(new Ie(t)))}function Ce(t){return new m.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Ae{constructor(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(i.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,ft).pipe(Object(E.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(F(t=>{if(t instanceof Ie)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Te)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,ft).pipe(Object(E.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(F(t=>{if(t instanceof Te)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Ot([],{[ft]:t}):t;return new It(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(E.a)(t=>new Ot([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(o.a)({});const n=[],r=[],i={};return wt(t,(t,o)=>{const s=e(o,t).pipe(Object(E.a)(t=>i[o]=t));o===ft?n.push(s):r.push(s)}),o.a.apply(null,n.concat(r)).pipe(Object(T.a)(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(I.a)((e,n)=>t(e,n,r)):x.a,C(1),n?Object(j.a)(e):Object(N.a)(()=>new b.a))}(),Object(E.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,s){return Object(o.a)(...n).pipe(H(a=>this.expandSegmentAgainstRoute(t,e,n,a,r,i,s).pipe(F(t=>{if(t instanceof Te)return Object(o.a)(null);throw t}))),Object(B.a)(t=>!!t),F((t,n)=>{if(t instanceof b.a||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(o.a)(new Ot([],{}));throw new Te(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return xe(r)!==o?Oe(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Oe(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Se(i):this.lineralizeSegments(n,i).pipe(Object(q.a)(n=>{const i=new Ot(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=ke(e,r,i);if(!s)return Oe(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Se(l):this.lineralizeSegments(r,l).pipe(Object(q.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(E.a)(t=>(n._loadedConfig=t,new Ot(r,{})))):Object(o.a)(new Ot(r,{}));const{matched:i,consumedSegments:s,lastChild:a}=ke(e,n,r);if(!i)return Oe(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(q.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:a}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>je(t,e,n)&&xe(n)!==ft)}(t,n,r)?{segmentGroup:Ne(new Ot(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&xe(r)!==ft&&(n[xe(r)]=new Ot([],{}));return n}(r,new Ot(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>je(t,e,n))}(t,n,r)?{segmentGroup:Ne(new Ot(t.segments,function(t,e,n,r){const i={};for(const o of n)je(t,e,o)&&!r[xe(o)]&&(i[xe(o)]=new Ot([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,u,r);return 0===a.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(E.a)(t=>new Ot(s,t))):0===r.length&&0===a.length?Object(o.a)(new Ot(s,{})):this.expandSegment(n,i,r,a,ft,!0).pipe(Object(E.a)(t=>new Ot(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(o.a)(new me(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(o.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(q.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(E.a)(t=>(e._loadedConfig=t,t))):function(t){return new m.a(e=>e.error(gt(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(o.a)(new me([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(o.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&be(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!be(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Et(o)});return Object(o.a)(i).pipe(Ee(),Object(K.a)(t=>{if(!_e(t))return;const e=gt(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(E.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(o.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Ce(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new It(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return wt(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return wt(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Ot(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function ke(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||vt)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Ne(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Ot(t.segments.concat(e.segments),e.children)}return t}function je(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function xe(t){return t.outlet||ft}class Re{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Pe{constructor(t,e){this.component=t,this.route=e}}function De(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Qt(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ct(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ct(t.url,e.url)||!yt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ie(t,e)||!yt(t.queryParams,e.queryParams);case"paramsChange":default:return!ie(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Re(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new Pe(u.outlet.component,a))}else a&&Me(n,u,o),o.canActivateChecks.push(new Re(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),wt(s,(t,e)=>Me(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function Le(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Me(t,e,n){const r=Qt(t),i=t.value;wt(r,(t,r)=>{Me(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Pe(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Fe(t,e){return null!==t&&e&&e(new ct(t)),Object(o.a)(!0)}function Ue(t,e){return null!==t&&e&&e(new at(t)),Object(o.a)(!0)}function Ve(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(o.a)(!0);const i=r.map(r=>w(()=>{const i=Le(r,e,n);let o;if(function(t){return t&&be(t.canActivate)}(i))o=Et(i.canActivate(e,t));else{if(!be(i))throw new Error("Invalid CanActivate guard");o=Et(i(e,t))}return o.pipe(Object(B.a)())}));return Object(o.a)(i).pipe(Ee())}function qe(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>w(()=>{const i=e.guards.map(i=>{const o=Le(i,e.node,n);let s;if(function(t){return t&&be(t.canActivateChild)}(o))s=Et(o.canActivateChild(r,t));else{if(!be(o))throw new Error("Invalid CanActivateChild guard");s=Et(o(r,t))}return s.pipe(Object(B.a)())});return Object(o.a)(i).pipe(Ee())}));return Object(o.a)(i).pipe(Ee())}class He{}class Be{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=We(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,ft),n=new Zt([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ft,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Gt(n,e),i=new te(this.url,r);return this.inheritParamsAndData(i._root),Object(o.a)(i)}catch(t){return new m.a(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Xt(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=At(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===ft?-1:e.value.outlet===ft?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(i){if(!(i instanceof He))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new He}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new He;if((t.outlet||ft)!==r)throw new He;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?_t(n).parameters:{};i=new Zt(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$e(t),r,t.component,t,Ke(e),ze(e)+n.length,Je(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new He;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||vt)(n,t,e);if(!r)throw new He;const i={};wt(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new Zt(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$e(t),r,t.component,t,Ke(e),ze(e)+o.length,Je(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=We(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new Gt(i,t)]}if(0===a.length&&0===c.length)return[new Gt(i,[])];const l=this.processSegment(a,u,c,ft);return[new Gt(i,l)]}}function Ke(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ze(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function We(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Ge(t,e,n)&&Qe(n)!==ft)}(t,n,r)){const i=new Ot(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Qe(o)!==ft){const n=new Ot([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Qe(o)]=n}return i}(t,e,r,new Ot(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Ge(t,e,n))}(t,n,r)){const o=new Ot(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Ge(t,n,a)&&!i[Qe(a)]){const n=new Ot([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Qe(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Ot(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Ge(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Qe(t){return t.outlet||ft}function $e(t){return t.data||{}}function Je(t){return t.resolve||{}}function Ye(t){return function(e){return e.pipe(Object(R.a)(e=>{const n=t(e);return n?Object(s.a)(n).pipe(Object(E.a)(()=>e)):Object(s.a)([e])}))}}class Xe extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}let Ze=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.yb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&i.Fb(0,"router-outlet")},directives:function(){return[yn]},encapsulation:2}),t})();function tn(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];en(r,nn(e,r))}}function en(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==ft)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&tn(t.children,e)}function nn(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function rn(t){const e=t.children&&t.children.map(rn),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ft&&(n.component=Ze),n}const on=new i.q("ROUTES");class sn{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(E.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new me(bt(r.injector.get(on)).map(rn),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(s.a)(this.loader.load(t)):Et(t()).pipe(Object(q.a)(t=>t instanceof i.v?Object(o.a)(t):Object(s.a)(this.compiler.compileModuleAsync(t))))}}class an{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new un,this.attachRef=null}}class un{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new an,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class cn{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function ln(t){throw t}function hn(t,e,n){return e.parse("/")}function fn(t,e){return Object(o.a)(null)}let pn=(()=>{class t{constructor(t,e,n,r,o,s,u,l){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new a.a,this.errorHandler=ln,this.malformedUriErrorHandler=hn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:fn,afterPreactivation:fn},this.urlHandlingStrategy=new cn,this.routeReuseStrategy=new Xe,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(i.x),this.console=o.get(i.W);const h=o.get(i.z);this.isNgZoneEnabled=h instanceof i.z,this.resetConfig(l),this.currentUrlTree=new It(new Ot([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new sn(s,u,t=>this.triggerEvent(new ot(t)),t=>this.triggerEvent(new st(t))),this.routerState=Jt(this.currentUrlTree,this.rootComponentType),this.transitions=new c({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Object(I.a)(t=>0!==t.id),Object(E.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Object(R.a)(t=>{let n=!1,r=!1;return Object(o.a)(t).pipe(Object(K.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Object(R.a)(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(o.a)(t).pipe(Object(R.a)(t=>{const n=this.transitions.getValue();return e.next(new J(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?_.a:[t]}),Object(R.a)(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,a=this.config,function(t){return t.pipe(Object(R.a)(t=>function(t,e,n,r,i){return new Ae(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,a).pipe(Object(E.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(K.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(q.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Be(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(E.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(K.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(K.a)(t=>{const n=new tt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,a;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:a}=t,u=new J(n,this.serializeUrl(r),i,s);e.next(u);const c=Jt(r,this.rootComponentType).snapshot;return Object(o.a)(Object.assign(Object.assign({},t),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},a),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),_.a}),Ye(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(K.a)(t=>{const e=new et(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(E.a)(t=>Object.assign(Object.assign({},t),{guards:De(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(q.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=n;return 0===u.length&&0===a.length?Object(o.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(s.a)(t).pipe(Object(q.a)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return Object(o.a)(!0);const a=s.map(o=>{const s=Le(o,e,i);let a;if(function(t){return t&&be(t.canDeactivate)}(s))a=Et(s.canDeactivate(t,e,n,r));else{if(!be(s))throw new Error("Invalid CanDeactivate guard");a=Et(s(t,e,n,r))}return a.pipe(Object(B.a)())});return Object(o.a)(a).pipe(Ee())}(t.component,t.route,n,e,r)),Object(B.a)(t=>!0!==t,!0))}(u,r,i,t).pipe(Object(q.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(s.a)(e).pipe(H(e=>Object(s.a)([Ue(e.route.parent,r),Fe(e.route,r),qe(t,e.path,n),Ve(t,e.route,n)]).pipe(Object(T.a)(),Object(B.a)(t=>!0!==t,!0))),Object(B.a)(t=>!0!==t,!0))}(r,a,t,e):Object(o.a)(n)),Object(E.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(K.a)(t=>{if(_e(t.guardsResult)){const e=gt(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(K.a)(t=>{const e=new nt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Object(I.a)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new X(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Ye(t=>{if(t.guards.canActivateChecks.length)return Object(o.a)(t).pipe(Object(K.a)(t=>{const e=new rt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(R.a)(t=>{let n=!1;return Object(o.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(q.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(o.a)(t);let a=0;return Object(s.a)(n).pipe(H(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(o.a)({});const a={};return Object(s.a)(i).pipe(Object(q.a)(i=>function(t,e,n,r){const i=Le(t,e,r);return Et(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(K.a)(t=>{a[i]=t}))),C(1),Object(q.a)(()=>Object.keys(a).length===i.length?Object(o.a)(a):_.a))}(t._resolve,t,e,r).pipe(Object(E.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Xt(t,n).resolve),null)))}(t.route,e,r,i)),Object(K.a)(()=>a++),C(1),Object(q.a)(e=>a===n.length?Object(o.a)(t):_.a))}))}),Object(K.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new X(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(K.a)(t=>{const e=new it(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ye(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(E.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new Gt(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Yt(new c((i=n.value).url),new c(i.params),new c(i.queryParams),new c(i.fragment),new c(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new Gt(r,o)}}var i}(t,e._root,n?n._root:void 0);return new $t(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(K.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(a=this.rootContexts,u=this.routeReuseStrategy,l=t=>this.triggerEvent(t),Object(E.a)(t=>(new ve(u,t.targetRouterState,t.currentRouterState,l).activate(a),t))),Object(K.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new X(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new W(i))),F(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=_e(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new X(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Z(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return _.a}));var i,a,u,l}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){tn(t),this.config=t.map(rn),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(i.T)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}else h=s?this.currentUrlTree.queryParams:r||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return ae(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ue(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return wt(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new ue(n,e,r)}(n);if(o.toRoot())return ae(e.root,new Ot([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new ce(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new ce(t,t===e.root,0)}const r=oe(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new ce(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?he(s.segmentGroup,s.index,o.commands):le(s.segmentGroup,s.index,o.commands);return ae(s.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(i.T)()&&this.isNgZoneEnabled&&!i.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=_e(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(_e(t))return Tt(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Tt(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Y(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(i.Kb(i.M),i.Kb(kt),i.Kb(un),i.Kb(r.f),i.Kb(i.r),i.Kb(i.w),i.Kb(i.i),i.Kb(void 0))},t.\u0275prov=i.Ab({token:t,factory:t.\u0275fac}),t})(),dn=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new a.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(i.T)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:vn(this.skipLocationChange),replaceUrl:vn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:vn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:vn(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(i.Eb(pn),i.Eb(Yt),i.Lb("tabindex"),i.Eb(i.D),i.Eb(i.l))},t.\u0275dir=i.zb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&i.Nb("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[i.ub]}),t})(),gn=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new a.a,this.subscription=t.events.subscribe(t=>{t instanceof Y&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(i.T)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:vn(this.skipLocationChange),replaceUrl:vn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:vn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:vn(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(i.Eb(pn),i.Eb(Yt),i.Eb(r.g))},t.\u0275dir=i.zb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&i.Nb("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)})),2&t&&(i.Jb("href",e.href,i.Ub),i.wb("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[i.ub]}),t})();function vn(t){return""===t||!!t}let yn=(()=>{class t{constructor(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.n,this.deactivateEvents=new i.n,this.name=r||ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new mn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(i.Eb(un),i.Eb(i.P),i.Eb(i.j),i.Lb("name"),i.Eb(i.h))},t.\u0275dir=i.zb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class mn{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Yt?this.route:t===un?this.childContexts:this.parent.get(t,e)}}class bn{}class _n{preload(t,e){return Object(o.a)(null)}}let wn=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new sn(e,n,e=>t.triggerEvent(new ot(e)),e=>t.triggerEvent(new st(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(I.a)(t=>t instanceof Y),H(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(i.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(s.a)(n).pipe(Object(Q.a)(),Object(E.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(q.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(i.Kb(pn),i.Kb(i.w),i.Kb(i.i),i.Kb(i.r),i.Kb(bn))},t.\u0275prov=i.Ab({token:t,factory:t.\u0275fac}),t})(),En=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof J?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Y&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ht&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new ht(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Kb(pn),i.Kb(r.l),i.Kb(void 0))},t.\u0275prov=i.Ab({token:t,factory:t.\u0275fac}),t})();const Tn=new i.q("ROUTER_CONFIGURATION"),In=new i.q("ROUTER_FORROOT_GUARD"),On=[r.f,{provide:kt,useClass:Nt},{provide:pn,useFactory:function(t,e,n,i,o,s,a,u={},c,l){const h=new pn(null,t,e,n,i,o,s,bt(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=Object(r.p)();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[kt,un,r.f,i.r,i.w,i.i,on,Tn,[class{},new i.A],[class{},new i.A]]},un,{provide:Yt,useFactory:function(t){return t.routerState.root},deps:[pn]},{provide:i.w,useClass:i.J},wn,_n,class{preload(t,e){return e().pipe(F(()=>Object(o.a)(null)))}},{provide:Tn,useValue:{enableTracing:!1}}];function Sn(){return new i.y("Router",pn)}let Cn=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[On,jn(e),{provide:In,useFactory:Nn,deps:[[pn,new i.A,new i.I]]},{provide:Tn,useValue:n||{}},{provide:r.g,useFactory:kn,deps:[r.k,[new i.p(r.a),new i.A],Tn]},{provide:En,useFactory:An,deps:[pn,r.l,Tn]},{provide:bn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:_n},{provide:i.y,multi:!0,useFactory:Sn},[xn,{provide:i.d,multi:!0,useFactory:Rn,deps:[xn]},{provide:Dn,useFactory:Pn,deps:[xn]},{provide:i.b,multi:!0,useExisting:Dn}]]}}static forChild(e){return{ngModule:t,providers:[jn(e)]}}}return t.\u0275mod=i.Cb({type:t}),t.\u0275inj=i.Bb({factory:function(e){return new(e||t)(i.Kb(In,8),i.Kb(pn,8))}}),t})();function An(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new En(t,e,n)}function kn(t,e,n={}){return n.useHash?new r.d(t,e):new r.j(t,e)}function Nn(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function jn(t){return[{provide:i.a,multi:!0,useValue:t},{provide:on,multi:!0,useValue:t}]}let xn=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new a.a}appInitializer(){return this.injector.get(r.e,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(pn),r=this.injector.get(Tn);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(o.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Tn),n=this.injector.get(wn),r=this.injector.get(En),o=this.injector.get(pn),s=this.injector.get(i.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(i.Kb(i.r))},t.\u0275prov=i.Ab({token:t,factory:t.\u0275fac}),t})();function Rn(t){return t.appInitializer.bind(t)}function Pn(t){return t.bootstrapListener.bind(t)}const Dn=new i.q("Router Initializer")},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.a}function d(){return t=>{return a()((e=p,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},x7I3:function(t,e,n){"use strict";n.d(e,"a",(function(){return tr})),n.d(e,"b",(function(){return nr})),n.d(e,"c",(function(){return er})),n.d(e,"d",(function(){return rr})),n.d(e,"e",(function(){return ir})),n.d(e,"f",(function(){return or})),n.d(e,"g",(function(){return Xn})),n.d(e,"h",(function(){return Zn}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=a||{},u=s||self;function c(){}function l(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),p=0;function d(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function v(t,e,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:g).apply(null,arguments)}function y(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function m(){return Date.now()}function b(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function _(){this.j=this.j,this.i=this.i}_.prototype.j=!1,_.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,f)&&t[f]||(t[f]=++p)}(this)},_.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var w=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},E=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function I(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function O(t){return/^[\s\xa0]*$/.test(t)}var S,C=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function A(t,e){return-1!=t.indexOf(e)}function k(t,e){return t<e?-1:t>e?1:0}t:{var N=u.navigator;if(N){var j=N.userAgent;if(j){S=j;break t}}S=""}function x(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function R(t){var e={};for(var n in t)e[n]=t[n];return e}var P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<P.length;o++)n=P[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function L(t){return L[" "](t),t}L[" "]=c;var M,F,U=A(S,"Opera"),V=A(S,"Trident")||A(S,"MSIE"),q=A(S,"Edge"),H=q||V,B=A(S,"Gecko")&&!(A(S.toLowerCase(),"webkit")&&!A(S,"Edge"))&&!(A(S,"Trident")||A(S,"MSIE"))&&!A(S,"Edge"),K=A(S.toLowerCase(),"webkit")&&!A(S,"Edge");function z(){var t=u.document;return t?t.documentMode:void 0}t:{var W="",G=(F=S,B?/rv:([^\);]+)(\)|;)/.exec(F):q?/Edge\/([\d\.]+)/.exec(F):V?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(F):K?/WebKit\/(\S+)/.exec(F):U?/(?:Version)[ \/]?(\S+)/.exec(F):void 0);if(G&&(W=G?G[1]:""),V){var Q=z();if(null!=Q&&Q>parseFloat(W)){M=String(Q);break t}}M=W}var $={};function J(t){return function(t,e){var n=$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=C(String(M)).split("."),r=C(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=k(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||k(0==s[2].length,0==a[2].length)||k(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var Y=u.document&&V&&(z()||parseInt(M,10))||void 0,X=!V||9<=Number(Y),Z=V&&!J("9"),tt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",c,e),u.removeEventListener("test",c,e)}catch(n){}return t}();function et(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function nt(t,e){if(et.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(B){t:{try{L(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:rt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}et.prototype.b=function(){this.defaultPrevented=!0},b(nt,et);var rt={2:"touch",3:"pen",4:"mouse"};nt.prototype.b=function(){nt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Z)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var it="closure_listenable_"+(1e6*Math.random()|0),ot=0;function st(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ot,this.Y=this.Z=!1}function at(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ut(t){this.src=t,this.a={},this.b=0}function ct(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=w(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(at(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function lt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ut.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=lt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new st(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ht="closure_lm_"+(1e6*Math.random()|0),ft={};function pt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=wt(r),e&&e[it]?e.wa(n,r,h(i)?!!i.capture:!!i,o):dt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)pt(t,e[o],n,r,i);return null}return n=wt(n),t&&t[it]?t.va(e,n,h(r)?!!r.capture:!!r,i):dt(t,e,n,!1,r,i)}function dt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=h(i)?!!i.capture:!!i;if(s&&!X)return null;var a=bt(t);if(a||(t[ht]=a=new ut(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=mt,e=X?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)tt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(vt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function gt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[it])ct(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bt(e))?(ct(n,t),0==n.b&&(n.src=null,e[ht]=null)):at(t)}}}function vt(t){return t in ft?ft[t]:ft[t]="on"+t}function yt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&gt(t),n.call(r,e)}function mt(t,e){if(t.Y)return!0;if(!X){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return yt(t,e=new nt(e,this))}return yt(t,new nt(e,this))}function bt(t){return(t=t[ht])instanceof ut?t:null}var _t="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(t){return"function"==typeof t?t:(t[_t]||(t[_t]=function(e){return t.handleEvent(e)}),t[_t])}function Et(){_.call(this),this.c=new ut(this),this.J=this,this.C=null}function Tt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new et(e,t);else if(e instanceof et)e.target=e.target||t;else{var i=e;D(e=new et(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=It(s,r,!0,e)&&i}if(i=It(s=e.a=t,r,!0,e)&&i,i=It(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=It(s=e.a=n[o],r,!1,e)&&i}function It(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ct(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}b(Et,_),Et.prototype[it]=!0,(o=Et.prototype).addEventListener=function(t,e,n,r){pt(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=h(i)?!!i.capture:!!i,r=wt(r),e&&e[it]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=lt(s=e.a[n],r,i,o))&&(at(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=bt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=lt(n,r,i,o)),(r=-1<e?n[e]:null)&&gt(r))}(this,t,e,n,r)},o.G=function(){if(Et.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)at(n[r]);delete e.a[t],e.b--}}this.C=null},o.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},o.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ot=u.JSON.stringify;function St(){this.b=this.a=null}var Ct,At=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new Nt}),(function(t){t.reset()}));function kt(){var t=Pt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Nt(){this.next=this.b=this.a=null}function jt(t){u.setTimeout((function(){throw t}),0)}function xt(t,e){Ct||function(){var t=u.Promise.resolve(void 0);Ct=function(){t.then(Dt)}}(),Rt||(Ct(),Rt=!0),Pt.add(t,e)}St.prototype.add=function(t,e){var n=At.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Nt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Nt.prototype.reset=function(){this.next=this.b=this.a=null};var Rt=!1,Pt=new St;function Dt(){for(var t;t=kt();){try{t.a.call(t.b)}catch(n){jt(n)}var e=At;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Rt=!1}function Lt(t,e){Et.call(this),this.b=t||1,this.a=e||u,this.f=v(this.Za,this),this.g=m()}function Mt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ft(t,e,n){if("function"==typeof t)n&&(t=v(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=v(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Ut(t){t.a=Ft((function(){t.a=null,t.c&&(t.c=!1,Ut(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}b(Lt,Et),(o=Lt.prototype).aa=!1,o.M=null,o.Za=function(){if(this.aa){var t=m()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Tt(this,"tick"),this.aa&&(Mt(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=m())},o.G=function(){Lt.X.G.call(this),Mt(this),delete this.a};var Vt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ut(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(_);function qt(t){_.call(this),this.b=t,this.a={}}b(qt,_);var Ht=[];function Bt(t,e,n,r){Array.isArray(n)||(n&&(Ht[0]=n.toString()),n=Ht);for(var i=0;i<n.length;i++){var o=pt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Kt(t){x(t.a,(function(t,e){this.a.hasOwnProperty(e)&&gt(t)}),t),t.a={}}function zt(){this.a=!0}function Wt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ot(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}qt.prototype.G=function(){qt.X.G.call(this),Kt(this)},qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zt.prototype.info=function(){};var Gt={},Qt=null;function $t(){return Qt=Qt||new Et}function Jt(t){et.call(this,Gt.Fa,t)}function Yt(t){var e=$t();Tt(e,new Jt(e,t))}function Xt(t,e){et.call(this,Gt.STAT_EVENT,t),this.stat=e}function Zt(t){var e=$t();Tt(e,new Xt(e,t))}function te(t){et.call(this,Gt.Ga,t)}function ee(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){t()}),e)}Gt.Fa="serverreachability",b(Jt,et),Gt.STAT_EVENT="statevent",b(Xt,et),Gt.Ga="timingevent",b(te,et);var ne={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},re={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function ie(){}function oe(){}ie.prototype.a=null;var se,ae={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ue(){et.call(this,"d")}function ce(){et.call(this,"c")}function le(){}function he(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new qt(this),this.P=fe,this.R=new Lt(t=H?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}b(ue,et),b(ce,et),b(le,ie),se=new le;var fe=45e3,pe={},de={};function ge(t,e,n){t.H=1,t.i=Me(je(e)),t.j=n,t.I=!0,ve(t,null)}function ve(t,e){t.u=m(),be(t),t.l=je(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Je(n.b,"t",r),t.D=0,t.a=zn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Vt(v(t.Ca,t,t.a),t.O)),Bt(t.J,t.a,"readystatechange",t.Xa),e=t.B?R(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Yt(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function ye(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=me(t,n);if(i==de){4==e&&(t.h=4,Zt(14),r=!1),Wt(t.c,t.f,null,"[Incomplete Response]");break}if(i==pe){t.h=4,Zt(15),Wt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Wt(t.c,t.f,i,null),Ie(t,i)}4==e&&0==n.length&&(t.h=1,Zt(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mn(e),e.F=!0,Zt(11))):(Wt(t.c,t.f,n,"[Invalid Chunked Response]"),Te(t),Ee(t))}function me(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?de:(n=Number(e.substring(n,r)),isNaN(n)?pe:(r+=1)+n>e.length?de:(e=e.substr(r,n),t.D=r+n,e))}function be(t){t.T=m()+t.P,_e(t,t.P)}function _e(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ee(v(t.Va,t),e)}function we(t){t.o&&(u.clearTimeout(t.o),t.o=null)}function Ee(t){0==t.g.v||t.A||Vn(t.g,t)}function Te(t){we(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Mt(t.R),Kt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ie(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||rn(n.b,t)))if(n.I=t.N,!t.C&&rn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Un(n),An(n)}Ln(n),Zt(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ee(v(n.Sa,n),6e3));if(1>=nn(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else Hn(n,11)}else if((t.C||n.a==t)&&Un(n),!O(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(A(l,"spdy")||A(l,"quic")||A(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(on(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Le(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=m()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Kn(u,u.C?u.ga:null,u.fa),p.C){sn(u.b,p);var d=p,g=u.D;g&&d.setTimeout(g),d.o&&(we(d),be(d)),u.a=p}else Dn(u);0<n.g.length&&jn(n)}else"stop"!=i[0]&&"close"!=i[0]||Hn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Hn(n,7):Cn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Yt(4)}catch(y){}}function Oe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||"string"==typeof t)E(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(l(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(l(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Se(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Se)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ce(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ae(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ae(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ae(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(o=he.prototype).setTimeout=function(t){this.P=t},o.Xa=function(t){t=t.target;var e=this.F;e&&3==Tn(t)?e.f():this.Ca(t)},o.Ca=function(t){try{if(t==this.a)t:{var e=Tn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!H&&!this.a.$())){this.A||4!=e||7==n||Yt(8==n||0>=r?3:2),we(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Zt(12),Te(this),Ee(this);break t}Wt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ie(this,u)}this.I?(ye(this,e,o),H&&this.b&&3==e&&(Bt(this.J,this.R,"tick",this.Wa),this.R.start())):(Wt(this.c,this.f,o,null),Ie(this,o)),4==e&&Te(this),this.b&&!this.A&&(4==e?Vn(this.g,this):(this.b=!1,be(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Zt(12)):(this.h=0,Zt(13)),Te(this),Ee(this)}}}catch(c){}},o.Wa=function(){if(this.a){var t=Tn(this.a),e=this.a.$();this.D<e.length&&(we(this),ye(this,t,e),this.b&&4!=t&&be(this))}},o.cancel=function(){this.A=!0,Te(this)},o.Va=function(){this.o=null;var t=m();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Yt(3),Zt(17)),Te(this),this.h=2,Ee(this)):_e(this,this.T-t)},(o=Se.prototype).K=function(){Ce(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},o.L=function(){return Ce(this),this.a.concat()},o.get=function(t,e){return Ae(this.b,t)?this.b[t]:e},o.set=function(t,e){Ae(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},o.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ke=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ne(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ne){this.a=void 0!==e?e:t.a,xe(this,t.f),this.j=t.j,Re(this,t.c),Pe(this,t.h),this.g=t.g,e=t.b;var n=new We;n.c=e.c,e.a&&(n.a=new Se(e.a),n.b=e.b),De(this,n),this.i=t.i}else t&&(n=String(t).match(ke))?(this.a=!!e,xe(this,n[1]||"",!0),this.j=Fe(n[2]||""),Re(this,n[3]||"",!0),Pe(this,n[4]),this.g=Fe(n[5]||"",!0),De(this,n[6]||"",!0),this.i=Fe(n[7]||"")):(this.a=!!e,this.b=new We(null,this.a))}function je(t){return new Ne(t)}function xe(t,e,n){t.f=n?Fe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Re(t,e,n){t.c=n?Fe(e,!0):e}function Pe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function De(t,e,n){e instanceof We?(t.b=e,function(t,e){e&&!t.f&&(Ge(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Qe(this,e),Je(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Ue(e,Ke)),t.b=new We(e,t.a))}function Le(t,e,n){t.b.set(e,n)}function Me(t){return Le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^m()).toString(36)),t}function Fe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ue(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ve),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ve(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ne.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ue(e,qe,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ue(e,qe,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ue(n,"/"==n.charAt(0)?Be:He,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ue(n,ze)),t.join("")};var qe=/[#\/\?@]/g,He=/[#\?:]/g,Be=/[#\?]/g,Ke=/[#\?@]/g,ze=/#/g;function We(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ge(t){t.a||(t.a=new Se,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Qe(t,e){Ge(t),e=Ye(t,e),Ae(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ae((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ce(t)))}function $e(t,e){return Ge(t),e=Ye(t,e),Ae(t.a.b,e)}function Je(t,e,n){Qe(t,e),0<n.length&&(t.c=null,t.a.set(Ye(t,e),I(n)),t.b+=n.length)}function Ye(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(o=We.prototype).add=function(t,e){Ge(this),this.c=null,t=Ye(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},o.forEach=function(t,e){Ge(this),this.a.forEach((function(n,r){E(n,(function(n){t.call(e,n,r,this)}),this)}),this)},o.L=function(){Ge(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},o.K=function(t){Ge(this);var e=[];if("string"==typeof t)$e(this,t)&&(e=T(e,this.a.get(Ye(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},o.set=function(t,e){return Ge(this),this.c=null,$e(this,t=Ye(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},o.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Xe=function(){return function(t,e){this.b=t,this.a=e}}();function Ze(t){this.g=t||tn,t=u.PerformanceNavigationTiming?0<(t=u.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var tn=10;function en(t){return!!t.b||!!t.a&&t.a.size>=t.f}function nn(t){return t.b?1:t.a?t.a.size:0}function rn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function on(t,e){t.a?t.a.add(e):t.b=e}function sn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function an(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var o=i(t.a.values()),s=o.next();!s.done;s=o.next())r=r.concat(s.value.s)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return I(t.c)}function un(){}function cn(){this.a=new un}function ln(t,e,n){var r=n||"";try{Oe(t,(function(t,n){var i=t;h(t)&&(i=Ot(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Ze.prototype.cancel=function(){var t,e;if(this.c=an(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},un.prototype.stringify=function(t){return u.JSON.stringify(t,void 0)},un.prototype.parse=function(t){return u.JSON.parse(t,void 0)};var fn=u.JSON.parse;function pn(t){Et.call(this),this.headers=new Se,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=dn,this.D=this.F=!1}b(pn,Et);var dn="",gn=/^https?$/i,vn=["POST","PUT"];function yn(t){return"content-type"==t.toLowerCase()}function mn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,bn(t),wn(t)}function bn(t){t.u||(t.u=!0,Tt(t,"complete"),Tt(t,"error"))}function _n(t){if(t.b&&void 0!==a&&(!t.s[1]||4!=Tn(t)||2!=t.W()))if(t.l&&4==Tn(t))Ft(t.za,0,t);else if(Tt(t,"readystatechange"),4==Tn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ke)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!gn.test(o?o.toLowerCase():"")}e=i}if(e)Tt(t,"complete"),Tt(t,"success");else{t.h=6;try{var c=2<Tn(t)?t.a.statusText:""}catch(n){c=""}t.f=c+" ["+t.W()+"]",bn(t)}}finally{wn(t)}}}function wn(t,e){if(t.a){En(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||Tt(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function En(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(u.clearTimeout(t.m),t.m=null)}function Tn(t){return t.a?t.a.readyState:0}function In(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return x(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Le(t,e,n))}function On(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sn(t){this.pa=0,this.g=[],this.c=new zt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=On("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=On("baseRetryDelayMs",5e3,t),this.Ra=On("retryDelaySeedMs",1e4,t),this.Ma=On("forwardChannelMaxRetries",2,t),this.ma=On("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Ze(t&&t.concurrentRequestLimit),this.ka=new cn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Cn(t){if(kn(t),3==t.v){var e=t.R++,n=je(t.B);Le(n,"SID",t.J),Le(n,"RID",e),Le(n,"TYPE","terminate"),Rn(t,n),(e=new he(t,t.c,e,void 0)).H=2,e.i=Me(je(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(e.i.toString(),"")),!n&&u.Image&&((new Image).src=e.i,n=!0),n||(e.a=zn(e.g,null),e.a.ba(e.i)),e.u=m(),be(e)}Bn(t)}function An(t){t.a&&(Mn(t),t.a.cancel(),t.a=null)}function kn(t){An(t),t.j&&(u.clearTimeout(t.j),t.j=null),Un(t),t.b.cancel(),t.h&&("number"==typeof t.h&&u.clearTimeout(t.h),t.h=null)}function Nn(t,e){t.g.push(new Xe(t.Oa++,e)),3==t.v&&jn(t)}function jn(t){en(t.b)||t.h||(t.h=!0,xt(t.Ba,t),t.u=0)}function xn(t,e){var n;n=e?e.f:t.R++;var r=je(t.B);Le(r,"SID",t.J),Le(r,"RID",n),Le(r,"AID",t.P),Rn(t,r),t.i&&t.l&&In(r,t.i,t.l),n=new he(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Pn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),on(t.b,n),ge(n,r,e)}function Rn(t,e){t.f&&Oe({},(function(t,n){Le(e,n,t)}))}function Pn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?v(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{ln(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Dn(t){t.a||t.j||(t.T=1,xt(t.Aa,t),t.o=0)}function Ln(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=ee(v(t.Aa,t),qn(t,t.o)),t.o++,0))}function Mn(t){null!=t.s&&(u.clearTimeout(t.s),t.s=null)}function Fn(t){t.a=new he(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=je(t.la);Le(e,"RID","rpc"),Le(e,"SID",t.J),Le(e,"CI",t.H?"0":"1"),Le(e,"AID",t.P),Rn(t,e),Le(e,"TYPE","xmlhttp"),t.i&&t.l&&In(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Me(je(e)),n.j=null,n.I=!0,ve(n,t)}function Un(t){null!=t.m&&(u.clearTimeout(t.m),t.m=null)}function Vn(t,e){var n=null;if(t.a==e){Un(t),Mn(t),t.a=null;var r=2}else{if(!rn(t.b,e))return;n=e.s,sn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=m()-e.u;var i=t.u;Tt(r=$t(),new te(r,n,e,i)),jn(t)}else Dn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(nn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ee(v(t.Ba,t,e),qn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ln(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Hn(t,5);break;case 4:Hn(t,10);break;case 3:Hn(t,6);break;default:Hn(t,2)}}function qn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Hn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=v(t.Ya,t);n||(n=new Ne("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||xe(n,"https"),Me(n)),function(t,e){var n=new zt;if(u.Image){var r=new Image;r.onload=y(hn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=y(hn,n,r,"TestLoadImage: error",!1,e),r.onabort=y(hn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=y(hn,n,r,"TestLoadImage: timeout",!1,e),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zt(2);t.v=0,t.f&&t.f.ra(e),Bn(t),kn(t)}function Bn(t){t.v=0,t.I=-1,t.f&&(0==an(t.b).length&&0==t.g.length||(t.b.c.length=0,I(t.g),t.g.length=0),t.f.qa())}function Kn(t,e,n){var r=function(t){return t instanceof Ne?je(t):new Ne(t,void 0)}(n);if(""!=r.c)e&&Re(r,e+"."+r.c),Pe(r,r.h);else{var i=u.location;r=function(t,e,n,r){var i=new Ne(null,void 0);return t&&xe(i,t),e&&Re(i,e),n&&Pe(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&x(t.V,(function(t,e){Le(r,e,t)})),n=t.na,(e=t.A)&&n&&Le(r,e,n),Le(r,"VER",t.ha),Rn(t,r),r}function zn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pn(t.Na)).F=t.C,e}function Wn(){}function Gn(){if(V&&!(10<=Number(Y)))throw Error("Environmental error: no available transport.")}function Qn(t,e){Et.call(this),this.a=new Sn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!O(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!O(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Yn(this)}function $n(t){ue.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Jn(){ce.call(this),this.status=1}function Yn(t){this.a=t}(o=pn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:se),this.a.onreadystatechange=v(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void mn(this,o)}t=n||"";var i=new Se(this.headers);r&&Oe(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=yn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=u.FormData&&t instanceof u.FormData,!(0<=w(vn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{En(this),0<this.o&&((this.D=function(t){return V&&J(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=v(this.xa,this)):this.m=Ft(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){mn(this,o)}},o.xa=function(){void 0!==a&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Tt(this,"timeout"),this.abort(8))},o.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Tt(this,"complete"),Tt(this,"abort"),wn(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),wn(this,!0)),pn.X.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?_n(this):this.Ua())},o.Ua=function(){_n(this)},o.W=function(){try{return 2<Tn(this)?this.a.status:-1}catch(F){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(F){return""}},o.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),fn(e)}},o.ua=function(){return this.h},o.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(o=Sn.prototype).ha=8,o.v=1,o.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new he(this,this.c,t,void 0),r=this.l;if(this.O&&(r?D(r=R(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Pn(this,n,e),Le(i=je(this.B),"RID",t),Le(i,"CVER",22),this.A&&Le(i,"X-HTTP-Session-Id",this.A),Rn(this,i),this.i&&r&&In(i,this.i,r),on(this.b,n),this.Ia&&Le(i,"TYPE","init"),this.da?(Le(i,"$req",e),Le(i,"SID","null"),n.U=!0,ge(n,i,null)):ge(n,i,e),this.v=2}}else 3==this.v&&(t?xn(this,t):0==this.g.length||en(this.b)||xn(this))},o.Aa=function(){if(this.j=null,Fn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ee(v(this.Ta,this),t)}},o.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Zt(10),An(this),Fn(this))},o.Sa=function(){null!=this.m&&(this.m=null,An(this),Ln(this),Zt(19))},o.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Zt(2)):(this.c.info("Failed to ping google.com"),Zt(1))},(o=Wn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ja=function(){},Gn.prototype.a=function(t,e){return new Qn(t,e)},b(Qn,Et),Qn.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Zt(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Kn(t,null,t.fa),jn(t)},Qn.prototype.close=function(){Cn(this.a)},Qn.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Nn(this.a,e)}else this.l?((e={}).__data__=Ot(t),Nn(this.a,e)):Nn(this.a,t)},Qn.prototype.G=function(){this.a.f=null,delete this.f,Cn(this.a),delete this.a,Qn.X.G.call(this)},b($n,ue),b(Jn,ce),b(Yn,Wn),Yn.prototype.ta=function(){Tt(this.a,"a")},Yn.prototype.sa=function(t){Tt(this.a,new $n(t))},Yn.prototype.ra=function(t){Tt(this.a,new Jn(t))},Yn.prototype.qa=function(){Tt(this.a,"b")},Gn.prototype.createWebChannel=Gn.prototype.a,Qn.prototype.send=Qn.prototype.h,Qn.prototype.open=Qn.prototype.g,Qn.prototype.close=Qn.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,re.COMPLETE="complete",oe.EventType=ae,ae.OPEN="a",ae.CLOSE="b",ae.ERROR="c",ae.MESSAGE="d",Et.prototype.listen=Et.prototype.va,pn.prototype.listenOnce=pn.prototype.wa,pn.prototype.getLastError=pn.prototype.Qa,pn.prototype.getLastErrorCode=pn.prototype.ua,pn.prototype.getStatus=pn.prototype.W,pn.prototype.getResponseJson=pn.prototype.Pa,pn.prototype.getResponseText=pn.prototype.$,pn.prototype.send=pn.prototype.ba;var Xn=function(){return new Gn},Zn=function(){return $t()},tr=ne,er=re,nr=Gt,rr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},ir=oe,or=pn},xbPD:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t=null){return e=>e.lift(new o(t))}class o{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new s(t,this.defaultValue))}}class s extends r.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},xo5E:function(t,e,n){"use strict";var r,i=n("zIRd"),o=(n("q/0M"),n("qOnz"),n("x7I3"),n("Iig+")),s=n("/6Yf"),a={Firestore:o.c,GeoPoint:o.m,Timestamp:o.t,Blob:o.b,Transaction:o.d,WriteBatch:o.l,DocumentReference:o.g,DocumentSnapshot:o.e,Query:o.r,QueryDocumentSnapshot:o.h,QuerySnapshot:o.i,CollectionReference:o.q,FieldPath:o.p,FieldValue:o.n,setLogLevel:o.a,CACHE_SIZE_UNLIMITED:o.j};(function(t,e){t.INTERNAL.registerComponent(new s.a("firestore",(function(t){return function(t,e){return new o.c(t,new o.f(t,e),new o.o)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},a)))})(r=i.a),r.registerVersion("@firebase/firestore","2.1.3")},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},zIRd:function(t,e,n){"use strict";var r,i,o=n("30Go"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.m)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return u}),"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.k)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}c(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.k)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.n)(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var p=Object(o.h)(Object.keys(e)),g=p.next();!g.done;g=p.next())e[g.value]._addComponent(a)}catch(v){u={error:v}}finally{try{g&&!g.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.n)(e,t)},createSubscribe:s.l,ErrorFactory:s.b,deepExtend:s.n}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.r)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.y)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=v;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(h,"0.6.13",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyCm4buvdEZt1tD5kNCfztA5q7c7y2jYs2o",authDomain:"traicay-firebase.firebaseapp.com",projectId:"traicay-firebase",storageBucket:"traicay-firebase.appspot.com",messagingSenderId:"160229069020",appId:"1:160229069020:web:12337e878d2df3f5e92419",measurementId:"G-MEWMJRC1VS"};var o=n("ofXK");class s extends o.n{constructor(){super()}supportsDOMEvents(){return!0}}class a extends s{static makeCurrent(){Object(o.r)(new a)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=c||(c=document.querySelector("base"),c)?c.getAttribute("href"):null;return null==e?null:(n=e,u||(u=document.createElement("a")),u.setAttribute("href",n),"/"===u.pathname.charAt(0)?u.pathname:"/"+u.pathname);var n}resetBaseElement(){c=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Object(o.q)(document.cookie,t)}}let u,c=null;const l=new r.q("TRANSITION_ID"),h=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=Object(o.p)();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[l,o.c,r.r],multi:!0}];class f{static init(){Object(r.V)(new f)}addToWindow(t){r.mb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.mb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.mb.getAllAngularRootElements=()=>t.getAllRootElements(),r.mb.frameworkStabilizers||(r.mb.frameworkStabilizers=[]),r.mb.frameworkStabilizers.push(t=>{const e=r.mb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Object(o.p)().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const p=new r.q("EventManagerPlugins");let d=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(p),r.Kb(r.z))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();class g{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Object(o.p)().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let v=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),y=(()=>{class t extends v{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Object(o.p)().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(o.c))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const m={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},b=/%COMP%/g;function _(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?_(t,i,n):(i=i.replace(b,t),n.push(i))}return n}function w(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let E=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new T(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new I(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.Q.Native:case r.Q.ShadowDom:return new O(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=_(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(d),r.Kb(y),r.Kb(r.c))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();class T{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(m[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=m[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=m[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.F.DashCase?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,w(n)):this.eventManager.addEventListener(t,e,w(n))}}class I extends T{constructor(t,e,n,r){super(t),this.component=n;const i=_(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(b,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(b,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class O extends T{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.Q.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=_(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let S=(()=>{class t extends g{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(o.c))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const C=["alt","control","meta","shift"],A={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},k={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},N={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let j=(()=>{class t extends g{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Object(o.p)().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(C.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&k.hasOwnProperty(e)&&(e=k[e]))}return A[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),C.forEach(r=>{r!=n&&(0,N[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(o.c))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const x=[{provide:r.B,useValue:o.o},{provide:r.C,useValue:function(){a.makeCurrent(),f.init()},multi:!0},{provide:o.c,useFactory:function(){return Object(r.rb)(document),document},deps:[]}],R=Object(r.R)(r.U,"browser",x),P=[[],{provide:r.X,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:p,useClass:S,multi:!0,deps:[o.c,r.z,r.B]},{provide:p,useClass:j,multi:!0,deps:[o.c]},[],{provide:E,useClass:E,deps:[d,y,r.c]},{provide:r.E,useExisting:E},{provide:v,useExisting:y},{provide:y,useClass:y,deps:[o.c]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:d,useClass:d,deps:[p,r.z]},[]];let D=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:l,useExisting:r.c},h]}}}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)(r.Kb(t,12))},providers:P,imports:[o.b,r.f]}),t})();"undefined"!=typeof window&&window;var L=n("tyNb");const M=[{path:"shop",loadChildren:()=>Promise.all([n.e(2),n.e(1),n.e(8)]).then(n.bind(null,"wq26")).then(t=>t.ShopModule)},{path:"cart",loadChildren:()=>Promise.all([n.e(1),n.e(6)]).then(n.bind(null,"sFz8")).then(t=>t.CartModule)},{path:"**",pathMatch:"full",loadChildren:()=>Promise.all([n.e(2),n.e(7)]).then(n.bind(null,"99Un")).then(t=>t.HomeModule)}];let F=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},imports:[[L.d.forRoot(M)],L.d]}),t})();function U(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}var V,q=n("zIRd"),H=(n("t6oF"),n("6Uf2"),n("xo5E"),n("q/0M")),B=n("qOnz"),K=(n("x7I3"),n("Iig+"));(V=K.c).prototype.loadBundle=function(t){return Object(K.k)(this,t)},V.prototype.namedQuery=function(t){return Object(K.s)(this,t)};var z=n("30Go"),W=n("/6Yf"),G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Q=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(z.c)(e,t),e}(Error),$=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Object(z.b)(this,void 0,void 0,(function(){var t;return Object(z.d)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Object(z.b)(this,void 0,void 0,(function(){return Object(z.d)(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(e){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return Object(z.b)(this,void 0,void 0,(function(){var t,e;return Object(z.d)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function J(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Y,X,Z,tt=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return J(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?J(t,(function(t){return e.decode(t)})):t},t}(),et=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new tt,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new $(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(a){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(z.b)(this,void 0,void 0,(function(){var r,i;return Object(z.d)(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return Object(z.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return Object(z.d)(this,(function(p){switch(p.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=p.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new Q("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(n.timeout||7e4),u=a.timer,c=a.promise,[4,Promise.race([nt(u,this.postJSON(r,i,o)),c,nt(u,this.cancelAllRequests)])];case 2:if(!(l=p.sent()))throw new Q("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!G[a])return new Q("internal","internal");r=G[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(c){}return"ok"===r?null:new Q(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new Q("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new Q("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}}))}))},t}();function nt(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n;return Object(z.d)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}Y=q.a,X=fetch.bind(self),Z={Functions:et},Y.INTERNAL.registerComponent(new W.a("functions",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new et(n,r,i,e,X)}),"PUBLIC").setServiceProps(Z).setMultipleInstances(!0)),q.a.registerVersion("@firebase/functions","0.6.1");var rt,it=n("nbvr"),ot="w:0.4.19",st=((rt={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',rt["not-registered"]="Firebase Installation is not registered.",rt["installation-not-found"]="Firebase Installation not found.",rt["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',rt["app-offline"]="Could not process request. Application offline.",rt["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",rt),at=new B.b("installations","Installations",st);function ut(t){return t instanceof B.c&&t.code.includes("request-failed")}function ct(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function lt(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function ht(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r;return Object(z.d)(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,at.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function ft(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function pt(t,e){var n=e.refreshToken,r=ft(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function dt(t){return Object(z.b)(this,void 0,void 0,(function(){var e;return Object(z.d)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function gt(t,e){var n=e.fid;return Object(z.b)(this,void 0,void 0,(function(){var e,r,i,o,s;return Object(z.d)(this,(function(a){switch(a.label){case 0:return e=ct(t),r=ft(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:ot})},[4,dt((function(){return fetch(e,i)}))];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:lt(s.authToken)}];case 3:return[4,ht("Create Installation",o)];case 4:throw a.sent()}}))}))}function vt(t){return new Promise((function(e){setTimeout(e,t)}))}var yt=/^[cdef][\w-]{21}$/;function mt(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(z.f)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return yt.test(e)?e:""}catch(n){return""}}function bt(t){return t.appName+"!"+t.appId}var _t=new Map;function wt(t,e){var n=bt(t);Et(n,e),function(t,e){var n=It();n&&n.postMessage({key:t,fid:e}),Ot()}(n,e)}function Et(t,e){var n,r,i=_t.get(t);if(i)try{for(var o=Object(z.h)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Tt=null;function It(){return!Tt&&"BroadcastChannel"in self&&((Tt=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){Et(t.data.key,t.data.fid)}),Tt}function Ot(){0===_t.size&&Tt&&(Tt.close(),Tt=null)}var St,Ct="firebase-installations-store",At=null;function kt(){return At||(At=Object(it.openDb)("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(Ct)}}))),At}function Nt(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(z.d)(this,(function(a){switch(a.label){case 0:return n=bt(t),[4,kt()];case 1:return r=a.sent(),i=r.transaction(Ct,"readwrite"),[4,(o=i.objectStore(Ct)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||wt(t,e.fid),[2,e]}}))}))}function jt(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n,r;return Object(z.d)(this,(function(i){switch(i.label){case 0:return e=bt(t),[4,kt()];case 1:return n=i.sent(),[4,(r=n.transaction(Ct,"readwrite")).objectStore(Ct).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function xt(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(z.d)(this,(function(u){switch(u.label){case 0:return n=bt(t),[4,kt()];case 1:return r=u.sent(),i=r.transaction(Ct,"readwrite"),[4,(o=i.objectStore(Ct)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||wt(t,a.fid),[2,a]}}))}))}function Rt(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n,r;return Object(z.d)(this,(function(i){switch(i.label){case 0:return[4,xt(t,(function(n){var r=function(t){return Lt(t||{fid:mt(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(at.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r;return Object(z.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,gt(t,e)];case 1:return n=i.sent(),[2,Nt(t,n)];case 2:return ut(r=i.sent())&&409===r.customData.serverCode?[4,jt(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Nt(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Pt(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function Pt(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n,r,i;return Object(z.d)(this,(function(o){switch(o.label){case 0:return[4,Dt(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,vt(100)];case 3:return o.sent(),[4,Dt(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Rt(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function Dt(t){return xt(t,(function(t){if(!t)throw at.create("installation-not-found");return Lt(t)}))}function Lt(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Mt(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(z.b)(this,void 0,void 0,(function(){var t,i,o,s,a;return Object(z.d)(this,(function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return ct(t)+"/"+n+"/authTokens:generate"}(n,e),i=pt(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:ot}})},[4,dt((function(){return fetch(t,s)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,lt(u.sent())];case 3:return[4,ht("Generate Auth Token",a)];case 4:throw u.sent()}}))}))}function Ft(t,e){return void 0===e&&(e=!1),Object(z.b)(this,void 0,void 0,(function(){var n,r,i;return Object(z.d)(this,(function(o){switch(o.label){case 0:return[4,xt(t.appConfig,(function(r){if(!Vt(r))throw at.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r;return Object(z.d)(this,(function(i){switch(i.label){case 0:return[4,Ut(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,vt(100)];case 3:return i.sent(),[4,Ut(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Ft(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw at.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(z.a)(Object(z.a)({},t),{authToken:e})}(r);return n=function(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r,i;return Object(z.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Mt(t,e)];case 1:return n=o.sent(),i=Object(z.a)(Object(z.a)({},e),{authToken:n}),[4,Nt(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!ut(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,jt(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(z.a)(Object(z.a)({},e),{authToken:{requestStatus:0}}),[4,Nt(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,s),s}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function Ut(t){return xt(t,(function(t){if(!Vt(t))throw at.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(z.a)(Object(z.a)({},t),{authToken:{requestStatus:0}}):t}))}function Vt(t){return void 0!==t&&2===t.registrationStatus}function qt(t){return Object(z.b)(this,void 0,void 0,(function(){var e;return Object(z.d)(this,(function(n){switch(n.label){case 0:return[4,Rt(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function Ht(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(z.d)(this,(function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return ct(t)+"/"+n}(t,e),r=pt(t,e),i={method:"DELETE",headers:r},[4,dt((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,ht("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}function Bt(t){return at.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new W.a("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Bt("App Configuration");if(!t.name)throw Bt("App Name");try{for(var r=Object(z.h)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Bt(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n,r;return Object(z.d)(this,(function(i){switch(i.label){case 0:return[4,Rt(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):Ft(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(z.b)(this,void 0,void 0,(function(){return Object(z.d)(this,(function(n){switch(n.label){case 0:return[4,qt(t.appConfig)];case 1:return n.sent(),[4,Ft(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n;return Object(z.d)(this,(function(r){switch(r.label){case 0:return[4,xt(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw at.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw at.create("app-offline");case 3:return[4,Ht(e,n)];case 4:return r.sent(),[4,jt(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){It();var n=bt(t),r=_t.get(n);r||(r=new Set,_t.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=bt(t),r=_t.get(n);r&&(r.delete(e),0===r.size&&_t.delete(n),Ot())}(n,e)}}(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.19")}(q.a);var Kt=((St={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',St["only-available-in-window"]="This method is available in a Window context.",St["only-available-in-sw"]="This method is available in a service worker context.",St["permission-default"]="The notification permission was not granted and dismissed instead.",St["permission-blocked"]="The notification permission was not granted and blocked instead.",St["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",St["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",St["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",St["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",St["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",St["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",St["token-update-no-token"]="FCM returned no token when updating the user to push.",St["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",St["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",St["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",St["invalid-vapid-key"]="The public VAPID key must be a string.",St["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",St),zt=new B.b("messaging","Messaging",Kt),Wt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Gt=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function Qt(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(z.f)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $t(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var Jt="fcm_token_details_db",Yt="fcm_token_object_Store";function Xt(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n=this;return Object(z.d)(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(t){return t.name})).includes(Jt))return[2,null];r.label=2;case 2:return e=null,[4,Object(it.openDb)(Jt,5,(function(r){return Object(z.b)(n,void 0,void 0,(function(){var n,i,o,s;return Object(z.d)(this,(function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(Yt)?[4,(n=r.transaction.objectStore(Yt)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:Qt(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:Qt(o.auth),p256dh:Qt(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:Qt(o.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,Object(it.deleteDb)(Jt)];case 4:return r.sent(),[4,Object(it.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,Object(it.deleteDb)("undefined")];case 6:return r.sent(),[2,Zt(e)?e:null]}}))}))}function Zt(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var te="firebase-messaging-store",ee=null;function ne(){return ee||(ee=Object(it.openDb)("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(te)}}))),ee}function re(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n,r;return Object(z.d)(this,(function(i){switch(i.label){case 0:return e=se(t),[4,ne()];case 1:return[4,i.sent().transaction(te).objectStore(te).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,Xt(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,ie(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function ie(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r,i;return Object(z.d)(this,(function(o){switch(o.label){case 0:return n=se(t),[4,ne()];case 1:return r=o.sent(),[4,(i=r.transaction(te,"readwrite")).objectStore(te).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function oe(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n,r;return Object(z.d)(this,(function(i){switch(i.label){case 0:return e=se(t),[4,ne()];case 1:return n=i.sent(),[4,(r=n.transaction(te,"readwrite")).objectStore(te).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function se(t){return t.appConfig.appId}function ae(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(z.d)(this,(function(a){switch(a.label){case 0:return[4,he(t)];case 1:n=a.sent(),r=fe(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(le(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),zt.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw zt.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw zt.create("token-subscribe-no-token");return[2,o.token]}}))}))}function ue(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(z.d)(this,(function(a){switch(a.label){case 0:return[4,he(t)];case 1:n=a.sent(),r=fe(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(le(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),zt.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw zt.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw zt.create("token-update-no-token");return[2,o.token]}}))}))}function ce(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(z.d)(this,(function(s){switch(s.label){case 0:return[4,he(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(le(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw zt.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),zt.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}}))}))}function le(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function he(t){var e=t.appConfig,n=t.installations;return Object(z.b)(this,void 0,void 0,(function(){var t;return Object(z.d)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function fe(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==Wt&&(n.web.applicationPubKey=e),n}function pe(t,e,n){return Object(z.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(z.d)(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw zt.create("permission-blocked");return[4,ye(e,n)];case 1:return r=a.sent(),[4,re(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Qt(r.getKey("auth")),p256dh:Qt(r.getKey("p256dh"))},i?[3,3]:[2,ve(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,ce(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,ve(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,ge({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l}))}))}function de(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r;return Object(z.d)(this,(function(i){switch(i.label){case 0:return[4,re(t)];case 1:return(n=i.sent())?[4,ce(t,n.token)]:[3,4];case 2:return i.sent(),[4,oe(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function ge(t,e,n){return Object(z.b)(this,void 0,void 0,(function(){var r,i,o;return Object(z.d)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,ue(e,t)];case 1:return r=s.sent(),i=Object(z.a)(Object(z.a)({},t),{token:r,createTime:Date.now()}),[4,ie(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,de(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function ve(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r;return Object(z.d)(this,(function(i){switch(i.label){case 0:return[4,ae(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,ie(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function ye(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n;return Object(z.d)(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$t(e)})]}}))}))}function me(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function be(t){return new Promise((function(e){setTimeout(e,t)}))}var _e=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw zt.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(z.b)(this,void 0,void 0,(function(){var n;return Object(z.d)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,re(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:Wt,r.label=2;case 2:return[2,pe(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return de(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw zt.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw zt.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw zt.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw zt.create("only-available-in-window")},t.prototype.onMessage=function(){throw zt.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw zt.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n,r,i;return Object(z.d)(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,Ie()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,Te(n,e)]:(r=!1,e.notification?[4,Oe(we(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,be(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return Object(z.b)(this,void 0,void 0,(function(){var r;return Object(z.d)(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,de(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,re(this.firebaseDependencies)];case 3:return r=i.sent(),[4,de(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,pe(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:Wt)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return Object(z.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(z.d)(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(me(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,Ee(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,be(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=Gt.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}}))}))},t}();function we(t){var e,n=Object(z.a)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function Ee(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return Object(z.d)(this,(function(u){switch(u.label){case 0:return[4,Ie()];case 1:e=u.sent();try{for(n=Object(z.h)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function Te(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Gt.PUSH_RECEIVED;try{for(var i=Object(z.h)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Ie(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Oe(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var Se=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n;return Object(z.d)(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Gt.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),me(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(z.b)(this,void 0,void 0,(function(){return Object(z.d)(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw zt.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,pe(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return Object(z.b)(this,void 0,void 0,(function(){return Object(z.d)(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Wt),[2]}))}))},t.prototype.updateSwReg=function(t){return Object(z.b)(this,void 0,void 0,(function(){return Object(z.d)(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw zt.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return Object(z.b)(this,void 0,void 0,(function(){var t,e;return Object(z.d)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),zt.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return Object(z.b)(this,void 0,void 0,(function(){return Object(z.d)(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,de(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return Object(z.b)(this,void 0,void 0,(function(){var t;return Object(z.d)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw zt.create("denied"===t?"permission-blocked":"permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw zt.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw zt.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw zt.create("invalid-sw-registration");if(this.swRegistration)throw zt.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw zt.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw zt.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n;return Object(z.d)(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case Gt.NOTIFICATION_CLICKED:return"notification_open";case Gt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function Ce(t){return zt.create("missing-app-config-values",{valueName:t})}var Ae={isSupported:ke};function ke(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}q.a.INTERNAL.registerComponent(new W.a("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw Ce("App Configuration Object");if(!t.name)throw Ce("App Name");var r=t.options;try{for(var i=Object(z.h)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw Ce(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!ke())throw zt.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new _e(n):new Se(n)}),"PUBLIC").setServiceProps(Ae));var Ne="firebasestorage.googleapis.com",je=function(t){function e(n,r){var i=t.call(this,De(n),"Firebase Storage: "+r+" ("+De(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(z.c)(e,t),e.prototype.codeEquals=function(t){return De(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(B.c),xe="canceled",Re="invalid-argument",Pe="unsupported-environment";function De(t){return"storage/"+t}function Le(){return new je("unknown","An unknown error occurred, please check the error payload for server response.")}function Me(){return new je(xe,"User canceled the upload/download.")}function Fe(){return new je("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ue(t){return new je(Re,t)}function Ve(){return new je("app-deleted","The Firebase app was deleted.")}function qe(t){return new je("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function He(t,e){return new je("invalid-format","String does not match format '"+t+"': "+e)}function Be(t){throw new je("internal-error","Internal error: "+t)}var Ke={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ze=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function We(t,e){switch(t){case Ke.RAW:return new ze(Ge(e));case Ke.BASE64:case Ke.BASE64URL:return new ze(Qe(t,e));case Ke.DATA_URL:return new ze((n=new $e(e)).base64?Qe(Ke.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw He(Ke.DATA_URL,"Malformed data URL.")}return Ge(e)}(n.rest),new $e(e).contentType)}var n;throw Le()}function Ge(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Qe(t,e){switch(t){case Ke.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw He(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Ke.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw He(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(c){throw He(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var $e=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw He(Ke.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),Je={STATE_CHANGED:"state_changed"},Ye="running",Xe="pausing",Ze="paused",tn="success",en="canceling",nn="canceled",rn="error",on={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function sn(t){switch(t){case Ye:case Xe:case en:return on.RUNNING;case Ze:return on.PAUSED;case tn:return on.SUCCESS;case nn:return on.CANCELED;case rn:default:return on.ERROR}}var an=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),un=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=an.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=an.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=an.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Be("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Be("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Be("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Be("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),cn=function(){function t(){}return t.prototype.createXhrIo=function(){return new un},t}();function ln(t){return"string"==typeof t||t instanceof String}function hn(t){return fn()&&t instanceof Blob}function fn(){return"undefined"!=typeof Blob}function pn(t,e,n,r){if(r<e)throw new je(Re,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new je(Re,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function dn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function gn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=dn();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(fn())return new Blob(t);throw new je(Pe,"This browser doesn't seem to support creating Blobs")}var vn=function(){function t(t,e){var n=0,r="";hn(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(hn(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(fn()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(gn.apply(null,r))}var i=e.map((function(t){return ln(t)?We(Ke.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),yn=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new je("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=Ne.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new je("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function mn(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function bn(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function _n(t){return"https://"+Ne+"/v0"+t}function wn(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function En(t,e){return e}var Tn=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||En}}(),In=null;function On(){if(In)return In;var t=[];t.push(new Tn("bucket")),t.push(new Tn("generation")),t.push(new Tn("metageneration")),t.push(new Tn("name","fullPath",!0));var e=new Tn("name");e.xform=function(t,e){return function(t){return!ln(t)||t.length<2?t:bn(t)}(e)},t.push(e);var n=new Tn("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Tn("timeCreated")),t.push(new Tn("updated")),t.push(new Tn("md5Hash",null,!0)),t.push(new Tn("cacheControl",null,!0)),t.push(new Tn("contentDisposition",null,!0)),t.push(new Tn("contentEncoding",null,!0)),t.push(new Tn("contentLanguage",null,!0)),t.push(new Tn("contentType",null,!0)),t.push(new Tn("metadata","customMetadata",!0)),In=t}function Sn(t,e,n){var r=mn(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new yn(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Cn(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var An=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function kn(t){if(!t)throw Le()}function Nn(t,e){return function(n,r){var i=Sn(t,r,e);return kn(null!==i),i}}function jn(t){return function(e,n){var r;return(r=401===e.getStatus()?new je("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new je("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new je("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function xn(t){var e=jn(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new je("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Rn(t,e,n){var r=_n(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new An(r,"GET",Nn(t,n),i);return o.errorHandler=xn(e),o}function Pn(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Dn=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Ln(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){kn(!1)}return kn(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Mn=262144,Fn=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}(),Un=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function Vn(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var qn=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=On(),this._resumable=this._shouldDoResumable(this._blob),this._state=Ye,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(xe)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(rn))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(xe)?r.completeTransitions_():(r._error=t,r._transition(rn))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===Ye&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then((function(n){switch(e._state){case Ye:t(n);break;case en:e._transition(nn);break;case Xe:e._transition(Ze)}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Pn(e,r,i),a={name:s.fullPath},u=_n(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Cn(s,n),h=new An(u,"POST",(function(t){var e;Ln(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){kn(!1)}return kn(ln(e)),e}),t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=jn(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=new An(n,"POST",(function(t){var e=Ln(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){kn(!1)}n||kn(!1);var i=Number(n);return kn(!isNaN(i)),new Dn(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=jn(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Mn*this._chunkMultiplier,n=new Dn(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new Dn(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new je("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},p=r.slice(h,h+l);if(null===p)throw Fe();var d=new An(n,"POST",(function(t,n){var i,s=Ln(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Nn(e,o)(t,n):null,new Dn(a,c,"final"===s,i)}),e.maxUploadRetryTime);return d.headers=f,d.body=p.uploadData(),d.progressCallback=a||null,d.errorHandler=jn(t),d}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(a){return t._error=a,void t._transition(rn)}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(tn)):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){Mn*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=Rn(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition(tn)}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Pn(e,r,i),c=Cn(u,n),l=vn.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw Fe();var h={name:u.fullPath},f=_n(o),p=t.maxUploadRetryTime,d=new An(f,"POST",Nn(t,n),p);return d.urlParams=h,d.headers=s,d.body=l.uploadData(),d.errorHandler=jn(e),d}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(tn)}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case en:case Xe:this._state=t,void 0!==this._request&&this._request.cancel();break;case Ye:var e=this._state===Ze;this._state=t,e&&(this._notifyObservers(),this._start());break;case Ze:this._state=t,this._notifyObservers();break;case nn:this._error=Me(),this._state=t,this._notifyObservers();break;case rn:case tn:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case Xe:this._transition(Ze);break;case en:this._transition(nn);break;case Ye:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=sn(this._state);return new Un(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Fn(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(sn(this._state)){case on.SUCCESS:Vn(this._resolve.bind(null,this.snapshot))();break;case on.CANCELED:case on.ERROR:Vn(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(sn(this._state)){case on.RUNNING:case on.PAUSED:t.next&&Vn(t.next.bind(t,this.snapshot))();break;case on.SUCCESS:t.complete&&Vn(t.complete.bind(t))();break;case on.CANCELED:case on.ERROR:t.error&&Vn(t.error.bind(t,this._error))();break;default:t.error&&Vn(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===Ze||this._state===Xe;return t&&this._transition(Ye),t},t.prototype.pause=function(){var t=this._state===Ye;return t&&this._transition(Xe),t},t.prototype.cancel=function(){var t=this._state===Ye||this._state===Xe;return t&&this._transition(en),t},t}(),Hn=function(){function t(t,e){this._service=t,this._location=e instanceof yn?e:yn.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new yn(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return bn(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new yn(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw qe(t)},t}();function Bn(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r,i;return Object(z.d)(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&pn("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=_n(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new An(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=mn(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new yn(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new yn(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return kn(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=jn(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}}))}))}function Kn(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new yn(t._location.bucket,n);return new Hn(t.storage,r)}var zn=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Wn=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new zn(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new zn(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new zn(t,i,i._ref))}:{next:e.next?function(t){return e.next(new zn(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Gn=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Qn(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Qn(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Qn=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(Kn(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Wn(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new qn(t,new vn(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=Ke.RAW),this._throwIfRoot("putString"),new Wn(function(t,e,n,r){void 0===n&&(n=Ke.RAW),t._throwIfRoot("putString");var i=We(n,e),o=Object(z.a)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new qn(t,new vn(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t,e,n=this;return(t=this._delegate,e={prefixes:[],items:[]},function t(e,n,r){return Object(z.b)(this,void 0,void 0,(function(){var i,o,s;return Object(z.d)(this,(function(a){switch(a.label){case 0:return[4,Bn(e,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(s=n.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))).then((function(t){return new Gn(t,n.storage)}))},t.prototype.list=function(t){var e=this;return Bn(this._delegate,t).then((function(t){return new Gn(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n;return Object(z.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=Rn(t.storage,t._location,On()),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r;return Object(z.d)(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=_n(e.fullServerUrl()),o=Cn(n,r),s=t.maxOperationRetryTime,a=new An(i,"PATCH",Nn(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=xn(e),a}(t.storage,t._location,e,On()),[2,t.storage.makeRequest(r,n).getPromise()]}}))}))}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n;return Object(z.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=_n(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new An(r,"GET",function(t,e){return function(n,r){var i=Sn(t,r,e);return kn(null!==i),function(t,e){var n=mn(e);if(null===n)return null;if(!ln(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return _n("/b/"+i(t.bucket)+"/o/"+i(n))+wn({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=xn(e),o}(t.storage,t._location,On()),[2,t.storage.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new je("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n;return Object(z.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=_n(e.fullServerUrl()),r=new An(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=xn(e),r}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw qe(t)},t}(),$n=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),Jn=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(u){o(u)}else null!==s?((r=Le()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Ve():Me():new je("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Yn(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Yn(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===an.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Yn(s,n))}else{var a=n.getErrorCode()===an.ABORT;e(!1,new Yn(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(z.g)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(z.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var p=!1;function d(t){p||(p=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,d(!0)}),r),d}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Yn=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Xn(t){return/^[A-Za-z]+:\/\//.test(t)}function Zn(t,e){if(e&&Xn(e)){if(t instanceof tr)return new Hn(t,e);throw Ue("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof tr){var r=e;if(null==r._bucket)throw new je("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var i=new Hn(r,r._bucket);return null!=n?t(i,n):i}if(void 0!==n){if(n.includes(".."))throw Ue('`path` param cannot contain ".."');return Kn(e,n)}return e}(t,e)}var tr=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?yn.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:yn.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){pn("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){pn("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object(z.b)(this,void 0,void 0,(function(){var t,e;return Object(z.d)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new Hn(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new $n(Ve());var r=function(t,e,n,r){var i=wn(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==q.a?q.a.SDK_VERSION:"AppManager")}(s),new Jn(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),er=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Xn(t))throw Ue("ref() expected a child path but got a URL, use refFromURL instead.");return new Qn(Zn(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Xn(t))throw Ue("refFromURL() expected a full URL but got a child path, use ref() instead.");try{yn.makeFromUrl(t)}catch(e){throw Ue("refFromUrl() expected a valid full URL but got an invalid one.")}return new Qn(Zn(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function nr(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new er(n,new tr(n,r,new cn,e))}!function(t){var e={TaskState:on,TaskEvent:Je,StringFormat:Ke,Storage:tr,Reference:Qn};t.INTERNAL.registerComponent(new W.a("storage",nr,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.2")}(q.a);var rr,ir,or,sr="0.4.5",ar=sr,ur="FB-PERF-TRACE-MEASURE",cr="_wt_",lr="_fcp",hr="_fid",fr="@firebase/performance/config",pr="@firebase/performance/configexpire",dr="Performance",gr=((rr={})["trace started"]="Trace {$traceName} was started before.",rr["trace stopped"]="Trace {$traceName} is not running.",rr["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",rr["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",rr["no window"]="Window is not available.",rr["no app id"]="App id is not available.",rr["no project id"]="Project id is not available.",rr["no api key"]="Api key is not available.",rr["invalid cc log"]="Attempted to queue invalid cc event",rr["FB not default"]="Performance can only start when Firebase app instance is the default one.",rr["RC response not ok"]="RC response is not ok",rr["invalid attribute name"]="Attribute name {$attributeName} is invalid.",rr["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",rr["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",rr["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",rr),vr=new B.b("performance",dr,gr),yr=new H.b(dr);yr.logLevel=H.a.INFO;var mr,br=function(){function t(t){if(this.window=t,!t)throw vr.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(B.w)()||(yr.info("IndexedDB is not supported by current browswer"),!1):(yr.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===ir&&(ir=new t(or)),ir},t}();function _r(t,e){var n=t.length-e.length;if(n<0||n>1)throw vr.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var wr,Er=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=_r("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=_r("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw vr.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw vr.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw vr.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===mr&&(mr=new t),mr},t}();function Tr(){return wr}var Ir=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),Or=["firebase_","google_","ga_"],Sr=new RegExp("^[a-zA-Z]\\w*$");function Cr(){var t=br.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function Ar(){switch(br.getInstance().document.visibilityState){case"visible":return Ir.VISIBLE;case"hidden":return Ir.HIDDEN;default:return Ir.UNKNOWN}}function kr(){var t=br.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Nr(t){if(!t)return t;var e=Er.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=jr(e.tracesSamplingRate),e.logNetworkAfterSampling=jr(e.networkRequestsSamplingRate),t}function jr(t){return Math.random()<=t}var xr,Rr=1;function Pr(){return Rr=2,xr=xr||function(){var t=br.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=Er.getInstance().installationsService.getId()).then((function(t){wr=t})),t;var t})).then((function(t){return function(t){var e=function(){var t=br.getInstance().localStorage;if(t){var e=t.getItem(pr);if(e&&Number(e)>Date.now()){var n=t.getItem(fr);if(n)try{return JSON.parse(n)}catch(r){return}}}}();return e?(Nr(e),Promise.resolve()):function(t){return(e=Er.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+Er.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+Er.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:Er.getInstance().getAppId(),app_version:ar,sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw vr.create("RC response not ok")}))})).catch((function(){yr.info("Could not fetch config, will use default configs")}));var e}(t).then(Nr).then((function(t){return function(t){var e=br.getInstance().localStorage;t&&e&&(e.setItem(fr,JSON.stringify(t)),e.setItem(pr,String(Date.now()+60*Er.getInstance().configTimeToLive*60*1e3)))}(t)}),(function(){}))}(t)})).then((function(){return Dr()}),(function(){return Dr()}))}function Dr(){Rr=3}var Lr,Mr=1e4,Fr=3,Ur=[],Vr=!1;function qr(t){if(!t.eventTime||!t.message)throw vr.create("invalid cc log");Ur=Object(z.g)(Ur,[t])}function Hr(t,e){Lr||(Lr=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];qr({message:t.apply(void 0,e),eventTime:Date.now()})}}(zr)),Lr(t,e)}function Br(t){var e=Er.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&br.getInstance().requiredApisAvailable()&&(t.isAuto&&Ar()!==Ir.VISIBLE||(3===Rr?Kr(t):Pr().then((function(){return Kr(t)}),(function(){return Kr(t)}))))}function Kr(t){if(Tr()){var e=Er.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return Hr(t,1)}),0)}}function zr(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:Wr(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Wr(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function Wr(){return{google_app_id:Er.getInstance().getAppId(),app_instance_id:Tr(),web_app_info:{sdk_version:ar,page_url:br.getInstance().getUrl(),service_worker_status:Cr(),visibility_state:Ar(),effective_connection_type:kr()},application_process_state:0}}var Gr=["_fp",lr,hr],Qr=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=br.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw vr.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw vr.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Br(this)},t.prototype.record=function(t,e,n){if(t<=0)throw vr.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw vr.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(z.a)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Br(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith(cr)&&Gr.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw vr.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(n=e,(r=Math.floor(n))<n&&yr.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40||Or.some((function(e){return t.startsWith(e)}))||!t.match(Sr))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw vr.create("invalid attribute name",{attributeName:t});if(!r)throw vr.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(z.a)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=br.getInstance().getUrl();if(i){var o=new t(cr+i,!0),s=Math.floor(1e3*br.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find((function(t){return"first-paint"===t.name}));a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric(lr,Math.floor(1e3*u.startTime)),r&&o.putMetric(hr,Math.floor(1e3*r))}Br(o)}},t.createUserTimingTrace=function(e){Br(new t(e,!1,e))},t}();function $r(t){var e=t;if(e&&void 0!==e.responseStart){var n=br.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=Er.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return Hr(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function Jr(){Tr()&&(setTimeout((function(){return function(){var t=br.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){Qr.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),Qr.createOobTrace(e,n,t))}))}else Qr.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=br.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)$r(n[e]);t.setupObserver("resource",$r)}()}),0),setTimeout((function(){return function(){for(var t=br.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)Yr(n[e]);t.setupObserver("measure",Yr)}()}),0))}function Yr(t){var e=t.name;e.substring(0,ur.length)!==ur&&Qr.createUserTimingTrace(e)}var Xr=function(){function t(t){this.app=t,br.getInstance().requiredApisAvailable()&&Object(B.N)().then((function(t){t&&(Vr||(function t(e){setTimeout((function(){var e,n;if(0!==Fr)return Ur.length?(n=(e=Ur.splice(0,1e3)).map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(e,n){return function(t){var e=Er.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(e).then((function(t){return t.ok||yr.info("Call to Firebase backend failed."),t.json()})).then((function(e){var r=Number(e.nextRequestWaitMillis),i=Mr;isNaN(r)||(i=Math.max(r,i));var o=e.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(Ur=Object(z.g)(n,Ur),yr.info("Retry transport request later.")),Fr=3,t(i)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Er.getInstance().logSource,log_event:n},e).catch((function(){Ur=Object(z.g)(e,Ur),Fr--,yr.info("Tries left: "+Fr+"."),t(Mr)}))):t(Mr)}),e)}(5500),Vr=!0),Pr().then(Jr,Jr))})).catch((function(t){yr.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new Qr(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return Er.getInstance().instrumentationEnabled},set:function(t){Er.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return Er.getInstance().dataCollectionEnabled},set:function(t){Er.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new W.a("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw vr.create("FB not default");if("undefined"==typeof window)throw vr.create("no window");return function(t){or=t}(window),Er.getInstance().firebaseAppInstance=t,Er.getInstance().installationsService=e,new Xr(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC")),t.registerVersion("@firebase/performance",sr)}(q.a);var Zr,ti="https://www.googletagmanager.com/gtag/js",ei=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),ni=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),ri=new H.b("@firebase/analytics");function ii(t,e,n,r,i,o){return Object(z.b)(this,void 0,void 0,(function(){var s,a,u,c;return Object(z.d)(this,(function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),ri.error(c),[3,8];case 8:return t(ei.CONFIG,i,o),[2]}}))}))}function oi(t,e,n,r,i){return Object(z.b)(this,void 0,void 0,(function(){var o,s,a,u,c,l,h;return Object(z.d)(this,(function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(ei.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),ri.error(h),[3,5];case 5:return[2]}}))}))}var si=((Zr={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Zr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Zr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Zr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Zr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Zr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Zr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Zr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Zr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Zr),ai=new B.b("analytics","Analytics",si),ui=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function ci(t){var e;return Object(z.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(z.d)(this,(function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw ai.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var c}))}))}function li(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=ui),Object(z.b)(this,void 0,void 0,(function(){var e,s,a,u,c,l,h;return Object(z.d)(this,(function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,hi(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return ri.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,ci(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof B.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return ri.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?Object(B.j)(o,r.intervalMillis,30):Object(B.j)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),ri.debug("Calling attemptFetch again in "+l+" millis"),[2,li(t,h,n,r)];case 7:return[2]}}))}))}function hi(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(ai.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var fi,pi,di=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),gi={},vi=[],yi={},mi="dataLayer",bi="gtag",_i=!1;function wi(t){if(_i)throw ai.create("already-initialized");t.dataLayerName&&(mi=t.dataLayerName),t.gtagName&&(bi=t.gtagName)}var Ei="analytics";function Ti(){return Object(z.b)(this,void 0,void 0,(function(){return Object(z.d)(this,(function(t){switch(t.label){case 0:if(Object(B.s)())return[2,!1];if(!Object(B.e)())return[2,!1];if(!Object(B.w)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(B.N)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new W.a(Ei,(function(t){return function(t,e){!function(){var t=[];if(Object(B.s)()&&t.push("This is a browser extension environment."),Object(B.e)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=ai.create("invalid-analytics-context",{errorInfo:e});ri.warn(n.message)}}();var n=t.options.appId;if(!n)throw ai.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw ai.create("no-api-key");ri.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=gi[n])throw ai.create("already-exists",{id:n});if(!_i){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(ti))return r}return null})()||function(t){var e=document.createElement("script");e.src=ti+"?l="+t,e.async=!0,document.head.appendChild(e)}(mi),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(mi);var r=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return Object(z.b)(this,void 0,void 0,(function(){var a;return Object(z.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==ei.EVENT?[3,2]:[4,oi(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==ei.CONFIG?[3,4]:[4,ii(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(ei.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),ri.error(a),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(gi,vi,yi,mi,bi);pi=r.wrappedGtag,fi=r.gtagCore,_i=!0}return gi[n]=function(t,e,n,r,i){return Object(z.b)(this,void 0,void 0,(function(){var o,s,a,u,c,l,h;return Object(z.d)(this,(function(f){switch(f.label){case 0:return(o=function(t,e,n){return void 0===e&&(e=ui),Object(z.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u=this;return Object(z.d)(this,(function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw ai.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw ai.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new di,setTimeout((function(){return Object(z.b)(u,void 0,void 0,(function(){return Object(z.d)(this,(function(t){return a.abort(),[2]}))}))}),6e4),[2,li({appId:r,apiKey:i,measurementId:o},s,a,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&ri.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return ri.error(t)})),e.push(o),s=function(){return Object(z.b)(this,void 0,void 0,(function(){var t;return Object(z.d)(this,(function(e){switch(e.label){case 0:return Object(B.w)()?[3,1]:(ri.warn(ai.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(B.N)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),ri.warn(ai.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([o,s])];case 1:return a=f.sent(),u=a[0],c=a[1],i("js",new Date),(h={}).origin="firebase",h.update=!0,l=h,null!=c&&(l.firebase_id=c),i(ei.CONFIG,u.measurementId,l),[2,u.measurementId]}}))}))}(t,vi,yi,e,fi),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,i){return Object(z.b)(this,void 0,void 0,(function(){var o,s;return Object(z.d)(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(ei.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Object(z.a)(Object(z.a)({},r),{send_to:o}),t(ei.EVENT,n,s),a.label=3;case 3:return[2]}}))}))})(pi,gi[n],t,e,r).catch((function(t){return ri.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(z.b)(this,void 0,void 0,(function(){var i;return Object(z.d)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(ei.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(ei.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(pi,gi[n],t,e).catch((function(t){return ri.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return Object(z.b)(this,void 0,void 0,(function(){var i;return Object(z.d)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(ei.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(ei.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(pi,gi[n],t,e).catch((function(t){return ri.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return Object(z.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(z.d)(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return t(ei.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(ei.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(pi,gi[n],t,e).catch((function(t){return ri.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n;return Object(z.d)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(gi[n],t).catch((function(t){return ri.error(t)}))},INTERNAL:{delete:function(){return delete gi[n],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:wi,EventName:ni,isSupported:Ti})),t.INTERNAL.registerComponent(new W.a("analytics-internal",(function(t){try{return{logEvent:t.getProvider(Ei).getImmediate().logEvent}}catch(e){throw ai.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.2")}(q.a);var Ii,Oi=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(z.d)(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},t}(),Si=((Ii={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Ii["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Ii["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Ii["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Ii["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Ii["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Ii["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Ii["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Ii["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Ii["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Ii["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Ii["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Ii["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Ii),Ci=new B.b("remoteconfig","Remote Config",Si),Ai=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,h,f,p,d,g,v;return Object(z.d)(this,(function(y){switch(y.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=y.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===m&&(m=navigator),m.languages&&m.languages[0]||m.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),y.label=2;case 2:return y.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return y.sent(),[4,s];case 4:return u=y.sent(),[3,6];case 5:throw c=y.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),Ci.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,y.label=7;case 7:return y.trys.push([7,9,,10]),[4,u.json()];case 8:return g=y.sent(),[3,10];case 9:throw v=y.sent(),Ci.create("fetch-client-parse",{originalErrorMessage:v.message});case 10:p=g.entries,d=g.state,y.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===d?h=500:"NO_CHANGE"===d?h=304:"NO_TEMPLATE"!==d&&"EMPTY_CONFIG"!==d||(p={}),304!==h&&200!==h)throw Ci.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:p}]}var m}))}))},t}(),ki=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),Ni=["1","true","t","yes","y","on"],ji=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&Ni.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),xi=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=H.a.DEBUG;break;case"silent":this._logger.logLevel=H.a.SILENT;break;default:this._logger.logLevel=H.a.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(z.b)(this,void 0,void 0,(function(){var t,e,n;return Object(z.d)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return Object(z.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(z.d)(this,(function(i){switch(i.label){case 0:t=new ki,setTimeout((function(){return Object(z.b)(r,void 0,void 0,(function(){return Object(z.d)(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=(o=e)instanceof B.c&&-1!==o.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}var o}))}))},t.prototype.fetchAndActivate=function(){return Object(z.b)(this,void 0,void 0,(function(){return Object(z.d)(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(z.a)(Object(z.a)({},t),e))).reduce((function(t,e){return t[e]=n.getValue(e),t}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new ji("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new ji("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new ji("static"))},t}();function Ri(t,e){var n=t.target.error||void 0;return Ci.create(e,{originalErrorMessage:n&&n.message})}var Pi="app_namespace_store",Di=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(Ri(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(Pi,{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n=this;return Object(z.d)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([Pi],"readonly").objectStore(Pi),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(Ri(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(u){i(Ci.create("storage-get",{originalErrorMessage:u&&u.message}))}}))]}}))}))},t.prototype.set=function(t,e){return Object(z.b)(this,void 0,void 0,(function(){var n,r=this;return Object(z.d)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction([Pi],"readwrite").objectStore(Pi),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(Ri(t,"storage-set"))},u.onsuccess=function(){i()}}catch(c){o(Ci.create("storage-set",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.delete=function(t){return Object(z.b)(this,void 0,void 0,(function(){var e,n=this;return Object(z.d)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([Pi],"readwrite").objectStore(Pi),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(Ri(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(u){i(Ci.create("storage-delete",{originalErrorMessage:u&&u.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),Li=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(z.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o;return Object(z.d)(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function Mi(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Ci.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Fi,Ui=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(z.b)(this,void 0,void 0,(function(){var e;return Object(z.d)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(z.b)(this,void 0,void 0,(function(){var e,i,o;return Object(z.d)(this,(function(s){switch(s.label){case 0:return[4,Mi(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof B.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(B.j)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),Vi="@firebase/remote-config";(Fi=q.a).INTERNAL.registerComponent(new W.a("remoteConfig",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw Ci.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw Ci.create("registration-project-id");if(!s)throw Ci.create("registration-api-key");if(!a)throw Ci.create("registration-app-id");var u=new Di(a,n.name,e=e||"firebase"),c=new Li(u),l=new H.b(Vi);l.logLevel=H.a.ERROR;var h=new Ai(r,Fi.SDK_VERSION,e,o,s,a),f=new Ui(h,u),p=new Oi(f,u,c,l),d=new xi(n,p,c,u,l);return d.ensureInitialized(),d}),"PUBLIC").setMultipleInstances(!0)),Fi.registerVersion(Vi,"0.1.30"),q.a.registerVersion("firebase","8.2.4","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),q.a.registerVersion("firebase","8.2.4");var qi=n("UbJi");let Hi=(()=>{class t{constructor(t){this.aAuth=t}ngOnInit(){}login(){return U(this,void 0,void 0,(function*(){var t=new q.a.auth.GoogleAuthProvider;yield this.aAuth.signInWithPopup(t),alert("login suscess!")}))}logout(){return U(this,void 0,void 0,(function*(){try{yield this.aAuth.signOut(),window.location.reload(),alert("log out sucess!")}catch(t){alert("log out failed!")}}))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(qi.a))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Bi=(()=>{class t{constructor(t){this.inOut=t,this.inout=this.inOut,this.aAuth=this.inOut.aAuth}ngOnInit(){this.aAuth.authState.subscribe(t=>{t&&(this.user=t,console.log(this.user))})}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(Hi))},t.\u0275cmp=r.yb({type:t,selectors:[["app-nav-bar"]],decls:17,vars:4,consts:[[1,"logo"],[1,"text",3,"routerLink"],[1,"nav-links"],["href","#",1,"text",3,"routerLink"],["id","cart","src","../../../assets/shoppinh_cart.png",3,"routerLink"],[2,"text-align","center","height","50%"],[2,"width","50px","border-radius","100%",3,"src"],[1,"button",3,"click"]],template:function(t,e){1&t&&(r.Hb(0,"nav"),r.Hb(1,"div",0),r.Hb(2,"h1",1),r.Xb(3,"Shop"),r.Gb(),r.Gb(),r.Hb(4,"ul",2),r.Hb(5,"li"),r.Hb(6,"a",3),r.Hb(7,"h1"),r.Xb(8,"Shopping"),r.Gb(),r.Gb(),r.Gb(),r.Gb(),r.Fb(9,"img",4),r.Hb(10,"div",5),r.Fb(11,"img",6),r.Hb(12,"div"),r.Hb(13,"button",7),r.Nb("click",(function(){return e.inOut.login()})),r.Xb(14,"Log in"),r.Gb(),r.Hb(15,"button",7),r.Nb("click",(function(){return e.inOut.logout()})),r.Xb(16,"Log out"),r.Gb(),r.Gb(),r.Gb(),r.Gb()),2&t&&(r.vb(2),r.Qb("routerLink",""),r.vb(4),r.Qb("routerLink","shop"),r.vb(3),r.Qb("routerLink","cart"),r.vb(2),r.Rb("src",e.user.photoURL,r.Ub))},directives:[L.b,L.c],styles:["*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]:before{box-sizing:border-box;margin:0;padding:0}nav[_ngcontent-%COMP%]{box-shadow:4px 4px rgba(0,0,0,.2);display:flex;justify-content:space-around;align-items:center;min-height:8vh;background-color:#ffcf75}.logo[_ngcontent-%COMP%]{color:#fff}.nav-links[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:40%;text-decoration:none}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;letter-spacing:3px;font-weight:700;font-size:14px}@media screen and (max-width:768px){body[_ngcontent-%COMP%]{display:none}}#cart[_ngcontent-%COMP%]{border:solid rgba(0,0,0,.5);border-radius:50px;background-color:#fff;width:70px;height:70px}.text[_ngcontent-%COMP%]{font-size:45px}.button[_ngcontent-%COMP%]{width:60px;height:20px;background-color:#fff;border-radius:5px;margin:1mm;border-width:.1mm}"]}),t})(),Ki=(()=>{class t{constructor(){this.title="TraiCay"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.yb({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Fb(0,"app-nav-bar"),r.Fb(1,"router-outlet"))},directives:[Bi,L.e],styles:[""]}),t})();var zi=n("spgP"),Wi=n("D0XW"),Gi=n("HDdC"),Qi=n("LRne"),$i=n("VRyK"),Ji=n("lJxs"),Yi=n("w1tV"),Xi=n("eIep"),Zi=n("Kqap"),to=n("/uUt"),eo=n("l7GE"),no=n("ZUHj");class ro{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new io(t,this.observables,this.project))}}class io extends eo.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let t=e[i];this.add(Object(no.a)(this,t,void 0,i))}}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var oo=n("7o/Q");class so{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new ao(t,this.predicate))}}class ao extends oo.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var uo=n("Jgta");function co(t){return null==t}function lo(t){return"function"==typeof t.set}function ho(t,e){return lo(e)?e:t.ref(e)}function fo(t,e){if("string"==typeof t)return e.stringCase();if(lo(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function po(t,e,n="on",r=Wi.a){return new Gi.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(Ji.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(Yi.a)())}function go(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function vo(t,e){const{payload:n,prevKey:r,key:i}=e,o=go(t,i),s=function(t,e){if(co(e))return 0;{const n=go(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function yo(t){return(co(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function mo(t,e,n){return function(t,e,n){return po(t,"value","once",n).pipe(Object(Xi.a)(r=>{const i=[Object(Qi.a)(r)];return e.forEach(e=>i.push(po(t,e,"on",n))),Object($i.a)(...i).pipe(Object(Zi.a)(vo,[]))}),Object(to.a)())}(t,e=yo(e),n)}function bo(t,e,n){const r=(e=yo(e)).map(e=>po(t,e,"on",n));return Object($i.a)(...r)}function _o(t,e){return function(n,r){return fo(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function wo(t,e){return function(){return po(t,"value","on",e)}}const Eo=new r.q("angularfire2.realtimeDatabaseURL"),To=new r.q("angularfire2.database.use-emulator");let Io=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new zi.d(i),this.keepUnstableUntilFirst=Object(zi.h)(this.schedulers);const a=o,u=Object(zi.g)(t,i,e);!uo.a.auth&&s&&Object(zi.j)(),this.database=Object(zi.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>ho(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:_o(r,"update"),set:_o(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?fo(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>mo(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>bo(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return po(t,"value","on",e).pipe(Object(Ji.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new ro(t,n))}}(e),Object(Ji.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new so(r))),Object(Ji.a)(t=>t.actions));var r}(t,bo(t,e).pipe(Object(Zi.a)((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>mo(t,r,n).pipe(Object(Ji.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>ho(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>wo(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>wo(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(Ji.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(zi.c),r.Kb(zi.b,8),r.Kb(Eo,8),r.Kb(r.B),r.Kb(r.z),r.Kb(To,8),r.Kb(qi.c,8))},t.\u0275prov=Object(r.Ab)({factory:function(){return new t(Object(r.Kb)(zi.c),Object(r.Kb)(zi.b,8),Object(r.Kb)(Eo,8),Object(r.Kb)(r.B),Object(r.Kb)(r.z),Object(r.Kb)(To,8),Object(r.Kb)(qi.c,8))},token:t,providedIn:"any"}),t})(),Oo=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[Io]}),t})(),So=(()=>{class t{}return t.\u0275mod=r.Cb({type:t,bootstrap:[Ki]}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[],imports:[[D,F,zi.a.initializeApp(i),qi.b,Oo]]}),t})();Object(r.S)(),R().bootstrapModule(So).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u}));var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);